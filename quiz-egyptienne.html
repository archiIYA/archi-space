<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz — Architecture égyptienne</title>

  <link
    href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600&display=swap"
    rel="stylesheet"
  />

  <style>
    /* === Basic Styles === */
    body {
      margin: 0;
      font-family: "Rubik", sans-serif;
      background: #fff;
      color: #111;
      display: flex;
      min-height: 100vh;
      flex-wrap: wrap;
    }

    /* === Sidebar Styles === */
    aside {
      width: 240px;
      background-color: #f4f4f4;
      height: 100vh;
      padding: 20px;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
      overflow-y: auto;
      position: fixed;
      left: 0;
      top: 0;
      transform: translateX(0);
      transition: transform 0.3s ease;
      z-index: 998;
    }

    aside.hidden {
      transform: translateX(-260px);
    }

    .sidebar-header {
      margin-bottom: 20px;
    }

    .sidebar-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sidebar-menu li {
      margin-bottom: 8px;
    }

    .sidebar-menu a {
      color: #111;
      text-decoration: none;
      font-weight: 500;
      display: block;
      padding: 8px 0;
      transition: color 0.3s ease, text-decoration 0.3s ease;
    }

    .sidebar-menu a:hover {
      color: #007bff;
      text-decoration: underline;
    }

    .back-button {
      margin-bottom: 20px;
      background-color: #ddd;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      font-weight: 600;
      text-decoration: none;
      color: #111;
      display: block;
      text-align: center;
    }

    .back-button.is-link {
      background: #eee;
    }

    #toggleSidebar {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 999;
      background-color: #111;
      color: #fff;
      border: none;
      padding: 10px 15px;
      font-size: 18px;
      border-radius: 6px;
      cursor: pointer;
      transition: left 0.3s ease;
    }

    /* === Main Content Styles === */
    main {
      flex-grow: 1;
      padding: 30px;
      margin-left: 240px;
      transition: margin-left 0.3s ease;
    }

    main.expanded {
      margin-left: 0;
    }

    .section-title {
      font-size: 26px;
      margin-bottom: 20px;
      color: #000;
    }

    .lesson {
      margin-bottom: 30px;
      padding: 20px;
      border-radius: 10px;
      background: linear-gradient(180deg, #fbfbfb 0%, #ffffff 100%);
      box-shadow: 0 6px 18px rgba(8, 24, 40, 0.06);
      border: 1px solid rgba(15, 23, 42, 0.04);
    }

    .buttons {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .buttons a,
    .buttons button {
      background: none;
      border: 1px solid #e6e6e6;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      background-color: #fff;
      text-decoration: none;
      color: #111;
    }

    .buttons a {
      display: inline-block;
    }

    /* === Quiz Modal Styles === */
    .quiz-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      background: linear-gradient(0deg, rgba(2, 6, 23, 0.55), rgba(2, 6, 23, 0.55));
      padding: 24px;
    }
    .quiz-card {
      width: 100%;
      max-width: 960px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 20px 50px rgba(2, 6, 23, 0.4);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      animation: pop 0.18s ease;
    }
    @keyframes pop {
      from {
        transform: translateY(12px) scale(0.99);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    .quiz-header {
      padding: 18px 22px;
      background: linear-gradient(90deg, #0ea5a4, #0ea5a4 60%, #06b6d4 100%);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .quiz-header h2 {
      margin: 0;
      font-size: 18px;
    }
    .quiz-body {
      padding: 22px;
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 20px;
    }
    .question-area {
      background: #fbfdff;
      padding: 18px;
      border-radius: 10px;
      min-height: 320px;
    }
    .question-index {
      font-size: 13px;
      color: #666;
      margin-bottom: 8px;
    }
    .question-text {
      font-size: 18px;
      color: #0f172a;
      margin-bottom: 12px;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .option {
      background: #fff;
      border: 1px solid #e6eef2;
      padding: 12px 14px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .option input {
      transform: scale(1.15);
    }
    .sidebar-panel {
      background: #ffffff;
      border-radius: 10px;
      padding: 14px;
      border: 1px solid #eef6f9;
      height: 100%;
    }
    .timer {
      font-weight: 700;
      font-size: 20px;
      color: #0f172a;
    }
    .meta {
      margin-top: 12px;
      color: #475569;
      font-size: 14px;
    }
    .nav-buttons {
      display: flex;
      gap: 10px;
      margin-top: 18px;
    }
    .btn {
      padding: 10px 14px;
      border-radius: 8px;
      background: #0ea5a4;
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }
    .btn.secondary {
      background: #e6eef2;
      color: #0f172a;
    }
    .close-quiz {
      background: transparent;
      border: 0;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 700;
      cursor: pointer;
    }
    .result {
      padding: 20px;
    }
    .answers-list {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 320px;
      overflow: auto;
    }
    .answer-item {
      background: #fcfcff;
      border: 1px solid #eef2ff;
      padding: 12px;
      border-radius: 8px;
    }

    /* === Responsive Styles === */
    @media (max-width: 880px) {
      .quiz-body {
        grid-template-columns: 1fr;
      }
      .sidebar-panel {
        order: -1;
      }
      .quiz-card {
        max-width: 96%;
      }
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      aside {
        height: auto;
        position: relative;
        width: 100%;
        transform: translateX(0);
        box-shadow: none;
        transition: none;
      }
      main {
        margin-left: 0;
      }
      aside.hidden {
        display: none;
      }
      #toggleSidebar {
        position: relative;
        top: auto;
        left: auto;
        margin-bottom: 20px;
      }
    }
  </style>
</head>
<body>
  <button id="toggleSidebar">☰ Menu</button>

  <aside class="sidebar">
    <a href="sem1.html" class="back-button is-link">🔙 Retour à Semestre 1</a>
    <button class="back-button" onclick="history.back()">🔙 Retour</button>

    <div class="sidebar-header">
      <h2>📚 Année 1 - Semestre 1</h2>
    </div>

    <ul class="sidebar-menu">
      <li><a href="atelier1.html">🏗️ Atelier de projet 1</a></li>
      <li><a href="dca1.html">📐 DCA 1</a></li>
      <li><a href="dag1.html">🎨 DAG 1</a></li>
      <li>
        <a href="histoire1.html">🏛️ Histoire de l’Architecture 1</a>
      </li>
      <li><a href="theorie1.html">📘 Théorie de projet 1</a></li>
      <li>
        <a href="geometrie1.html">📏 Géométrie de l’espace 1</a>
      </li>
      <li><a href="tmc1.html">🧱 TMC 1</a></li>
      <li><a href="math1.html">🧮 Mathématiques</a></li>
      <li><a href="expression1.html">🗣️ Expression orale</a></li>
      <li><a href="stage.html">🏞️ Stage découverte 1</a></li>
      <hr />
      <li><a href="projets.html">💼 Projets</a></li>
      <li><a href="mailto:archispaceiya@gmail.com">📩 Contact</a></li>
    </ul>
  </aside>

  <main>
    <h1 class="section-title">🏛️ Architecture égyptienne — Quiz</h1>

    <div class="lesson">
      <h3>
        <span>Architecture égyptienne</span>
        <span>
          <button
            id="openQuizBtn"
            title="Ouvrir le quiz"
            style="
              background: #06b6d4;
              color: #fff;
              padding: 8px 12px;
              border-radius: 8px;
              border: none;
              cursor: pointer;
            "
          >
            📝 Quiz — 100 Q
          </button>
        </span>
      </h3>
      <div class="buttons">
        <a href="Egyptian civilization ENG.pdf">📄 PDF</a>
        <button>🎥 Vidéo</button>
        <button>⭐ Premium</button>
      </div>
      <p style="margin-top: 12px; color: #475569">
        100 سؤال — مستوى: صعب ← صعب جدًا — توقيت: 30 دقيقة.
      </p>
    </div>

    <footer>
      © 2025 ArchiSpace – Tous droits réservés.
    </footer>
  </main>

  <div id="quizModal" class="quiz-modal" aria-hidden="true">
    <div class="quiz-card" role="dialog" aria-modal="true">
      <div class="quiz-header">
        <h2>Quiz — Architecture égyptienne</h2>
        <div class="quiz-controls">
          <div style="font-size: 13px; opacity: 0.95">
            Choisissez le type :
          </div>
          <select
            id="quizTypeSelect"
            style="
              padding: 6px 10px;
              border-radius: 8px;
              border: none;
              font-weight: 600;
            "
          >
            <option value="QCM">QCM (choix multiples)</option>
            <option value="QCS">QCS (choix unique)</option>
            <option value="VF">Vrai / Faux</option>
          </select>
          <button class="close-quiz" id="closeQuizBtn">✕</button>
        </div>
      </div>

      <div class="quiz-body">
        <div class="question-area">
          <div class="question-index" id="questionIndex">
            Question 1 / 100
          </div>
          <div class="question-text" id="questionText">
            Choisissez un type puis démarrez.
          </div>

          <div class="options" id="optionsContainer"></div>

          <div class="nav-buttons">
            <button class="btn secondary" id="prevBtn" disabled>
              ◀ Précédent
            </button>
            <button class="btn secondary" id="nextBtn" disabled>
              Suivant ▶
            </button>
            <button class="btn" id="submitBtn" style="display: none">
              Soumettre
            </button>
          </div>
        </div>

        <div class="sidebar-panel">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <div>
              <div style="font-size: 13px; color: #64748b">Timer</div>
              <div class="timer" id="timerDisplay">30:00</div>
            </div>
            <div style="text-align: right">
              <div style="font-size: 13px; color: #64748b">Score</div>
              <div style="font-weight: 700; font-size: 18px" id="scoreDisplay">
                0
              </div>
            </div>
          </div>

          <div class="meta">
            <div>Type: <span id="selectedType">—</span></div>
            <div style="margin-top: 8px">
              Questions totales: <b id="totalQuestions">100</b>
            </div>
            <div style="margin-top: 6px">
              Questions restantes: <b id="remainingQuestions">100</b>
            </div>
            <div style="margin-top: 8px">
              Réessayer les mauvaises réponses:
              <input type="checkbox" id="retryWrong" checked />
            </div>
          </div>

          <div style="margin-top: 14px">
            <button class="btn" id="startBtn">Commencer</button>
            <button
              class="btn secondary"
              id="endEarlyBtn"
              style="margin-left: 8px"
            >
              Finir maintenant
            </button>
          </div>

          <div style="margin-top: 12px; font-size: 13px; color: #475569">
            <div>Navigation: utilisez ◀ / ▶ ou les boutons.</div>
            <div style="margin-top: 8px">
              Après soumission, les erreurs seront regroupées et proposées à nouveau.
            </div>
          </div>
        </div>
      </div>

      <div id="resultArea" style="display: none" class="result">
        <h3>Résultat</h3>
        <div id="resultSummary"></div>
        <div class="answers-list" id="answersList"></div>
        <div style="margin-top: 14px">
          <button class="btn" id="retryBtn">
            Reprendre les questions incorrectes
          </button>
          <button class="btn secondary" id="closeResultBtn" style="margin-left: 10px">
            Fermer
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* Sidebar toggle */
    const sidebar = document.querySelector("aside");
    const mainContent = document.querySelector("main");
    const toggleBtn = document.getElementById("toggleSidebar");

    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("hidden");
      mainContent.classList.toggle("expanded");
    });

    /* Quiz logic elements */
    const openQuizBtn = document.getElementById("openQuizBtn");
    const quizModal = document.getElementById("quizModal");
    const closeQuizBtn = document.getElementById("closeQuizBtn");
    const startBtn = document.getElementById("startBtn");
    const endEarlyBtn = document.getElementById("endEarlyBtn");
    const submitBtn = document.getElementById("submitBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const questionText = document.getElementById("questionText");
    const optionsContainer = document.getElementById("optionsContainer");
    const questionIndex = document.getElementById("questionIndex");
    const timerDisplay = document.getElementById("timerDisplay");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const selectedTypeLabel = document.getElementById("selectedType");
    const totalQuestionsLabel = document.getElementById("totalQuestions");
    const remainingQuestionsLabel = document.getElementById(
      "remainingQuestions"
    );
    const retryWrongInput = document.getElementById("retryWrong");
    const resultArea = document.getElementById("resultArea");
    const resultSummary = document.getElementById("resultSummary");
    const answersList = document.getElementById("answersList");
    const retryBtn = document.getElementById("retryBtn");
    const closeResultBtn = document.getElementById("closeResultBtn");
    const quizTypeSelect = document.getElementById("quizTypeSelect");

    let allQuestions = [];
    let currentSet = [];
    let currentIndex = 0;
    let answers = [];
    let score = 0;
    let timer = null;
    let timeLeft = 30 * 60;
    let wrongQuestions = [];
    let retryMode = false;

    /* ===========================
        QUESTIONS DATA — 100 أسئلة
    =========================== */
    allQuestions = [
      /* ----- QCM 1..40 (choix multiples) ----- */
      {
        id: "q1",
        type: "QCM",
        question:
          "Quels sont les trois principaux types de tombes égyptiennes anciennes ?",
        options: ["Mastaba", "Pyramide", "Hypogée", "Ziggurat"],
        answer: [0, 1, 2],
      },
      {
        id: "q2",
        type: "QCM",
        question:
          "Quelles caractéristiques architecturales associe-t-on aux temples d'Amon-Rê à Karnak et Louxor ?",
        options: [
          "Plans axiaux rigides",
          "Allées de sphinx",
          "Pylônes massifs",
          "Voûtes en béton",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q3",
        type: "QCM",
        question: "Quelles fonctions remplissaient les obélisques égyptiens ?",
        options: [
          "Symboles solaires (pierre de Benben)",
          "Point de repère pour les processions",
          "Monuments commémoratifs",
          "Tombes royales",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q4",
        type: "QCM",
        question:
          "Quels éléments sont essentiels pour comprendre la structure d'une pyramide de l'Ancien Empire ?",
        options: [
          "Chambres funéraires souterraines",
          "Corridors et galeries complexes",
          "Revêtement de calcaire blanc",
          "Briques crues",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q5",
        type: "QCM",
        question: "Quels sont les principaux matériaux de construction égyptiens ?",
        options: [
          "Calcaire et grès",
          "Briques crues (pisé)",
          "Granite et diorite",
          "Bois importé",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q6",
        type: "QCM",
        question: "Quels sont les rôles des pylônes à l'entrée des temples ?",
        options: [
          "Portes monumentales",
          "Symboles de l'horizon",
          "Propagande royale (bas-reliefs)",
          "Lieux de stockage",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q7",
        type: "QCM",
        question:
          "Quels types de colonnes trouve-t-on dans l'architecture égyptienne ?",
        options: [
          "Papyrus fermé (lotus)",
          "Faisceau de lotus",
          "Fleur de palmier",
          "Voûtes à nervures",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q8",
        type: "QCM",
        question:
          "Quelles sont les caractéristiques des hypogées (tombes creusées dans la roche) ?",
        options: [
          "Décorations murales peintes",
          "Chambres funéraires multiples",
          "Absence de superstructure visible",
          "Grandes terrasses extérieures",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q9",
        type: "QCM",
        question:
          "Quelles innovations ont marqué le passage des mastabas aux pyramides à degrés ?",
        options: [
          "Utilisation de la pierre de taille",
          "Superposition de mastabas",
          "Création d'une structure interne en gradins",
          "Construction en bois",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q10",
        type: "QCM",
        question:
          "Quels sont les éléments d'un temple funéraire royal ?",
        options: [
          "Temple bas (temple de la vallée)",
          "Chaussée d'accès",
          "Temples hauts (près de la pyramide)",
          "Ziggurat",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q11",
        type: "QCM",
        question: "Quelles fonctions sont associées aux palais égyptiens ?",
        options: [
          "Résidence du pharaon et de sa famille",
          "Centre administratif de l'empire",
          "Siège du pouvoir religieux",
          "Habitat privé du peuple",
        ],
        answer: [0, 1],
      },
      {
        id: "q12",
        type: "QCM",
        question:
          "Quelles caractéristiques définissent les temples d'époque gréco-romaine en Égypte ?",
        options: [
          "Pylônes et colonnes typiquement égyptiens",
          "Syncretisme religieux (déités grecques/égyptiennes)",
          "Construction en brique crue",
          "Colonnes corinthiennes grecques",
        ],
        answer: [0, 1, 3],
      },
      {
        id: "q13",
        type: "QCM",
        question:
          "Quels rôles jouait le Nil dans l'urbanisme et l'architecture égyptienne ?",
        options: [
          "Voie de transport",
          "Source d'eau pour l'agriculture",
          "Limite sacrée entre la vie et la mort",
          "Espace de jeux nautiques",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q14",
        type: "QCM",
        question:
          "Quelles innovations de Snéfrou ont mené à la pyramide à face lisse ?",
        options: [
          "Pyramide rhomboïdale (courbée)",
          "Pyramide rouge (façade lisse)",
          "Augmentation de l'inclinaison",
          "Réduction de l'inclinaison",
        ],
        answer: [0, 1, 3],
      },
      {
        id: "q15",
        type: "QCM",
        question:
          "Quelles sont les principales différences entre les pyramides de Gizeh ?",
        options: [
          "Dimensions des pyramides",
          "Complexité des corridors internes",
          "Présence de pyramides satellites",
          "Usage de briques crues",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q16",
        type: "QCM",
        question: "Quels éléments composaient un mastaba ?",
        options: [
          "Superstructure en brique/pierre",
          "Chambre funéraire souterraine",
          "Chapelle d'offrandes",
          "Pylônes monumentaux",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q17",
        type: "QCM",
        question:
          "Quelles techniques de construction ont été utilisées pour les temples monumentaux ?",
        options: [
          "Rampes de terre",
          "Chevilles de bois pour le transport",
          "Voûtes nervurées",
          "Extraction de la pierre par coin de bois",
        ],
        answer: [0, 1, 3],
      },
      {
        id: "q18",
        type: "QCM",
        question: "Quels sont les rôles des hypostyles dans les temples ?",
        options: [
          "Salles de prière collectives",
          "Salles de procession",
          "Lieux de stockage",
          "Lieux sacrés réservés aux prêtres",
        ],
        answer: [0, 1, 3],
      },
      {
        id: "q19",
        type: "QCM",
        question:
          "Quelles informations les inscriptions hiéroglyphiques nous donnent-elles sur l'architecture ?",
        options: [
          "Règles de proportion et mesure",
          "Noms des architectes et ouvriers",
          "Récits mythologiques et rituels",
          "Dessins techniques des plans",
        ],
        answer: [0, 1, 2, 3],
      },
      {
        id: "q20",
        type: "QCM",
        question: "Quelles sont les particularités des temples solaires de Rê ?",
        options: [
          "Alignement avec les mouvements du soleil",
          "Autel à ciel ouvert",
          "Obélisque central",
          "Hypogée",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q21",
        type: "QCM",
        question: "Quels sont les rôles des obélisques ?",
        options: [
          "Symboles du culte solaire",
          "Marqueurs de l'entrée des temples",
          "Monuments commémoratifs",
          "Murs de fortification",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q22",
        type: "QCM",
        question:
          "Quels éléments architecturaux reflètent la cosmogonie égyptienne dans les temples ?",
        options: [
          "Le plafond comme le ciel étoilé",
          "Les colonnes comme des plantes (papyrus, lotus)",
          "Le sol incliné représentant le mont primordial",
          "Les murs épais",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q23",
        type: "QCM",
        question: "Quelles sont les caractéristiques des villes égyptiennes ?",
        options: [
          "Planification en grille (ville ouvrière)",
          "Utilisation de la brique crue",
          "Rues sinueuses",
          "Réseau d'assainissement moderne",
        ],
        answer: [0, 1],
      },
      {
        id: "q24",
        type: "QCM",
        question: "Quelles sont les différentes parties d'un temple égyptien ?",
        options: ["Pylône", "Cour à ciel ouvert", "Salle hypostyle", "Sanctuaire"],
        answer: [0, 1, 2, 3],
      },
      {
        id: "q25",
        type: "QCM",
        question:
          "Quelles techniques utilisaient-ils pour déplacer et assembler les blocs de pierre ?",
        options: [
          "Rampes",
          "Traîneaux et leviers",
          "Cordes et rondins de bois",
          "Chariots à roues",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q26",
        type: "QCM",
        question:
          "Quelles sont les caractéristiques de l'architecture domestique égyptienne ?",
        options: [
          "Construction en brique crue",
          "Toits-terrasses",
          "Cours intérieures pour la ventilation",
          "Multiples étages",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q27",
        type: "QCM",
        question:
          "Quelles innovations architecturales sont associées à Djoser ?",
        options: [
          "Pyramide à degrés",
          "Utilisation de la pierre de taille",
          "Complexe funéraire monumental",
          "Hypogée",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q28",
        type: "QCM",
        question:
          "Quels éléments sont essentiels dans le complexe funéraire de Khéops ?",
        options: [
          "La Grande Pyramide",
          "Le temple de la vallée",
          "Trois pyramides satellites",
          "Le complexe funéraire de Toutankhamon",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q29",
        type: "QCM",
        question:
          "Quelles sont les fonctions de la 'fausse porte' dans les tombes ?",
        options: [
          "Passage symbolique pour le Ka (âme)",
          "Point de repère pour les offrandes",
          "Représentation du défunt",
          "Accès secret à la chambre funéraire",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q30",
        type: "QCM",
        question: "Quels sont les types de temples égyptiens ?",
        options: [
          "Temples funéraires",
          "Temples de culte divin",
          "Temples solaires",
          "Palais royaux",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q31",
        type: "QCM",
        question:
          "Quelles sources nous informent sur les méthodes de construction ?",
        options: [
          "Reliefs muraux montrant les ouvriers",
          "Papyrus de construction",
          "Outils retrouvés",
          "Tablettes cunéiformes",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q32",
        type: "QCM",
        question:
          "Quelles sont les particularités des temples rupestres (comme Abou Simbel) ?",
        options: [
          "Creusés dans la roche",
          "Façade monumentale sculptée",
          "Statues colossales",
          "Toits en bois",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q33",
        type: "QCM",
        question:
          "Quels sont les rôles des statues colossales devant les temples ?",
        options: [
          "Représentation du pharaon",
          "Affirmation du pouvoir royal et divin",
          "Protection symbolique",
          "Tombes secrètes",
        ],
        answer: [0, 1],
      },
      {
        id: "q34",
        type: "QCM",
        question:
          "Quelles sont les principales différences architecturales entre l'Ancien et le Nouvel Empire ?",
        options: [
          "Ancien Empire: Pyramides / Nouvel Empire: Temples de culte divin",
          "Ancien Empire: Temples funéraires / Nouvel Empire: Temples rupestres",
          "Ancien Empire: Brique crue / Nouvel Empire: Brique cuite",
        ],
        answer: [0, 1],
      },
      {
        id: "q35",
        type: "QCM",
        question: "Quelles sont les caractéristiques des mastabas ?",
        options: [
          "Structure trapézoïdale",
          "Chambre funéraire souterraine",
          "Puits d'accès scellé",
          "Pylônes",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q36",
        type: "QCM",
        question:
          "Qu'est-ce qui caractérise l'architecture de la période d'Amarna (Akhénaton) ?",
        options: [
          "Temples à ciel ouvert dédiés à Aton",
          "Utilisation du talatat (blocs de pierre standardisés)",
          "Style artistique réaliste et fluide",
          "Pyramides",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q37",
        type: "QCM",
        question:
          "Quelles sont les fonctions des statues cultuelles dans les temples ?",
        options: [
          "Représentation vivante de la divinité",
          "Objet de rituels quotidiens",
          "Lieu d'offrandes",
          "Élément décoratif",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q38",
        type: "QCM",
        question:
          "Quels éléments architecturaux servent de transition entre la cour et l'hypostyle ?",
        options: [
          "Le portique",
          "Les pylônes",
          "La chaussée",
          "La fausse porte",
        ],
        answer: [0, 1],
      },
      {
        id: "q39",
        type: "QCM",
        question:
          "Quels rôles jouait l'alignement astronomique des temples ?",
        options: [
          "Célébration des solstices et équinoxes",
          "Marqueurs du cycle agricole",
          "Organisation du calendrier religieux",
          "Guide pour les marins",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q40",
        type: "QCM",
        question:
          "Quels sont les matériaux utilisés pour le revêtement extérieur des pyramides ?",
        options: [
          "Calcaire de Tourah",
          "Granite rose d'Assouan",
          "Brique cuite",
          "Basalte",
        ],
        answer: [0, 1],
      },

      /* ----- QCS 41..70 (choix simple) ----- */
      {
        id: "q41",
        type: "QCS",
        question:
          "La première pyramide à degrés a été construite pour quel pharaon ?",
        options: ["Khéops", "Toutânkhamon", "Djoser", "Snéfrou"],
        answer: [2],
      },
      {
        id: "q42",
        type: "QCS",
        question:
          "Quel est le matériau principal de construction des temples monumentaux ?",
        options: ["Brique crue", "Granite", "Pierre (calcaire, grès)", "Marbre"],
        answer: [2],
      },
      {
        id: "q43",
        type: "QCS",
        question:
          "Quel élément architectural servait de porte monumentale à l'entrée des temples ?",
        options: ["L'obélisque", "Le pylône", "Le mastaba", "La pyramide"],
        answer: [1],
      },
      {
        id: "q44",
        type: "QCS",
        question: "Quelle pyramide est aussi appelée 'Pyramide rouge' ?",
        options: [
          "La Grande Pyramide de Gizeh",
          "La pyramide de Djoser",
          "La pyramide de Meïdoum",
          "La pyramide de Snéfrou à Dahchour",
        ],
        answer: [3],
      },
      {
        id: "q45",
        type: "QCS",
        question:
          "Les tombes royales de la Vallée des Rois sont de quel type ?",
        options: ["Pyramides", "Mastabas", "Hypogées", "Ziggurats"],
        answer: [2],
      },
      {
        id: "q46",
        type: "QCS",
        question:
          "Quelle partie d'un temple égyptien est un espace couvert de colonnes serrées ?",
        options: [
          "La cour à ciel ouvert",
          "Le sanctuaire",
          "La salle hypostyle",
          "Le pylône",
        ],
        answer: [2],
      },
      {
        id: "q47",
        type: "QCS",
        question: "Le terme 'mastaba' signifie en arabe :",
        options: ["Maison du Ka", "Tombe du pharaon", "Banc", "Temple funéraire"],
        answer: [2],
      },
      {
        id: "q48",
        type: "QCS",
        question:
          "Quel est le dieu principal associé au grand temple de Karnak ?",
        options: ["Osiris", "Râ", "Amon-Rê", "Horus"],
        answer: [2],
      },
      {
        id: "q49",
        type: "QCS",
        question:
          "La 'fausse porte' dans une tombe égyptienne est le lieu où :",
        options: [
          "Le pharaon est enterré",
          "Les offrandes sont déposées",
          "Le Ka (âme) du défunt peut passer",
          "La momie est préparée",
        ],
        answer: [2],
      },
      {
        id: "q50",
        type: "QCS",
        question:
          "Quel pharaon a construit le célèbre temple d'Abou Simbel ?",
        options: ["Toutânkhamon", "Akhenaton", "Ramsès II", "Hatchepsout"],
        answer: [2],
      },
      {
        id: "q51",
        type: "QCS",
        question: "L'obélisque symbolise principalement :",
        options: [
          "La puissance militaire",
          "Le culte solaire",
          "La fertilité du Nil",
          "La justice divine",
        ],
        answer: [1],
      },
      {
        id: "q52",
        type: "QCS",
        question:
          "Le temple de Louxor est relié au temple de Karnak par :",
        options: ["Un canal", "Une avenue de sphinx", "Un pont", "Un mur d'enceinte"],
        answer: [1],
      },
      {
        id: "q53",
        type: "QCS",
        question: "Les pyramides sont des constructions de l'époque :",
        options: [
          "Moyen Empire",
          "Nouvel Empire",
          "Ancien Empire",
          "Ptolémaïque",
        ],
        answer: [2],
      },
      {
        id: "q54",
        type: "QCS",
        question:
          "Les briques crues étaient le matériau de base pour :",
        options: [
          "Les temples monumentaux",
          "Les pyramides",
          "Les palais et maisons privées",
          "Les obélisques",
        ],
        answer: [2],
      },
      {
        id: "q55",
        type: "QCS",
        question: "Le plan des temples égyptiens est généralement :",
        options: [
          "Circulaire",
          "Orthogonal",
          "Axial et symétrique",
          "Radial",
        ],
        answer: [2],
      },
      {
        id: "q56",
        type: "QCS",
        question:
          "Quelle pyramide a une inclinaison qui change à mi-hauteur ?",
        options: [
          "Pyramide de Khéops",
          "Pyramide de Djoser",
          "Pyramide rhomboïdale de Snéfrou",
          "Pyramide rouge",
        ],
        answer: [2],
      },
      {
        id: "q57",
        type: "QCS",
        question: "Les temples de culte divin servaient à :",
        options: [
          "Accueillir toute la population",
          "Abriter la statue de la divinité",
          "Enterrer le pharaon",
          "Préparer la momification",
        ],
        answer: [1],
      },
      {
        id: "q58",
        type: "QCS",
        question:
          "Quelle partie du temple égyptien était la plus sacrée et la plus reculée ?",
        options: [
          "Le pylône",
          "La cour à ciel ouvert",
          "Le sanctuaire",
          "La salle hypostyle",
        ],
        answer: [2],
      },
      {
        id: "q59",
        type: "QCS",
        question:
          "L'architecture égyptienne est principalement caractérisée par son :",
        options: [
          "Sens du gigantisme et de la massivité",
          "Usage du béton",
          "Absence de symbologie religieuse",
          "Plans aléatoires",
        ],
        answer: [0],
      },
      {
        id: "q60",
        type: "QCS",
        question:
          "Les murs épais des temples servaient principalement à :",
        options: [
          "Se défendre des attaques",
          "Supporter le poids de la structure",
          "Isoler du froid",
          "Créer des espaces sombres pour les rituels",
        ],
        answer: [1],
      },

      /* ----- VF 61..90 (Vrai/Faux) ----- */
      {
        id: "q61",
        type: "VF",
        question: "Les pyramides étaient des tombes pour les pharaons.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q62",
        type: "VF",
        question: "Le plan des villes égyptiennes était souvent organique et non planifié.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q63",
        type: "VF",
        question: "Le Nil n'avait aucun impact sur l'orientation des constructions.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q64",
        type: "VF",
        question: "Le sanctuaire d'un temple était ouvert au public.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q65",
        type: "VF",
        question: "Les mastabas sont des ancêtres des pyramides.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q66",
        type: "VF",
        question: "Les Égyptiens utilisaient des voûtes en plein cintre comme les Romains.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q67",
        type: "VF",
        question:
          "La Grande Pyramide de Gizeh a une orientation parfaite par rapport aux points cardinaux.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q68",
        type: "VF",
        question: "Les temples rupestres sont des temples creusés dans la roche.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q69",
        type: "VF",
        question: "Les maisons égyptiennes étaient construites en pierre.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q70",
        type: "VF",
        question:
          "Les colonnes en forme de papyrus et de lotus avaient une signification symbolique.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q71",
        type: "VF",
        question:
          "Le talatat est un petit bloc de pierre standardisé utilisé à l'époque d'Akhénaton.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q72",
        type: "VF",
        question: "La Vallée des Rois abrite des pyramides royales.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q73",
        type: "VF",
        question: "L'hypostyle est la partie la plus éclairée d'un temple.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q74",
        type: "VF",
        question:
          "Les égyptiens utilisaient des mortiers de boue pour leurs constructions en pierre.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q75",
        type: "VF",
        question: "L'architecture égyptienne est majoritairement une architecture de bois.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q76",
        type: "VF",
        question: "L'obélisque est une statue colossale représentant le pharaon.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q77",
        type: "VF",
        question:
          "Les temples funéraires étaient construits pour le culte du pharaon décédé.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q78",
        type: "VF",
        question:
          "Les murs des temples étaient souvent décorés de bas-reliefs et de peintures.",
        options: ["Vrai", "Faux"],
        answer: [0],
      },
      {
        id: "q79",
        type: "VF",
        question:
          "L'architecture égyptienne est caractérisée par son usage intensif de l'arc en plein cintre.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },
      {
        id: "q80",
        type: "VF",
        question:
          "Les statues colossales devant les temples représentaient souvent le dieu principal du temple.",
        options: ["Vrai", "Faux"],
        answer: [1],
      },

      /* ----- QCM 81..90 (mix hard extra) ----- */
      {
        id: "q81",
        type: "QCM",
        question: "Quelles sont les caractéristiques de l'urbanisme de Deir el-Médineh ?",
        options: [
          "Plan en grille et rues rectilignes",
          "Maisons uniformes pour les ouvriers",
          "Absence de murs d'enceinte",
          "Tombes royales",
        ],
        answer: [0, 1],
      },
      {
        id: "q82",
        type: "QCM",
        question: "Quels sont les rôles des rampes de construction ?",
        options: [
          "Monter les blocs de pierre",
          "Compenser la hauteur de la pyramide",
          "Faciliter le travail des esclaves",
          "Permettre aux architectes de travailler",
        ],
        answer: [0, 1],
      },
      {
        id: "q83",
        type: "QCM",
        question:
          "Quels sont les rôles des hiéroglyphes sur les murs des temples ?",
        options: [
          "Texte rituel et mythologique",
          "Noms des dieux et des pharaons",
          "Instructions pour la construction",
          "Décoration pure",
        ],
        answer: [0, 1],
      },
      {
        id: "q84",
        type: "QCM",
        question: "Quels sont les types de toits utilisés en Égypte ancienne ?",
        options: [
          "Toits plats en bois et terre",
          "Voûtes en brique crue",
          "Toits en pente pour évacuer la pluie",
          "Dômes en pierre",
        ],
        answer: [0, 1],
      },
      {
        id: "q85",
        type: "QCM",
        question: "Quelles sont les innovations de l'époque ptolémaïque ?",
        options: [
          "Pylônes et colonnes typiquement égyptiens",
          "Syncretisme religieux",
          "Usage des voûtes en brique cuite",
          "Plans architecturaux complexes",
        ],
        answer: [0, 1],
      },
      {
        id: "q86",
        type: "QCM",
        question: "Quelles sont les caractéristiques des temples d'Hatchepsout ?",
        options: [
          "Temple semi-rupestre",
          "Organisation en terrasses",
          "Alignement astronomique",
          "Pyramides",
        ],
        answer: [0, 1],
      },
      {
        id: "q87",
        type: "QCM",
        question: "Quels sont les rôles de l'architecture domestique ?",
        options: [
          "Logement de la famille",
          "Stockage des denrées",
          "Espace pour les rituels domestiques",
          "Centre administratif",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q88",
        type: "QCM",
        question:
          "Quelles sont les fonctions du complexe funéraire de Djoser ?",
        options: [
          "Tombe du pharaon",
          "Culte funéraire",
          "Rituels de renouvellement de pouvoir",
          "Siège administratif",
        ],
        answer: [0, 1, 2],
      },
      {
        id: "q89",
        type: "QCM",
        question: "Quelles sont les techniques de construction des murs ?",
        options: [
          "Appareil régulier de pierre",
          "Usage de brique crue et de mortier de boue",
          "Empilement de pierres",
          "Usage de béton armé",
        ],
        answer: [0, 1],
      },
      {
        id: "q90",
        type: "QCM",
        question: "Quels sont les indices d'une architecture domestique organisée ?",
        options: [
          "Plans rectangulaires",
          "Organisation autour d'une cour centrale",
          "Absence de fenêtres",
          "Utilisation de toits plats",
        ],
        answer: [0, 1, 3],
      },

      /* ----- QCS 91..100 (mix hard extra) ----- */
      {
        id: "q91",
        type: "QCS",
        question: "La construction du temple de Louxor a duré :",
        options: [
          "Quelques années",
          "Quelques décennies",
          "Plusieurs siècles",
          "Plus d'un millénaire",
        ],
        answer: [2],
      },
      {
        id: "q92",
        type: "QCS",
        question: "Le serdab est une petite pièce dans un mastaba pour :",
        options: [
          "Déposer les offrandes",
          "Abriter la statue du défunt (le ka)",
          "Stocker les outils",
          "Enterrer les prêtres",
        ],
        answer: [1],
      },
      {
        id: "q93",
        type: "QCS",
        question:
          "Quel élément architectural servait à capter la lumière pour éclairer les hypostyles ?",
        options: ["Le clerestory", "Le pylône", "L'obélisque", "La rampe"],
        answer: [0],
      },
      {
        id: "q94",
        type: "QCS",
        question: "Le plan de la ville ouvrière de Deir el-Médineh est :",
        options: ["Organique", "Circulaire", "Orthogonal", "Radial"],
        answer: [2],
      },
      {
        id: "q95",
        type: "QCS",
        question:
          "L'architecture funéraire pré-dynastique est caractérisée par :",
        options: ["Pyramides", "Mastabas", "Tombes en bois", "Fosses simples"],
        answer: [3],
      },
      {
        id: "q96",
        type: "QCS",
        question: "Le temple d'Hatchepsout est situé à :",
        options: ["Karnak", "Louxor", "Deir el-Bahari", "Abou Simbel"],
        answer: [2],
      },
      {
        id: "q97",
        type: "QCS",
        question:
          "Quel est le principal élément architectural du temple solaire d'Abou Gurab ?",
        options: [
          "L'obélisque central",
          "La salle hypostyle",
          "La pyramide",
          "Les statues de pharaons",
        ],
        answer: [0],
      },
      {
        id: "q98",
        type: "QCS",
        question:
          "La pierre angulaire des pyramides à face lisse se trouve au sommet et s'appelle :",
        options: ["Pylône", "Obélisque", "Pyramidion", "Mastaba"],
        answer: [2],
      },
      {
        id: "q99",
        type: "QCS",
        question:
          "La symbolique de la montée vers les temples se réfère à :",
        options: [
          "L'ascension du pharaon au pouvoir",
          "La montée du mont primordial",
          "Le chemin vers le Nil",
          "Le chemin vers la mort",
        ],
        answer: [1],
      },
      {
        id: "q100",
        type: "QCS",
        question:
          "L'architecture palatiale était généralement faite de :",
        options: [
          "Pierre et marbre",
          "Brique crue et bois",
          "Pierre et granit",
          "Béton",
        ],
        answer: [1],
      },
    ];

    /* ===========================
        QUIZ LOGIC
    =========================== */

    openQuizBtn.addEventListener("click", () => {
      quizModal.style.display = "flex";
    });
    closeQuizBtn.addEventListener("click", () => {
      quizModal.style.display = "none";
    });

    let timerInterval;

    function formatTime(seconds) {
      const min = Math.floor(seconds / 60);
      const sec = seconds % 60;
      return `${min.toString().padStart(2, "0")}:${sec.toString().padStart(2, "0")}`;
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = formatTime(timeLeft);
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          handleSubmit();
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
    }

    function renderQuestion(index) {
      const question = currentSet[index];
      questionIndex.textContent = `Question ${index + 1} / ${currentSet.length}`;
      questionText.textContent = question.question;
      optionsContainer.innerHTML = "";

      const type = question.type;
      const inputType = type === "QCM" ? "checkbox" : "radio";

      question.options.forEach((option, i) => {
        const optionDiv = document.createElement("label");
        optionDiv.classList.add("option");

        const input = document.createElement("input");
        input.type = inputType;
        input.name = `question-${index}`;
        input.value = i;

        if (answers[index] && answers[index].includes(i)) {
          input.checked = true;
        }

        input.addEventListener("change", () => {
          if (inputType === "radio") {
            answers[index] = [i];
          } else {
            answers[index] = [
              ...document.querySelectorAll(`input[name="question-${index}"]:checked`),
            ].map((el) => parseInt(el.value));
          }
        });

        optionDiv.appendChild(input);
        optionDiv.appendChild(document.createTextNode(option));
        optionsContainer.appendChild(optionDiv);
      });

      updateNavButtons();
    }

    function updateNavButtons() {
      prevBtn.disabled = currentIndex === 0;
      if (currentIndex === currentSet.length - 1) {
        nextBtn.style.display = "none";
        submitBtn.style.display = "block";
      } else {
        nextBtn.style.display = "block";
        submitBtn.style.display = "none";
      }
    }

    function startQuiz() {
      const type = quizTypeSelect.value;
      selectedTypeLabel.textContent = type;
      currentSet = allQuestions.filter((q) => q.type === type);
      if (currentSet.length === 0) {
        alert("لا توجد أسئلة من هذا النوع.");
        return;
      }
      totalQuestionsLabel.textContent = currentSet.length;
      remainingQuestionsLabel.textContent = currentSet.length;
      currentIndex = 0;
      answers = Array(currentSet.length).fill([]);
      score = 0;
      wrongQuestions = [];
      retryMode = false;

      startBtn.disabled = true;
      quizTypeSelect.disabled = true;
      renderQuestion(currentIndex);
      startTimer();
    }

    function handleSubmit() {
      stopTimer();
      let correctCount = 0;
      wrongQuestions = [];

      answers.forEach((userAnswer, index) => {
        const question = currentSet[index];
        const isCorrect =
          JSON.stringify(userAnswer.sort()) ===
          JSON.stringify(question.answer.sort());
        if (isCorrect) {
          correctCount++;
        } else {
          wrongQuestions.push(question);
        }
      });

      score = correctCount;
      showResults();
    }

    function showResults() {
      quizModal.querySelector(".quiz-body").style.display = "none";
      resultArea.style.display = "block";

      const percentage = (score / currentSet.length) * 100;
      resultSummary.innerHTML = `
        <h3>Résultats finaux</h3>
        <p>Votre score: <b>${score} / ${currentSet.length}</b></p>
        <p>Pourcentage de réussite: <b>${percentage.toFixed(2)}%</b></p>
        <p>Questions incorrectes: <b>${wrongQuestions.length}</b></p>
      `;

      answersList.innerHTML = "";
      wrongQuestions.forEach((q) => {
        const item = document.createElement("div");
        item.classList.add("answer-item");
        item.innerHTML = `
          <p><b>Question:</b> ${q.question}</p>
          <p><b>Bonne(s) réponse(s):</b> ${q.answer.map((i) => q.options[i]).join(", ")}</p>
        `;
        answersList.appendChild(item);
      });

      retryBtn.style.display =
        retryWrongInput.checked && wrongQuestions.length > 0
          ? "inline-block"
          : "none";
    }

    function retryWrongQuestions() {
      currentSet = [...wrongQuestions];
      currentIndex = 0;
      answers = Array(currentSet.length).fill([]);
      score = 0;
      retryMode = true;

      quizModal.querySelector(".quiz-body").style.display = "grid";
      resultArea.style.display = "none";

      totalQuestionsLabel.textContent = currentSet.length;
      remainingQuestionsLabel.textContent = currentSet.length;
      timeLeft = 30 * 60;
      timerDisplay.textContent = formatTime(timeLeft);

      renderQuestion(currentIndex);
      startTimer();
    }

    function closeResults() {
      quizModal.style.display = "none";
      location.reload(); // Reload the page to reset everything
    }

    startBtn.addEventListener("click", startQuiz);
    endEarlyBtn.addEventListener("click", handleSubmit);
    nextBtn.addEventListener("click", () => {
      currentIndex++;
      remainingQuestionsLabel.textContent = currentSet.length - (currentIndex + 1);
      renderQuestion(currentIndex);
    });
    prevBtn.addEventListener("click", () => {
      currentIndex--;
      remainingQuestionsLabel.textContent = currentSet.length - (currentIndex + 1);
      renderQuestion(currentIndex);
    });
    submitBtn.addEventListener("click", handleSubmit);
    retryBtn.addEventListener("click", retryWrongQuestions);
    closeResultBtn.addEventListener("click", closeResults);
  </script>
</body>
</html>
