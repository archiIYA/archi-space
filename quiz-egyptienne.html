<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz â€” Architecture Ã©gyptienne</title>

  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* === Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© === */
    body {
      margin: 0;
      font-family: 'Rubik', sans-serif;
      background: #fff;
      color: #111;
      display: flex;
      min-height: 100vh;
      flex-wrap: wrap; 
    }

    /* === ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Sidebar) === */
    aside {
      width: 240px;
      background-color: #f4f4f4;
      height: 100vh;
      padding: 20px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      overflow-y: auto;
      position: fixed;
      left: 0;
      top: 0;
      transform: translateX(0);
      transition: transform 0.3s ease;
      z-index: 998;
    }

    aside.hidden {
      transform: translateX(-260px);
    }

    .sidebar-header {
      margin-bottom: 20px;
    }

    .sidebar-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .sidebar-menu li {
      margin-bottom: 8px;
    }

    .sidebar-menu a {
      color: #111;
      text-decoration: none;
      font-weight: 500;
      display: block;
      padding: 8px 0;
      transition: color 0.3s ease, text-decoration 0.3s ease;
    }

    .sidebar-menu a:hover {
      color: #007bff;
      text-decoration: underline;
    }

    .back-button {
      margin-bottom: 20px;
      background-color: #ddd;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      font-weight: 600;
      text-decoration: none; 
      color: #111;
      display: block; 
      text-align: center;
    }

    .back-button.is-link {
        background: #eee;
    }

    #toggleSidebar {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 999;
      background-color: #111;
      color: #fff;
      border: none;
      padding: 10px 15px;
      font-size: 18px;
      border-radius: 6px;
      cursor: pointer;
      transition: left 0.3s ease;
    }

    /* === ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Main Content) === */
    main {
      flex-grow: 1;
      padding: 30px;
      margin-left: 240px;
      transition: margin-left 0.3s ease;
    }

    main.expanded {
      margin-left: 0;
    }
    
    .section-title {
      font-size: 26px;
      margin-bottom: 20px;
      color: #000;
    }

    .lesson { margin-bottom: 30px; padding: 20px; border-radius: 10px; background: linear-gradient(180deg, #fbfbfb 0%, #ffffff 100%); box-shadow: 0 6px 18px rgba(8,24,40,0.06); border:1px solid rgba(15,23,42,0.04); }

    .buttons { margin-top: 10px; display:flex; gap:10px; align-items:center; }

    .buttons a, .buttons button {
      background: none;
      border: 1px solid #e6e6e6;
      padding:8px 12px;
      border-radius:8px;
      font-size: 16px;
      cursor: pointer;
      background-color:#fff;
      text-decoration: none;
      color: #111;
    }
    
    .buttons a {
      display: inline-block;
    }

    /* === ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù€ Modal Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø£Ø³Ø¦Ù„Ø© === */
    .quiz-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      background: linear-gradient(0deg, rgba(2,6,23,0.55), rgba(2,6,23,0.55));
      padding: 24px;
    }
    .quiz-card {
      width: 100%;
      max-width: 960px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 20px 50px rgba(2,6,23,0.4);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      animation: pop .18s ease;
    }
    @keyframes pop { from { transform: translateY(12px) scale(.99); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
    .quiz-header { padding: 18px 22px; background: linear-gradient(90deg,#0ea5a4,#0ea5a4 60%, #06b6d4 100%); color: #fff; display:flex; align-items:center; justify-content:space-between; }
    .quiz-header h2 { margin:0; font-size:18px; }
    .quiz-body { padding: 22px; display: grid; grid-template-columns: 1fr 320px; gap: 20px; }
    .question-area { background:#fbfdff; padding:18px; border-radius:10px; min-height:320px; }
    .question-index { font-size:13px; color:#666; margin-bottom:8px; }
    .question-text { font-size:18px; color:#0f172a; margin-bottom:12px; }
    .options { display:flex; flex-direction:column; gap:10px; }
    .option { background:#fff; border:1px solid #e6eef2; padding:12px 14px; border-radius:8px; cursor:pointer; display:flex; align-items:center; gap:10px; }
    .option input { transform:scale(1.15); }
    .sidebar-panel { background:#ffffff; border-radius:10px; padding:14px; border:1px solid #eef6f9; height:100%; }
    .timer { font-weight:700; font-size:20px; color:#0f172a; }
    .meta { margin-top:12px; color:#475569; font-size:14px; }
    .nav-buttons { display:flex; gap:10px; margin-top:18px; }
    .btn { padding:10px 14px; border-radius:8px; background:#0ea5a4; color:#fff; border:none; cursor:pointer; font-weight:600; }
    .btn.secondary { background:#e6eef2; color:#0f172a; }
    .close-quiz { background:transparent; border:0; color:rgba(255,255,255,0.9); font-weight:700; cursor:pointer; }
    .result { padding:20px; }
    .answers-list { margin-top:12px; display:flex; flex-direction:column; gap:10px; max-height:320px; overflow:auto; }
    .answer-item { background:#fcfcff; border:1px solid #eef2ff; padding:12px; border-radius:8px; }

    /* === Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© === */
    @media (max-width: 880px) {
      .quiz-body { grid-template-columns: 1fr; }
      .sidebar-panel { order: -1; }
      .quiz-card { max-width: 96%; }
    }
    
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      aside {
        height: auto;
        position: relative;
        width: 100%;
        transform: translateX(0);
        box-shadow: none;
        transition: none;
      }
      main {
        margin-left: 0;
      }
      aside.hidden {
        display: none;
      }
      #toggleSidebar {
        position: relative;
        top: auto;
        left: auto;
        margin-bottom: 20px;
      }
    }
  </style>
</head>
<body>

<button id="toggleSidebar">â˜° Menu</button>

<aside class="sidebar">
  <a href="sem1.html" class="back-button is-link">ğŸ”™ Retour Ã  Semestre 1</a>
  <button class="back-button" onclick="history.back()">ğŸ”™ Retour</button>

  <div class="sidebar-header">
    <h2>ğŸ“š AnnÃ©e 1 - Semestre 1</h2>
  </div>

  <ul class="sidebar-menu">
    <li><a href="atelier1.html">ğŸ—ï¸ Atelier de projet 1</a></li>
    <li><a href="dca1.html">ğŸ“ DCA 1</a></li>
    <li><a href="dag1.html">ğŸ¨ DAG 1</a></li>
    <li><a href="histoire1.html">ğŸ›ï¸ Histoire de lâ€™Architecture 1</a></li>
    <li><a href="theorie1.html">ğŸ“˜ ThÃ©orie de projet 1</a></li>
    <li><a href="geometrie1.html">ğŸ“ GÃ©omÃ©trie de lâ€™espace 1</a></li>
    <li><a href="tmc1.html">ğŸ§± TMC 1</a></li>
    <li><a href="math1.html">ğŸ§® MathÃ©matiques</a></li>
    <li><a href="expression1.html">ğŸ—£ï¸ Expression orale</a></li>
    <li><a href="stage.html">ğŸï¸ Stage dÃ©couverte 1</a></li>
    <hr>
    <li><a href="projets.html">ğŸ’¼ Projets</a></li>
    <li><a href="mailto:archispaceiya@gmail.com">ğŸ“© Contact</a></li>
  </ul>
</aside>

<main>
  <h1 class="section-title">ğŸ›ï¸ Architecture Ã©gyptienne â€” Quiz</h1>

  <div class="lesson">
    <h3>
      <span>Architecture Ã©gyptienne</span>
      <span>
        <button id="openQuizBtn" title="Ouvrir le quiz" style="background:#06b6d4;color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;">ğŸ“ Quiz â€” 100 Q</button>
      </span>
    </h3>
    <div class="buttons">
      <a href="LA CIVILISATION MESOPOTAMIENNEzd.pdf">ğŸ“„ PDF</a>
      <button>ğŸ¥ VidÃ©o</button>
      <button>â­ Premium</button>
    </div>
    <p style="margin-top:12px; color:#475569;">100 Ø³Ø¤Ø§Ù„ â€” Ù…Ø³ØªÙˆÙ‰: ØµØ¹Ø¨ â†’ ØµØ¹Ø¨ Ø¬Ø¯Ù‹Ø§ â€” ØªÙˆÙ‚ÙŠØª: 30 Ø¯Ù‚ÙŠÙ‚Ø©.</p>
  </div>

  <footer>
    Â© 2025 ArchiSpace â€“ Tous droits rÃ©servÃ©s.
  </footer>
</main>

<div id="quizModal" class="quiz-modal" aria-hidden="true">
  <div class="quiz-card" role="dialog" aria-modal="true">
    <div class="quiz-header">
      <h2>Quiz â€” Architecture Ã©gyptienne</h2>
      <div class="quiz-controls">
        <div style="font-size:13px;opacity:0.95;">Choisissez le type :</div>
        <select id="quizTypeSelect" style="padding:6px 10px; border-radius:8px; border:none; font-weight:600;">
          <option value="QCM">QCM (choix multiples)</option>
          <option value="QCS">QCS (choix unique)</option>
          <option value="VF">Vrai / Faux</option>
        </select>
        <button class="close-quiz" id="closeQuizBtn">âœ•</button>
      </div>
    </div>

    <div class="quiz-body">
      <div class="question-area">
        <div class="question-index" id="questionIndex">Question 1 / 100</div>
        <div class="question-text" id="questionText">Choisissez un type puis dÃ©marrez.</div>

        <div class="options" id="optionsContainer"></div>

        <div class="nav-buttons">
          <button class="btn secondary" id="prevBtn" disabled>â—€ PrÃ©cÃ©dent</button>
          <button class="btn secondary" id="nextBtn" disabled>Suivant â–¶</button>
          <button class="btn" id="submitBtn" style="display:none;">Soumettre</button>
        </div>
      </div>

      <div class="sidebar-panel">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="font-size:13px;color:#64748b;">Timer</div>
            <div class="timer" id="timerDisplay">30:00</div>
          </div>
          <div style="text-align:right;">
            <div style="font-size:13px;color:#64748b;">Score</div>
            <div style="font-weight:700; font-size:18px;" id="scoreDisplay">0</div>
          </div>
        </div>

        <div class="meta">
          <div>Type: <span id="selectedType">â€”</span></div>
          <div style="margin-top:8px;">Questions totales: <b id="totalQuestions">100</b></div>
          <div style="margin-top:6px;">Questions restantes: <b id="remainingQuestions">100</b></div>
          <div style="margin-top:8px;">RÃ©essayer les mauvaises rÃ©ponses: <input type="checkbox" id="retryWrong" checked></div>
        </div>

        <div style="margin-top:14px;">
          <button class="btn" id="startBtn">Commencer</button>
          <button class="btn secondary" id="endEarlyBtn" style="margin-left:8px;">Finir maintenant</button>
        </div>

        <div style="margin-top:12px; font-size:13px; color:#475569;">
          <div>Navigation: utilisez â—€ / â–¶ ou les boutons.</div>
          <div style="margin-top:8px;">AprÃ¨s soumission, les erreurs seront regroupÃ©es et proposÃ©es Ã  nouveau.</div>
        </div>
      </div>
    </div>

    <div id="resultArea" style="display:none;" class="result">
      <h3>RÃ©sultat</h3>
      <div id="resultSummary"></div>
      <div class="answers-list" id="answersList"></div>
      <div style="margin-top:14px;">
        <button class="btn" id="retryBtn">Reprendre les questions incorrectes</button>
        <button class="btn secondary" id="closeResultBtn" style="margin-left:10px;">Fermer</button>
      </div>
    </div>

  </div>
</div>

<script>
    /* Sidebar toggle */
    const sidebar = document.querySelector('aside');
    const mainContent = document.querySelector('main');
    const toggleBtn = document.getElementById('toggleSidebar');

    toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('hidden');
        mainContent.classList.toggle('expanded');
    });

    /* Quiz logic elements */
    const openQuizBtn = document.getElementById('openQuizBtn');
    const quizModal = document.getElementById('quizModal');
    const closeQuizBtn = document.getElementById('closeQuizBtn');
    const startBtn = document.getElementById('startBtn');
    const endEarlyBtn = document.getElementById('endEarlyBtn');
    const submitBtn = document.getElementById('submitBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const questionText = document.getElementById('questionText');
    const optionsContainer = document.getElementById('optionsContainer');
    const questionIndex = document.getElementById('questionIndex');
    const timerDisplay = document.getElementById('timerDisplay');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const selectedTypeLabel = document.getElementById('selectedType');
    const totalQuestionsLabel = document.getElementById('totalQuestions');
    const remainingQuestionsLabel = document.getElementById('remainingQuestions');
    const retryWrongInput = document.getElementById('retryWrong');
    const resultArea = document.getElementById('resultArea');
    const resultSummary = document.getElementById('resultSummary');
    const answersList = document.getElementById('answersList');
    const retryBtn = document.getElementById('retryBtn');
    const closeResultBtn = document.getElementById('closeResultBtn');
    const quizTypeSelect = document.getElementById('quizTypeSelect');

    let allQuestions = [];
    let currentSet = [];
    let currentIndex = 0;
    let answers = [];
    let score = 0;
    let timer = null;
    let timeLeft = 30 * 60; 
    let wrongQuestions = [];
    let retryMode = false;

    /* ===========================
        QUESTIONS DATA â€” 100 Ø£Ø³Ø¦Ù„Ø©
    =========================== */
    allQuestions = [
        /* ----- QCM 1..40 (choix multiples) ----- */
        { id:'q1', type:'QCM', question:"Quels sont les trois principaux types de tombes Ã©gyptiennes anciennes ?", options:["Mastaba","Pyramide","HypogÃ©e","Ziggurat"], answer:[0,1,2]},
        { id:'q2', type:'QCM', question:"Quelles caractÃ©ristiques architecturales associe-t-on aux temples d'Amon-RÃª Ã  Karnak et Louxor ?", options:["Plans axiaux rigides","AllÃ©es de sphinx","PylÃ´nes massifs","VoÃ»tes en bÃ©ton"], answer:[0,1,2]},
        { id:'q3', type:'QCM', question:"Quelles fonctions remplissaient les obÃ©lisques Ã©gyptiens ?", options:["Symboles solaires (pierre de Benben)","Point de repÃ¨re pour les processions","Monuments commÃ©moratifs","Tombes royales"], answer:[0,1,2]},
        { id:'q4', type:'QCM', question:"Quels Ã©lÃ©ments sont essentiels pour comprendre la structure d'une pyramide de l'Ancien Empire ?", options:["Chambres funÃ©raires souterraines","Corridors et galeries complexes","RevÃªtement de calcaire blanc","Briques crues"], answer:[0,1,2]},
        { id:'q5', type:'QCM', question:"Quels sont les principaux matÃ©riaux de construction Ã©gyptiens ?", options:["Calcaire et grÃ¨s","Briques crues (pisÃ©)","Granite et diorite","Bois importÃ©"], answer:[0,1,2]},
        { id:'q6', type:'QCM', question:"Quels sont les rÃ´les des pylÃ´nes Ã  l'entrÃ©e des temples ?", options:["Portes monumentales","Symboles de l'horizon","Propagande royale (bas-reliefs)","Lieux de stockage"], answer:[0,1,2]},
        { id:'q7', type:'QCM', question:"Quels types de colonnes trouve-t-on dans l'architecture Ã©gyptienne ?", options:["Papyrus fermÃ© (lotus)","Faisceau de lotus","Fleur de palmier","VoÃ»tes Ã  nervures"], answer:[0,1,2]},
        { id:'q8', type:'QCM', question:"Quelles sont les caractÃ©ristiques des hypogÃ©es (tombes creusÃ©es dans la roche) ?", options:["DÃ©corations murales peintes","Chambres funÃ©raires multiples","Absence de superstructure visible","Grandes terrasses extÃ©rieures"], answer:[0,1,2]},
        { id:'q9', type:'QCM', question:"Quelles innovations ont marquÃ© le passage des mastabas aux pyramides Ã  degrÃ©s ?", options:["Utilisation de la pierre de taille","Superposition de mastabas","CrÃ©ation d'une structure interne en gradins","Construction en bois"], answer:[0,1,2]},
        { id:'q10', type:'QCM', question:"Quels sont les Ã©lÃ©ments d'un temple funÃ©raire royal ?", options:["Temple bas (temple de la vallÃ©e)","ChaussÃ©e d'accÃ¨s","Temples hauts (prÃ¨s de la pyramide)","Ziggurat"], answer:[0,1,2]},
        { id:'q11', type:'QCM', question:"Quelles fonctions sont associÃ©es aux palais Ã©gyptiens ?", options:["RÃ©sidence du pharaon et de sa famille","Centre administratif de l'empire","SiÃ¨ge du pouvoir religieux","Habitat privÃ© du peuple"], answer:[0,1]},
        { id:'q12', type:'QCM', question:"Quelles caractÃ©ristiques dÃ©finissent les temples d'Ã©poque grÃ©co-romaine en Ã‰gypte ?", options:["PylÃ´nes et colonnes typiquement Ã©gyptiens","Syncretisme religieux (dÃ©itÃ©s grecques/Ã©gyptiennes)","Construction en brique crue","Colonnes corinthiennes grecques"], answer:[0,1,3]},
        { id:'q13', type:'QCM', question:"Quels rÃ´les jouait le Nil dans l'urbanisme et l'architecture Ã©gyptienne ?", options:["Voie de transport","Source d'eau pour l'agriculture","Limite sacrÃ©e entre la vie et la mort","Espace de jeux nautiques"], answer:[0,1,2]},
        { id:'q14', type:'QCM', question:"Quelles innovations de SnÃ©frou ont menÃ© Ã  la pyramide Ã  face lisse ?", options:["Pyramide rhomboÃ¯dale (courbÃ©e)","Pyramide rouge (faÃ§ade lisse)","Augmentation de l'inclinaison","RÃ©duction de l'inclinaison"], answer:[0,1,3]},
        { id:'q15', type:'QCM', question:"Quelles sont les principales diffÃ©rences entre les pyramides de Gizeh ?", options:["Dimensions des pyramides","ComplexitÃ© des corridors internes","PrÃ©sence de pyramides satellites","Usage de briques crues"], answer:[0,1,2]},
        { id:'q16', type:'QCM', question:"Quels Ã©lÃ©ments composaient un mastaba ?", options:["Superstructure en brique/pierre","Chambre funÃ©raire souterraine","Chapelle d'offrandes","PylÃ´nes monumentaux"], answer:[0,1,2]},
        { id:'q17', type:'QCM', question:"Quelles techniques de construction ont Ã©tÃ© utilisÃ©es pour les temples monumentaux ?", options:["Rampes de terre","Chevilles de bois pour le transport","VoÃ»tes nervurÃ©es","Extraction de la pierre par coin de bois"], answer:[0,1,3]},
        { id:'q18', type:'QCM', question:"Quels sont les rÃ´les des hypostyles dans les temples ?", options:["Salles de priÃ¨re collectives","Salles de procession","Lieux de stockage","Lieux sacrÃ©s rÃ©servÃ©s aux prÃªtres"], answer:[0,1,3]},
        { id:'q19', type:'QCM', question:"Quelles informations les inscriptions hiÃ©roglyphiques nous donnent-elles sur l'architecture ?", options:["RÃ¨gles de proportion et mesure","Noms des architectes et ouvriers","RÃ©cits mythologiques et rituels","Dessins techniques des plans"], answer:[0,1,2,3]},
        { id:'q20', type:'QCM', question:"Quelles sont les particularitÃ©s des temples solaires de RÃª ?", options:["Alignement avec les mouvements du soleil","Autel Ã  ciel ouvert","ObÃ©lisque central","HypogÃ©e"], answer:[0,1,2]},
        { id:'q21', type:'QCM', question:"Quels sont les rÃ´les des obÃ©lisques ?", options:["Symboles du culte solaire","Marqueurs de l'entrÃ©e des temples","Monuments commÃ©moratifs","Murs de fortification"], answer:[0,1,2]},
        { id:'q22', type:'QCM', question:"Quels Ã©lÃ©ments architecturaux reflÃ¨tent la cosmogonie Ã©gyptienne dans les temples ?", options:["Le plafond comme le ciel Ã©toilÃ©","Les colonnes comme des plantes (papyrus, lotus)","Le sol inclinÃ© reprÃ©sentant le mont primordial","Les murs Ã©pais"], answer:[0,1,2]},
        { id:'q23', type:'QCM', question:"Quelles sont les caractÃ©ristiques des villes Ã©gyptiennes ?", options:["Planification en grille (ville ouvriÃ¨re)","Utilisation de la brique crue","Rues sinueuses","RÃ©seau d'assainissement moderne"], answer:[0,1]},
        { id:'q24', type:'QCM', question:"Quelles sont les diffÃ©rentes parties d'un temple Ã©gyptien ?", options:["PylÃ´ne","Cour Ã  ciel ouvert","Salle hypostyle","Sanctuaire"], answer:[0,1,2,3]},
        { id:'q25', type:'QCM', question:"Quelles techniques utilisaient-ils pour dÃ©placer et assembler les blocs de pierre ?", options:["Rampes","TraÃ®neaux et leviers","Cordes et rondins de bois","Chariots Ã  roues"], answer:[0,1,2]},
        { id:'q26', type:'QCM', question:"Quelles sont les caractÃ©ristiques de l'architecture domestique Ã©gyptienne ?", options:["Construction en brique crue","Toits-terrasses","Cours intÃ©rieures pour la ventilation","Multiples Ã©tages"], answer:[0,1,2]},
        { id:'q27', type:'QCM', question:"Quelles innovations architecturales sont associÃ©es Ã  Djoser ?", options:["Pyramide Ã  degrÃ©s","Utilisation de la pierre de taille","Complexe funÃ©raire monumental","HypogÃ©e"], answer:[0,1,2]},
        { id:'q28', type:'QCM', question:"Quels Ã©lÃ©ments sont essentiels dans le complexe funÃ©raire de KhÃ©ops ?", options:["La Grande Pyramide","Le temple de la vallÃ©e","Trois pyramides satellites","Le complexe funÃ©raire de Toutankhamon"], answer:[0,1,2]},
        { id:'q29', type:'QCM', question:"Quelles sont les fonctions de la "fausse porte" dans les tombes ?", options:["Passage symbolique pour le Ka (Ã¢me)","Point de repÃ¨re pour les offrandes","ReprÃ©sentation du dÃ©funt","AccÃ¨s secret Ã  la chambre funÃ©raire"], answer:[0,1,2]},
        { id:'q30', type:'QCM', question:"Quels sont les types de temples Ã©gyptiens ?", options:["Temples funÃ©raires","Temples de culte divin","Temples solaires","Palais royaux"], answer:[0,1,2]},
        { id:'q31', type:'QCM', question:"Quelles sources nous informent sur les mÃ©thodes de construction ?", options:["Reliefs muraux montrant les ouvriers","Papyrus de construction","Outils retrouvÃ©s","Tablettes cunÃ©iformes"], answer:[0,1,2]},
        { id:'q32', type:'QCM', question:"Quelles sont les particularitÃ©s des temples rupestres (comme Abou Simbel) ?", options:["CreusÃ©s dans la roche","FaÃ§ade monumentale sculptÃ©e","Statues colossales","Toits en bois"], answer:[0,1,2]},
        { id:'q33', type:'QCM', question:"Quels sont les rÃ´les des statues colossales devant les temples ?", options:["ReprÃ©sentation du pharaon","Affirmation du pouvoir royal et divin","Protection symbolique","Tombes secrÃ¨tes"], answer:[0,1]},
        { id:'q34', type:'QCM', question:"Quelles sont les principales diffÃ©rences architecturales entre l'Ancien et le Nouvel Empire ?", options:["Ancien Empire: Pyramides / Nouvel Empire: Temples de culte divin","Ancien Empire: Temples funÃ©raires / Nouvel Empire: Temples rupestres","Ancien Empire: Brique crue / Nouvel Empire: Brique cuite"], answer:[0,1]},
        { id:'q35', type:'QCM', question:"Quelles sont les caractÃ©ristiques des mastabas ?", options:["Structure trapÃ©zoÃ¯dale","Chambre funÃ©raire souterraine","Puits d'accÃ¨s scellÃ©","PylÃ´nes"], answer:[0,1,2]},
        { id:'q36', type:'QCM', question:"Qu'est-ce qui caractÃ©rise l'architecture de la pÃ©riode d'Amarna (AkhÃ©naton) ?", options:["Temples Ã  ciel ouvert dÃ©diÃ©s Ã  Aton","Utilisation du talatat (blocs de pierre standardisÃ©s)","Style artistique rÃ©aliste et fluide","Pyramides"], answer:[0,1,2]},
        { id:'q37', type:'QCM', question:"Quelles sont les fonctions des statues cultuelles dans les temples ?", options:["ReprÃ©sentation vivante de la divinitÃ©","Objet de rituels quotidiens","Lieu d'offrandes","Ã‰lÃ©ment dÃ©coratif"], answer:[0,1,2]},
        { id:'q38', type:'QCM', question:"Quels Ã©lÃ©ments architecturaux servent de transition entre la cour et l'hypostyle ?", options:["Le portique","Les pylÃ´nes","La chaussÃ©e","La fausse porte"], answer:[0,1]},
        { id:'q39', type:'QCM', question:"Quels rÃ´les jouait l'alignement astronomique des temples ?", options:["CÃ©lÃ©bration des solstices et Ã©quinoxes","Marqueurs du cycle agricole","Organisation du calendrier religieux","Guide pour les marins"], answer:[0,1,2]},
        { id:'q40', type:'QCM', question:"Quels sont les matÃ©riaux utilisÃ©s pour le revÃªtement extÃ©rieur des pyramides ?", options:["Calcaire de Tourah","Granite rose d'Assouan","Brique cuite","Basalte"], answer:[0,1]},

        /* ----- QCS 41..70 (choix simple) ----- */
        { id:'q41', type:'QCS', question:"La premiÃ¨re pyramide Ã  degrÃ©s a Ã©tÃ© construite pour quel pharaon ?", options:["KhÃ©ops","ToutÃ¢nkhamon","Djoser","SnÃ©frou"], answer:[2]},
        { id:'q42', type:'QCS', question:"Quel est le matÃ©riau principal de construction des temples monumentaux ?", options:["Brique crue","Granite","Pierre (calcaire, grÃ¨s)","Marbre"], answer:[2]},
        { id:'q43', type:'QCS', question:"Quel Ã©lÃ©ment architectural servait de porte monumentale Ã  l'entrÃ©e des temples ?", options:["L'obÃ©lisque","Le pylÃ´ne","Le mastaba","La pyramide"], answer:[1]},
        { id:'q44', type:'QCS', question:"Quelle pyramide est aussi appelÃ©e 'Pyramide rouge' ?", options:["La Grande Pyramide de Gizeh","La pyramide de Djoser","La pyramide de MeÃ¯doum","La pyramide de SnÃ©frou Ã  Dahchour"], answer:[3]},
        { id:'q45', type:'QCS', question:"Les tombes royales de la VallÃ©e des Rois sont de quel type ?", options:["Pyramides","Mastabas","HypogÃ©es","Ziggurats"], answer:[2]},
        { id:'q46', type:'QCS', question:"Quelle partie d'un temple Ã©gyptien est un espace couvert de colonnes serrÃ©es ?", options:["La cour Ã  ciel ouvert","Le sanctuaire","La salle hypostyle","Le pylÃ´ne"], answer:[2]},
        { id:'q47', type:'QCS', question:"Le terme 'mastaba' signifie en arabe :", options:["Maison du Ka","Tombe du pharaon","Banc","Temple funÃ©raire"], answer:[2]},
        { id:'q48', type:'QCS', question:"Quel est le dieu principal associÃ© au grand temple de Karnak ?", options:["Osiris","RÃ¢","Amon-RÃª","Horus"], answer:[2]},
        { id:'q49', type:'QCS', question:"La 'fausse porte' dans une tombe Ã©gyptienne est le lieu oÃ¹ :", options:["Le pharaon est enterrÃ©","Les offrandes sont dÃ©posÃ©es","Le Ka (Ã¢me) du dÃ©funt peut passer","La momie est prÃ©parÃ©e"], answer:[2]},
        { id:'q50', type:'QCS', question:"Quel pharaon a construit le cÃ©lÃ¨bre temple d'Abou Simbel ?", options:["ToutÃ¢nkhamon","Akhenaton","RamsÃ¨s II","Hatchepsout"], answer:[2]},
        { id:'q51', type:'QCS', question:"L'obÃ©lisque symbolise principalement :", options:["La puissance militaire","Le culte solaire","La fertilitÃ© du Nil","La justice divine"], answer:[1]},
        { id:'q52', type:'QCS', question:"Le temple de Louxor est reliÃ© au temple de Karnak par :", options:["Un canal","Une avenue de sphinx","Un pont","Un mur d'enceinte"], answer:[1]},
        { id:'q53', type:'QCS', question:"Les pyramides sont des constructions de l'Ã©poque :", options:["Moyen Empire","Nouvel Empire","Ancien Empire","PtolÃ©maÃ¯que"], answer:[2]},
        { id:'q54', type:'QCS', question:"Les briques crues Ã©taient le matÃ©riau de base pour :", options:["Les temples monumentaux","Les pyramides","Les palais et maisons privÃ©es","Les obÃ©lisques"], answer:[2]},
        { id:'q55', type:'QCS', question:"Le plan des temples Ã©gyptiens est gÃ©nÃ©ralement :", options:["Circulaire","Orthogonal","Axial et symÃ©trique","Radial"], answer:[2]},
        { id:'q56', type:'QCS', question:"Quelle pyramide a une inclinaison qui change Ã  mi-hauteur ?", options:["Pyramide de KhÃ©ops","Pyramide de Djoser","Pyramide rhomboÃ¯dale de SnÃ©frou","Pyramide rouge"], answer:[2]},
        { id:'q57', type:'QCS', question:"Les temples de culte divin servaient Ã  :", options:["Accueillir toute la population","Abriter la statue de la divinitÃ©","Enterrer le pharaon","PrÃ©parer la momification"], answer:[1]},
        { id:'q58', type:'QCS', question:"Quelle partie du temple Ã©gyptien Ã©tait la plus sacrÃ©e et la plus reculÃ©e ?", options:["Le pylÃ´ne","La cour Ã  ciel ouvert","Le sanctuaire","La salle hypostyle"], answer:[2]},
        { id:'q59', type:'QCS', question:"L'architecture Ã©gyptienne est principalement caractÃ©risÃ©e par son :", options:["Sens du gigantisme et de la massivitÃ©","Usage du bÃ©ton","Absence de symbologie religieuse","Plans alÃ©atoires"], answer:[0]},
        { id:'q60', type:'QCS', question:"Les murs Ã©pais des temples servaient principalement Ã  :", options:["Se dÃ©fendre des attaques","Supporter le poids de la structure","Isoler du froid","CrÃ©er des espaces sombres pour les rituels"], answer:[1]},

        /* ----- VF 61..90 (Vrai/Faux) ----- */
        { id:'q61', type:'VF', question:"Les pyramides Ã©taient des tombes pour les pharaons.", options:["Vrai","Faux"], answer:[0]},
        { id:'q62', type:'VF', question:"Le plan des villes Ã©gyptiennes Ã©tait souvent organique et non planifiÃ©.", options:["Vrai","Faux"], answer:[1]},
        { id:'q63', type:'VF', question:"Le Nil n'avait aucun impact sur l'orientation des constructions.", options:["Vrai","Faux"], answer:[1]},
        { id:'q64', type:'VF', question:"Le sanctuaire d'un temple Ã©tait ouvert au public.", options:["Vrai","Faux"], answer:[1]},
        { id:'q65', type:'VF', question:"Les mastabas sont des ancÃªtres des pyramides.", options:["Vrai","Faux"], answer:[0]},
        { id:'q66', type:'VF', question:"Les Ã‰gyptiens utilisaient des voÃ»tes en plein cintre comme les Romains.", options:["Vrai","Faux"], answer:[1]},
        { id:'q67', type:'VF', question:"La Grande Pyramide de Gizeh a une orientation parfaite par rapport aux points cardinaux.", options:["Vrai","Faux"], answer:[0]},
        { id:'q68', type:'VF', question:"Les temples rupestres sont des temples creusÃ©s dans la roche.", options:["Vrai","Faux"], answer:[0]},
        { id:'q69', type:'VF', question:"Les maisons Ã©gyptiennes Ã©taient construites en pierre.", options:["Vrai","Faux"], answer:[1]},
        { id:'q70', type:'VF', question:"Les colonnes en forme de papyrus et de lotus avaient une signification symbolique.", options:["Vrai","Faux"], answer:[0]},
        { id:'q71', type:'VF', question:"Le talatat est un petit bloc de pierre standardisÃ© utilisÃ© Ã  l'Ã©poque d'AkhÃ©naton.", options:["Vrai","Faux"], answer:[0]},
        { id:'q72', type:'VF', question:"La VallÃ©e des Rois abrite des pyramides royales.", options:["Vrai","Faux"], answer:[1]},
        { id:'q73', type:'VF', question:"L'hypostyle est la partie la plus Ã©clairÃ©e d'un temple.", options:["Vrai","Faux"], answer:[1]},
        { id:'q74', type:'VF', question:"Les Ã©gyptiens utilisaient des mortiers de boue pour leurs constructions en pierre.", options:["Vrai","Faux"], answer:[0]},
        { id:'q75', type:'VF', question:"L'architecture Ã©gyptienne est majoritairement une architecture de bois.", options:["Vrai","Faux"], answer:[1]},
        { id:'q76', type:'VF', question:"L'obÃ©lisque est une statue colossale reprÃ©sentant le pharaon.", options:["Vrai","Faux"], answer:[1]},
        { id:'q77', type:'VF', question:"Les temples funÃ©raires Ã©taient construits pour le culte du pharaon dÃ©cÃ©dÃ©.", options:["Vrai","Faux"], answer:[0]},
        { id:'q78', type:'VF', question:"Les murs des temples Ã©taient souvent dÃ©corÃ©s de bas-reliefs et de peintures.", options:["Vrai","Faux"], answer:[0]},
        { id:'q79', type:'VF', question:"L'architecture Ã©gyptienne est caractÃ©risÃ©e par son usage intensif de l'arc en plein cintre.", options:["Vrai","Faux"], answer:[1]},
        { id:'q80', type:'VF', question:"Les statues colossales devant les temples reprÃ©sentaient souvent le dieu principal du temple.", options:["Vrai","Faux"], answer:[1]},

        /* ----- QCM 81..90 (mix hard extra) ----- */
        { id:'q81', type:'QCM', question:"Quelles sont les caractÃ©ristiques de l'urbanisme de Deir el-MÃ©dineh ?", options:["Plan en grille et rues rectilignes","Maisons uniformes pour les ouvriers","Absence de murs d'enceinte","Tombes royales"], answer:[0,1]},
        { id:'q82', type:'QCM', question:"Quels sont les rÃ´les des rampes de construction ?", options:["Monter les blocs de pierre","Compenser la hauteur de la pyramide","Faciliter le travail des esclaves","Permettre aux architectes de travailler"], answer:[0,1]},
        { id:'q83', type:'QCM', question:"Quels sont les rÃ´les des hiÃ©roglyphes sur les murs des temples ?", options:["Texte rituel et mythologique","Noms des dieux et des pharaons","Instructions pour la construction","DÃ©coration pure"], answer:[0,1]},
        { id:'q84', type:'QCM', question:"Quels sont les types de toits utilisÃ©s en Ã‰gypte ancienne ?", options:["Toits plats en bois et terre","VoÃ»tes en brique crue","Toits en pente pour Ã©vacuer la pluie","DÃ´mes en pierre"], answer:[0,1]},
        { id:'q85', type:'QCM', question:"Quelles sont les innovations de l'Ã©poque d'Akhenaton ?", options:["Culte monothÃ©iste d'Aton","Construction de la ville d'Akhetaton","RÃ©formes architecturales","Utilisation de la brique crue"], answer:[0,1,2]},
        { id:'q86', type:'QCM', question:"Quels sont les rÃ´les du temple de la vallÃ©e ?", options:["Lieu de momification","Point d'arrivÃ©e de la chaussÃ©e","Espace pour les rituels funÃ©raires","Lieu de stockage des biens du pharaon"], answer:[0,1,2]},
        { id:'q87', type:'QCM', question:"Qu'est-ce qui caractÃ©rise l'architecture de MÃ©roÃ© (en Nubie) ?", options:["Pyramides plus petites et raides","Influence Ã©gyptienne et africaine","Plans de temples diffÃ©rents de l'Ã‰gypte","Utilisation du bÃ©ton"], answer:[0,1]},
        { id:'q88', type:'QCM', question:"Quelles sont les caractÃ©ristiques des temples ptolÃ©maÃ¯ques ?", options:["PylÃ´nes massifs","MÃ©lange de styles Ã©gyptien et grec","Absence de hiÃ©roglyphes","Couronnes composites de colonnes"], answer:[0,1,3]},
        { id:'q89', type:'QCM', question:"Quelles sont les principales diffÃ©rences entre les tombes de l'Ancien Empire et du Nouvel Empire ?", options:["Ancien Empire: Pyramides apparentes / Nouvel Empire: HypogÃ©es cachÃ©es","Ancien Empire: dÃ©coration minimaliste / Nouvel Empire: dÃ©coration riche","Ancien Empire: Brique crue / Nouvel Empire: Brique cuite"], answer:[0,1]},
        { id:'q90', type:'QCM', question:"Quels sont les rÃ´les des colonnes Ã©gyptiennes ?", options:["Support structurel","Fonction dÃ©corative et symbolique","CrÃ©er des allÃ©es de procession","Lieu d'exposition d'Å“uvres d'art"], answer:[0,1,2]},

        /* ----- QCS 91..100 (mix hard extra) ----- */
        { id:'q91', type:'QCS', question:"Le mastaba est une structure funÃ©raire de l'Ancien Empire qui se traduit par :", options:["Tombe","Palais","Banc","Temple"], answer:[2]},
        { id:'q92', type:'QCS', question:"La chambre funÃ©raire d'une pyramide Ã©tait gÃ©nÃ©ralement situÃ©e :", options:["Ã€ son sommet","Au centre de la base","Au milieu de la pyramide","Sous le niveau du sol"], answer:[3]},
        { id:'q93', type:'QCS', question:"Le temple d'Hatchepsout est un exemple de quel type de temple ?", options:["Temple rupestre","Temple solaire","Temple funÃ©raire Ã  terrasses","Temple de culte divin"], answer:[2]},
        { id:'q94', type:'QCS', question:"Le principal matÃ©riau utilisÃ© pour les habitations Ã©tait :", options:["Pierre de taille","Brique crue","Bois","Marbre"], answer:[1]},
        { id:'q95', type:'QCS', question:"Les hiÃ©roglyphes sur les murs des temples Ã©taient :", options:["Purement dÃ©coratifs","Des cartes gÃ©ographiques","Des textes rituels et mythologiques","Des poÃ¨mes d'amour"], answer:[2]},
        { id:'q96', type:'QCS', question:"Le sanctuaire est le lieu le plus important du temple car il abrite :", options:["Le pharaon","Les prÃªtres","Le Ka du dÃ©funt","La statue de la divinitÃ©"], answer:[3]},
        { id:'q97', type:'QCS', question:"Les hypogÃ©es sont des tombes creusÃ©es dans :", options:["Le sol","Le bois","La roche","L'argile"], answer:[2]},
        { id:'q98', type:'QCS', question:"Les deux parties principales du complexe de la pyramide sont le temple funÃ©raire et :", options:["La Grande Sphinx","La chambre de la reine","La chaussÃ©e","Le temple de la vallÃ©e"], answer:[3]},
        { id:'q99', type:'QCS', question:"Le temple de Louxor est dÃ©diÃ© Ã  :", options:["Osiris","Isis","Amon-RÃª","Horus"], answer:[2]},
        { id:'q100', type:'QCS', question:"Le principe de l'axe et de la symÃ©trie est caractÃ©ristique de l'architecture :", options:["MÃ©sopotamienne","Romaine","Ã‰gyptienne","Grecque"], answer:[2]},
    ];

    /* Quiz State Management */
    let answeredQuestions = new Set();

    /* Helper Functions */
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function startTimer() {
        if (timer) clearInterval(timer);
        timer = setInterval(() => {
            timeLeft--;
            const minutes = String(Math.floor(timeLeft / 60)).padStart(2, '0');
            const seconds = String(timeLeft % 60).padStart(2, '0');
            timerDisplay.textContent = `${minutes}:${seconds}`;
            if (timeLeft <= 0) {
                endQuiz();
            }
        }, 1000);
    }

    function stopTimer() {
        if (timer) clearInterval(timer);
    }

    function createOptions(question) {
        optionsContainer.innerHTML = '';
        const inputType = question.type === 'QCM' ? 'checkbox' : 'radio';
        question.options.forEach((option, index) => {
            const optionDiv = document.createElement('label');
            optionDiv.className = 'option';
            optionDiv.innerHTML = `
                <input type="${inputType}" name="question${question.id}" value="${index}">
                <span>${option}</span>
            `;
            optionsContainer.appendChild(optionDiv);
        });
    }

    function showQuestion(index) {
        if (index >= 0 && index < currentSet.length) {
            currentIndex = index;
            const question = currentSet[currentIndex];
            questionIndex.textContent = `Question ${currentIndex + 1} / ${currentSet.length}`;
            questionText.textContent = question.question;
            createOptions(question);
            
            const prevAnswer = answers.find(a => a.id === question.id);
            if (prevAnswer) {
                prevAnswer.userAnswer.forEach(ansIndex => {
                    const input = optionsContainer.querySelector(`input[value="${ansIndex}"]`);
                    if (input) input.checked = true;
                });
            }

            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === currentSet.length - 1;
            submitBtn.style.display = 'none';
        }
        if (currentIndex === currentSet.length - 1) {
            submitBtn.style.display = 'block';
        } else {
            submitBtn.style.display = 'none';
        }
    }

    function saveAnswer() {
        const question = currentSet[currentIndex];
        const selectedOptions = Array.from(optionsContainer.querySelectorAll('input:checked')).map(input => parseInt(input.value));
        
        const existingAnswerIndex = answers.findIndex(a => a.id === question.id);
        const isCorrect = (JSON.stringify(selectedOptions.sort()) === JSON.stringify(question.answer.sort()));

        if (existingAnswerIndex > -1) {
            answers[existingAnswerIndex] = { ...question, userAnswer: selectedOptions, isCorrect };
        } else {
            answers.push({ ...question, userAnswer: selectedOptions, isCorrect });
        }
        answeredQuestions.add(question.id);
        updateRemainingQuestions();
    }

    function updateRemainingQuestions() {
        remainingQuestionsLabel.textContent = allQuestions.length - answeredQuestions.size;
    }

    function checkAnswers() {
        stopTimer();
        score = 0;
        wrongQuestions = [];

        answers.forEach(answer => {
            if (answer.isCorrect) {
                score++;
            } else {
                wrongQuestions.push(answer);
            }
        });

        scoreDisplay.textContent = score;
        showResult();
    }

    function showResult() {
        quizModal.querySelector('.quiz-body').style.display = 'none';
        resultArea.style.display = 'block';
        resultSummary.textContent = `Votre score est de ${score} sur ${answers.length}.`;
        
        answersList.innerHTML = '';
        answers.forEach(item => {
            const resultItem = document.createElement('div');
            resultItem.className = 'answer-item';
            const statusIcon = item.isCorrect ? 'âœ…' : 'âŒ';
            const userAnswerText = item.userAnswer.map(i => item.options[i]).join(', ');
            const correctAnswerText = item.answer.map(i => item.options[i]).join(', ');
            resultItem.innerHTML = `
                <b>${statusIcon} ${item.question}</b>
                <p>Votre rÃ©ponse: ${userAnswerText || 'Aucune'}</p>
                <p>Bonne rÃ©ponse: ${correctAnswerText}</p>
            `;
            answersList.appendChild(resultItem);
        });

        retryBtn.style.display = wrongQuestions.length > 0 ? 'block' : 'none';
    }

    function resetQuiz() {
        currentSet = [];
        currentIndex = 0;
        answers = [];
        score = 0;
        timeLeft = 30 * 60;
        wrongQuestions = [];
        retryMode = false;
        answeredQuestions.clear();

        scoreDisplay.textContent = '0';
        timerDisplay.textContent = '30:00';
        resultArea.style.display = 'none';
        quizModal.querySelector('.quiz-body').style.display = 'grid';
        startBtn.style.display = 'block';
        quizTypeSelect.disabled = false;
        endEarlyBtn.style.display = 'none';
        prevBtn.disabled = true;
        nextBtn.disabled = true;
        submitBtn.style.display = 'none';
        optionsContainer.innerHTML = '';
        questionText.textContent = 'Choisissez un type puis dÃ©marrez.';
        questionIndex.textContent = 'Question â€” / â€”';
        remainingQuestionsLabel.textContent = '100';
    }

    function startNewQuiz(questions) {
        currentSet = questions;
        shuffleArray(currentSet);
        totalQuestionsLabel.textContent = currentSet.length;
        remainingQuestionsLabel.textContent = currentSet.length;
        currentIndex = 0;
        answers = [];
        score = 0;
        timeLeft = 30 * 60;
        retryMode = false;
        answeredQuestions.clear();

        quizModal.querySelector('.quiz-body').style.display = 'grid';
        resultArea.style.display = 'none';
        startBtn.style.display = 'none';
        endEarlyBtn.style.display = 'inline-block';
        quizTypeSelect.disabled = true;
        
        showQuestion(currentIndex);
        startTimer();
    }

    function startRetryQuiz() {
        if (wrongQuestions.length === 0) return;
        
        currentSet = wrongQuestions;
        shuffleArray(currentSet);
        totalQuestionsLabel.textContent = currentSet.length;
        remainingQuestionsLabel.textContent = currentSet.length;
        currentIndex = 0;
        answers = [];
        score = 0;
        timeLeft = 30 * 60;
        retryMode = true;
        answeredQuestions.clear();

        quizModal.querySelector('.quiz-body').style.display = 'grid';
        resultArea.style.display = 'none';
        startBtn.style.display = 'none';
        endEarlyBtn.style.display = 'inline-block';
        quizTypeSelect.disabled = true;

        showQuestion(currentIndex);
        startTimer();
    }

    /* Event Listeners */
    openQuizBtn.addEventListener('click', () => {
        resetQuiz();
        quizModal.style.display = 'flex';
        quizModal.setAttribute('aria-hidden', 'false');
    });

    closeQuizBtn.addEventListener('click', () => {
        stopTimer();
        quizModal.style.display = 'none';
        quizModal.setAttribute('aria-hidden', 'true');
    });

    closeResultBtn.addEventListener('click', () => {
        quizModal.style.display = 'none';
        quizModal.setAttribute('aria-hidden', 'true');
    });

    startBtn.addEventListener('click', () => {
        const selectedType = quizTypeSelect.value;
        const questionsOfType = allQuestions.filter(q => q.type === selectedType);
        selectedTypeLabel.textContent = selectedType;
        startNewQuiz(questionsOfType);
    });

    endEarlyBtn.addEventListener('click', () => {
        saveAnswer();
        checkAnswers();
    });

    prevBtn.addEventListener('click', () => {
        saveAnswer();
        showQuestion(currentIndex - 1);
    });

    nextBtn.addEventListener('click', () => {
        saveAnswer();
        showQuestion(currentIndex + 1);
    });

    submitBtn.addEventListener('click', () => {
        saveAnswer();
        checkAnswers();
    });

    retryBtn.addEventListener('click', () => {
        startRetryQuiz();
    });

    document.addEventListener('keydown', (e) => {
        if (quizModal.style.display === 'flex') {
            if (e.key === 'ArrowRight' && !nextBtn.disabled) {
                nextBtn.click();
            } else if (e.key === 'ArrowLeft' && !prevBtn.disabled) {
                prevBtn.click();
            }
        }
    });

    // Initial state setup on load
    resetQuiz();
</script>

</body>
</html>
