<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz ‚Äî Architecture √©gyptienne (100 questions)</title>
  <meta name="description" content="Quiz complet sur l'architecture √©gyptienne : techniques de construction, colonnes, mesures et vocabulaire (45 QCM, 35 QCS, 20 V/F)." />
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#ffffff; --muted:#64748b; --accent:#06b6d4; --card:#ffffff; --shadow: rgba(2,6,23,0.12);
      --sidebar-width: 260px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:'Rubik',sans-serif; background:var(--bg); color:#0f172a;
      display:flex; min-height:100vh; overflow-y:auto;
    }

    /* Sidebar (push content ‚Äî does not overlay) */
    aside{
      width:var(--sidebar-width);
      background:#f4f4f4;
      height:100vh;
      padding:20px;
      box-shadow:2px 0 8px var(--shadow);
      position:fixed;
      left:0; top:0;
      transition:transform .28s ease, width .28s ease;
      z-index:998;
      overflow-y:auto;
    }
    aside.hidden{ transform:translateX(-280px); }
    main{ flex:1; padding:28px; margin-left:var(--sidebar-width); transition:margin-left .28s ease; }
    aside.hidden ~ main{ margin-left:0; }

    /* Controls */
    #toggleSidebar{
      position:fixed; top:18px; left:18px; z-index:1100;
      background:#111; color:#fff; border:0; padding:10px 14px; border-radius:8px; cursor:pointer;
    }

    .back-button{ display:block; width:100%; text-align:center; margin-bottom:12px; padding:10px 12px; background:#ddd; border-radius:8px; text-decoration:none; color:#111; font-weight:600; }
    .sidebar-header h2{ margin:0 0 12px 0; font-size:18px; }
    .sidebar-menu{ padding:0; margin:0; list-style:none; }
    .sidebar-menu li a{ display:block; padding:10px; text-decoration:none; color:#333; border-radius:8px; margin-bottom:8px; }
    .sidebar-menu li a:hover{ background:#e9e9e9; }

    /* Content */
    .section-title{ font-size:26px; margin-bottom:18px; color:#000; }
    .lesson{ margin-bottom:18px; background:linear-gradient(180deg,#fbfbfb,#fff); padding:18px; border-radius:10px; box-shadow:0 10px 28px rgba(2,6,23,0.04); border:1px solid rgba(15,23,42,0.04); }
    .lesson h3{ display:flex; justify-content:space-between; align-items:center; margin:0 0 8px 0; font-size:18px; }
    .buttons{ display:flex; gap:10px; align-items:center; }
    .buttons button, .buttons a button{ background:none; border:1px solid #e6e6e6; padding:8px 12px; border-radius:8px; cursor:pointer; font-size:15px; }
    footer{ margin-top:36px; color:#888; font-size:13px; text-align:center; }

    /* Modal quiz */
    .quiz-modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:2000; background:rgba(2,6,23,0.56); padding:18px; }
    .quiz-card{ width:100%; max-width:1100px; background:var(--card); border-radius:12px; overflow:hidden; box-shadow:0 28px 80px rgba(2,6,23,0.45); display:flex; flex-direction:column; }
    .quiz-header{ padding:16px 20px; background:linear-gradient(90deg,var(--accent),#0aa8bf); color:#fff; display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .quiz-controls{ display:flex; gap:10px; align-items:center; }
    .quiz-body{ display:grid; grid-template-columns:1fr 360px; gap:18px; padding:18px; }
    .question-area{ background:#fbfdff; padding:16px; border-radius:10px; min-height:320px; }
    .question-index{ font-size:13px; color:var(--muted); margin-bottom:8px; }
    .question-text{ font-size:18px; color:#0f172a; margin-bottom:12px; min-height:58px; }
    .options{ display:flex; flex-direction:column; gap:10px; }
    .option{ background:#fff; border:1px solid #e6eef2; padding:12px 14px; border-radius:10px; display:flex; align-items:center; gap:12px; cursor:pointer; }
    .option input{ transform:scale(1.12); }
    .sidebar-panel{ background:#fff; padding:14px; border-radius:10px; border:1px solid #eef6f9; height:100%; display:flex; flex-direction:column; }
    .timer{ font-weight:800; font-size:20px; color:#0f172a; }
    .meta{ margin-top:10px; color:var(--muted); font-size:14px; }
    .nav-buttons{ margin-top:12px; display:flex; gap:10px; }
    .btn{ padding:10px 14px; border-radius:8px; background:var(--accent); color:#fff; border:0; cursor:pointer; font-weight:700; }
    .btn.secondary{ background:#e6eef2; color:#0f172a; font-weight:700; }
    .close-quiz{ background:transparent; border:0; color:#fff; font-weight:800; cursor:pointer; font-size:18px; }

    .result{ padding:16px; display:none; }
    .answers-list{ margin-top:12px; display:flex; flex-direction:column; gap:10px; max-height:360px; overflow:auto; }
    .answer-item{ background:#fcfcff; border:1px solid #eef2ff; padding:12px; border-radius:8px; }

    @media (max-width:960px){
      .quiz-body{ grid-template-columns:1fr; }
      .sidebar-panel{ order:-1; }
      main{ padding:18px; }
      aside{ transform:translateX(-280px); }
      aside.hidden{ transform:translateX(-280px); }
      aside ~ main{ margin-left:0; }
    }

    /* ensure sidebar doesn't cover content text; content margin-left equals sidebar width */
  </style>
</head>
<body>
  <button id="toggleSidebar" aria-label="Toggle sidebar">‚ò∞</button>

  <aside id="sidebar" aria-label="Navigation sidebar">
    <a class="back-button" href="index.html">üîô Retour</a>
    <div class="sidebar-header">
      <h2>üìö Histoire Architecture</h2>
      <p style="margin:8px 0 0 0; font-size:13px; color:var(--muted)">Quiz: Architecture √©gyptienne</p>
    </div>
    <ul class="sidebar-menu">
      <li><a href="#">üèõÔ∏è Cours 1 ‚Äî Pr√©histoire</a></li>
      <li><a href="#">üè∫ Cours 2 ‚Äî √âgypte ancienne (Quiz ici)</a></li>
      <li><a href="#">üìê Cours 3 ‚Äî Gr√®ce</a></li>
      <li><a href="#">üèõÔ∏è Cours 4 ‚Äî Rome</a></li>
      <hr>
      <li><a href="mailto:archispaceiya@gmail.com">üì© Contact</a></li>
    </ul>
  </aside>

  <main>
    <h1 class="section-title">üèõÔ∏è Quiz ‚Äî Architecture √©gyptienne</h1>

    <div class="lesson">
      <h3>
        <span>Architecture √©gyptienne ‚Äî Cours & Quiz complet (100 questions)</span>
        <span><button id="openQuizBtn" class="btn">üìù Ouvrir/fermer Quiz</button></span>
      </h3>
      <div class="buttons" style="margin-top:8px;">
        <a href="#"><button>üìÑ Cours PDF</button></a>
        <button>üé• Vid√©o</button>
        <button id="premiumButton">‚≠ê Premium</button>
      </div>
      <p style="margin-top:12px; color:var(--muted); font-size:14px;">
        Instructions : choisissez la langue (FR/EN), le type (mixed/QCM/QCS/VF) ou laissez ¬´ Mixed ¬ª pour m√©lange al√©atoire. Chaque bonne r√©ponse = +1, r√©ponse incorrecte = ‚àí1, non r√©pondu = 0. Vous pouvez reprendre les questions erron√©es.
      </p>
    </div>

    <footer>¬© 2025 ArchiSpace ‚Äî Tous droits r√©serv√©s.</footer>
  </main>

  <!-- Quiz modal -->
  <div id="quizModal" class="quiz-modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="quiz-card" id="quizCard">
      <div class="quiz-header">
        <h2 id="quizTitle">Quiz ‚Äî Architecture √©gyptienne</h2>
        <div class="quiz-controls" role="toolbar" aria-label="Quiz controls">
          <label for="langSelect" style="color:rgba(255,255,255,0.95); font-weight:600;">Lang</label>
          <select id="langSelect" style="padding:6px 10px; border-radius:8px; border:0; font-weight:700;">
            <option value="fr">FR</option>
            <option value="en">EN</option>
          </select>

          <label for="modeSelect" style="color:rgba(255,255,255,0.95); font-weight:600; margin-left:8px;">Mode</label>
          <select id="modeSelect" style="padding:6px 10px; border-radius:8px; border:0; font-weight:700;">
            <option value="mixed">Mixed (al√©atoire)</option>
            <option value="QCM">QCM</option>
            <option value="QCS">QCS</option>
            <option value="VF">V/F</option>
          </select>

          <button id="closeQuizBtn" class="close-quiz" aria-label="Close quiz">‚úï</button>
        </div>
      </div>

      <div class="quiz-body" id="quizBody">
        <div class="question-area" id="questionArea">
          <div class="question-index" id="questionIndex">‚Äî</div>
          <div class="question-text" id="questionText">Choisissez "Commencer" pour lancer le quiz.</div>
          <div class="options" id="optionsContainer" role="list"></div>

          <div class="nav-buttons" style="margin-top:14px;">
            <button class="btn secondary" id="prevBtn" disabled>‚óÄ Pr√©c√©dent</button>
            <button class="btn secondary" id="nextBtn" disabled>Suivant ‚ñ∂</button>
            <button class="btn" id="submitBtn" style="display:none;">Soumettre</button>
          </div>
        </div>

        <aside class="sidebar-panel" id="sidebarPanel">
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
              <div class="small">Timer</div>
              <div class="timer" id="timerDisplay">00:00</div>
            </div>
            <div style="text-align:right;">
              <div class="small">Score</div>
              <div id="scoreDisplay" style="font-weight:800; font-size:18px;">0</div>
            </div>
          </div>

          <div class="meta">
            <div>Le√ßon: <b id="lessonLabel">√âgypte</b></div>
            <div style="margin-top:8px;">Type: <b id="typeLabel">‚Äî</b></div>
            <div style="margin-top:8px;">Total Q: <b id="totalLabel">0</b></div>
            <div style="margin-top:6px;">Restantes: <b id="remainingLabel">0</b></div>
            <div style="margin-top:8px;">R√©essayer les mauvaises : <input type="checkbox" id="retryWrong" checked></div>
          </div>

          <div style="margin-top:14px;">
            <button class="btn" id="startBtn">Commencer</button>
            <button class="btn secondary" id="finishBtn" style="margin-left:8px;">Finir maintenant</button>
          </div>

          <div style="margin-top:12px; font-size:13px; color:var(--muted);">
            <p style="margin:0;">Navigation : utilisez les fl√®ches ou les boutons. Les erreurs co√ªtent -1 point.</p>
          </div>
        </aside>
      </div>

      <div class="result" id="resultArea" aria-live="polite">
        <h3>R√©sultats</h3>
        <div id="resultSummary"></div>
        <div class="answers-list" id="answersList"></div>
        <div style="margin-top:12px;">
          <button class="btn" id="retryBtn">Reprendre les questions incorrectes</button>
          <button class="btn secondary" id="closeResultBtn" style="margin-left:10px;">Fermer</button>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- UI references ---------- */
const toggleSidebarBtn = document.getElementById('toggleSidebar');
const sidebar = document.getElementById('sidebar');
const main = document.querySelector('main');

toggleSidebarBtn.addEventListener('click', () => {
  sidebar.classList.toggle('hidden');
  // main margin handled by CSS sibling selector
});

/* ---------- Quiz modal control (open/close same button) ---------- */
const openQuizBtn = document.getElementById('openQuizBtn');
const quizModal = document.getElementById('quizModal');
const closeQuizBtn = document.getElementById('closeQuizBtn');
const startBtn = document.getElementById('startBtn');
const finishBtn = document.getElementById('finishBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const questionIndexEl = document.getElementById('questionIndex');
const questionTextEl = document.getElementById('questionText');
const optionsContainer = document.getElementById('optionsContainer');
const timerDisplay = document.getElementById('timerDisplay');
const scoreDisplay = document.getElementById('scoreDisplay');
const typeLabel = document.getElementById('typeLabel');
const totalLabel = document.getElementById('totalLabel');
const remainingLabel = document.getElementById('remainingLabel');
const lessonLabel = document.getElementById('lessonLabel');
const langSelect = document.getElementById('langSelect');
const modeSelect = document.getElementById('modeSelect');
const resultArea = document.getElementById('resultArea');
const resultSummary = document.getElementById('resultSummary');
const answersList = document.getElementById('answersList');
const retryBtn = document.getElementById('retryBtn');
const closeResultBtn = document.getElementById('closeResultBtn');
const retryWrongCheckbox = document.getElementById('retryWrong');

let quizOpen = false;

/* Toggle open/close with same button */
openQuizBtn.addEventListener('click', () => {
  if (!quizOpen) openQuiz();
  else closeQuiz();
});
closeQuizBtn.addEventListener('click', closeQuiz);
closeResultBtn.addEventListener('click', closeQuiz);

/* Close when clicking outside card */
quizModal.addEventListener('click', (e) => {
  if (e.target === quizModal) closeQuiz();
});

function openQuiz(){
  quizModal.style.display = 'flex';
  quizModal.setAttribute('aria-hidden','false');
  quizOpen = true;
  resetQuizUI();
}
function closeQuiz(){
  quizModal.style.display = 'none';
  quizModal.setAttribute('aria-hidden','true');
  quizOpen = false;
  stopTimer();
  // hide results
  resultArea.style.display = 'none';
}

/* ---------- Quiz state & data ---------- */
let allQuestions = [];      // will hold 100 questions (lesson2)
let currentSet = [];        // filtered/shuffled current set
let currentIndex = 0;
let userAnswers = [];       // user answers per question (array or null)
let score = 0;
let timer = null;
let timeLeft = 0;
let wrongIds = [];
let retryMode = false;

/* ---------- Utility helpers ---------- */
function shuffleArray(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function clone(o){ return JSON.parse(JSON.stringify(o)); }

/* ---------- Build the 100 unique questions (45 QCM, 35 QCS, 20 VF) ----------
   Each question: {id, type:'QCM'|'QCS'|'VF', question_fr, question_en, options_fr[], options_en[], answer: [indices]}
   VF answers: 0 => Vrai/True, 1 => Faux/False
   All IDs unique: E1...E100
*/
allQuestions = [

/* 45 QCM (E1..E45) - multiple correct answers allowed */
{ id:'E1',  type:'QCM',
  question_fr:'Quelles pierres servaient principalement pour les parements ext√©rieurs des pyramides et temples ?',
  question_en:'Which stones were mainly used for external facing of pyramids and temples?',
  options_fr:['Calcaire fin','Granit d‚ÄôAssouan','Basalte','Brique crue'],
  options_en:['Fine limestone','Aswan granite','Basalt','Mudbrick'],
  answer:[0,1,2]
},
{ id:'E2', type:'QCM',
  question_fr:'Quelles m√©thodes √©taient employ√©es pour d√©grossir les blocs en carri√®re ?',
  question_en:'Which methods were used to rough-cut quarry blocks?',
  options_fr:['Percussion √† la dol√©rite','Sciage avec sable','Taille √† la hache','Hydrofracturation'],
  options_en:['Percussion with dolerite','Sawing with sand','Axe cutting','Hydrofracturing'],
  answer:[0,1,2]
},
{ id:'E3', type:'QCM',
  question_fr:'Quels outils en pierre √©taient utilis√©s pour polir la surface des monuments ?',
  question_en:'Which stone tools were used to polish monument surfaces?',
  options_fr:['Diorite','Pumice (pierre ponce)','Silex abrasif','Burins en bronze'],
  options_en:['Diorite','Pumice','Abrasive flint','Bronze chisels'],
  answer:[0,1,2]
},
{ id:'E4', type:'QCM',
  question_fr:'Quels moyens de transport de blocs sont attest√©s ?',
  question_en:'Which means of transporting blocks are attested?',
  options_fr:['Tra√Æneaux sur sable humide','Barges sur le Nil','Charriots √† roues en bois','Transport a√©rien'],
  options_en:['Sledges on wetted sand','Barges on the Nile','Wooden wheeled carts','Air transport'],
  answer:[0,1,2]
},
{ id:'E5', type:'QCM',
  question_fr:'Quelles techniques d‚Äô√©l√©vation ont √©t√© propos√©es par les chercheurs pour construire les pyramides ?',
  question_en:'Which raising techniques have researchers proposed for pyramid construction?',
  options_fr:['Ramps lin√©aires','Ramps h√©lico√Ødales','H√©lioturcs (levage interne)','Mont√©es par √©chafaudages temporaires'],
  options_en:['Straight ramps','Spiral ramps','Internal lift theories','Temporary scaffolding assemblies'],
  answer:[0,1,3]
},
{ id:'E6', type:'QCM',
  question_fr:'Quels √©l√©ments faisaient partie int√©grante d‚Äôun temple √©gyptien ?',
  question_en:'Which elements were integral to an Egyptian temple?',
  options_fr:['Pyl√¥ne','Cour ouverte','Salle hypostyle','Minaret'],
  options_en:['Pylon','Open court','Hypostyle hall','Minaret'],
  answer:[0,1,2]
},
{ id:'E7', type:'QCM',
  question_fr:'Quelles d√©corations architecturales sont fr√©quentes dans les temples ?',
  question_en:'Which architectural decorations are frequent in temples?',
  options_fr:['Hi√©roglyphes en bas-relief','Peintures polychromes','Bandes de cartouches royaux','Fa√ßades en verre'],
  options_en:['Hieroglyphic bas-relief','Polychrome paintings','Royal cartouche bands','Glass facades'],
  answer:[0,1,2]
},
{ id:'E8', type:'QCM',
  question_fr:'Quelles sont des fonctions pratiques des cours de temple ?',
  question_en:'What are practical functions of temple courtyards?',
  options_fr:['Rituel processional','R√©unions publiques','Stockage de grains','√âchanges √©conomiques'],
  options_en:['Processional rituals','Public gatherings','Grain storage','Economic exchanges'],
  answer:[0,1,3]
},
{ id:'E9', type:'QCM',
  question_fr:'Quelles colonnes existent dans l‚Äôarchitecture √©gyptienne ?',
  question_en:'Which columns exist in Egyptian architecture?',
  options_fr:['Papyriforme','Lotiforme','Palmiforme','Ionique'],
  options_en:['Papyriform','Lotiform','Palmiform','Ionic'],
  answer:[0,1,2]
},
{ id:'E10', type:'QCM',
  question_fr:'Quelles chutes de toiture √©taient courantes pour les habitations √©gyptiennes anciennes ?',
  question_en:'Which roof coverings were common for early Egyptian dwellings?',
  options_fr:['Toits plats en roseaux','Dalles de pierre sur poutres','Toits en tuiles','Couvertures en bitume'],
  options_en:['Flat reed roofs','Stone slabs on beams','Tiled roofs','Bitumen coverings'],
  answer:[0,1]
},
{ id:'E11', type:'QCM',
  question_fr:'Quels √©l√©ments structuraient l‚Äôaxe processionnel d‚Äôun complexe ?',
  question_en:'Which elements structured a complex‚Äôs processional axis?',
  options_fr:['All√©e d‚Äôavenue','S√©ries de pyl√¥nes','Salles successives','B√¢timents r√©sidentiels'],
  options_en:['Causeway avenue','Series of pylons','Successive halls','Residential buildings'],
  answer:[0,1,2]
},
{ id:'E12', type:'QCM',
  question_fr:'Quelles techniques assuraient l‚Äô√©tanch√©it√© des chambres fun√©raires ?',
  question_en:'Which techniques ensured burial chamber waterproofing?',
  options_fr:['Acc√®s ferm√© par murs massifs','Remplissage de sable','Rev√™tements en stuc','Bouchage par blocs mobiles'],
  options_en:['Sealed with massive walls','Sand backfilling','Stucco linings','Sealing with movable blocks'],
  answer:[0,1,2]
},
{ id:'E13', type:'QCM',
  question_fr:'Quels motifs v√©g√©taux symboliques √©taient employ√©s ?',
  question_en:'Which vegetal symbolic motifs were used?',
  options_fr:['Lotus','Papyrus','Palmes','Ombellif√®res'],
  options_en:['Lotus','Papyrus','Palms','Umbellifers'],
  answer:[0,1,2]
},
{ id:'E14', type:'QCM',
  question_fr:'Quelles sources d‚Äô√©clairage int√©rieur √©taient utilis√©es ?',
  question_en:'Which interior light sources were used?',
  options_fr:['Petites fen√™tres hautes','Fentes √©troites','Lampes √† huile','Miroirs r√©fl√©chissants'],
  options_en:['High small windows','Narrow slits','Oil lamps','Reflecting mirrors'],
  answer:[0,1,2]
},
{ id:'E15', type:'QCM',
  question_fr:'Quelles mesures de pr√©vention contre l‚Äôeffondrement ?',
  question_en:'Which measures prevented collapse?',
  options_fr:['√âpaisses parois en pierre','Contreforts internes','Colonnes de soutien','Charpentes m√©talliques'],
  options_en:['Thick stone walls','Internal buttressing','Supporting columns','Metal frameworks'],
  answer:[0,1,2]
},
{ id:'E16', type:'QCM',
  question_fr:'Quelles sources d‚Äôapprovisionnement en bois existaient pour la charpente ?',
  question_en:'Which wood supply sources existed for carpentry?',
  options_fr:['Bois import√© du Liban','Bois local ramiers','R√©cup√©ration d‚Äô√©paves','Bois reconstitu√©'],
  options_en:['Imported Lebanese cedar','Local acacias','Salvaged ship timber','Reconstituted wood'],
  answer:[0,1,2]
},
{ id:'E17', type:'QCM',
  question_fr:'Quelles techniques de sculpture monumentale utilisaient le contrepon√ßage ?',
  question_en:'Which monumental sculpting techniques used counter-pounding?',
  options_fr:['Percussion en points successifs','Travail par abrasion','Taille de surface par outils durs','Projection abrasive'],
  options_en:['Percussive point removal','Abrasive working','Hard tool surface cutting','Abrasive blasting'],
  answer:[0,1,2]
},
{ id:'E18', type:'QCM',
  question_fr:'Quelles pratiques de mesure guidaient la proportion des monuments ?',
  question_en:'Which measurement practices guided monument proportions?',
  options_fr:['Utilisation de la coud√©e royale','Grilles modulaires','Proportions bas√©es sur corps humain','Unit√©s m√©triques modernes'],
  options_en:['Royal cubit','Modular grids','Human-based proportions','Modern metric units'],
  answer:[0,1,2]
},
{ id:'E19', type:'QCM',
  question_fr:'Quelles formes de fondations √©taient observ√©es ?',
  question_en:'Which foundation forms were observed?',
  options_fr:['Masses en pierre sur sol compact√©','Radier continu en pierres plates','Fondations en pieux','Plots isol√©s en b√©ton'],
  options_en:['Stone mass on compacted ground','Continuous stone footing','Piled foundations','Isolated concrete pads'],
  answer:[0,1]
},
{ id:'E20', type:'QCM',
  question_fr:'Quelles m√©thodes limitaient l‚Äô√©rosion des fa√ßades ?',
  question_en:'Which methods limited facade erosion?',
  options_fr:['Rev√™tement poli en calcaire','Peinture de protection','Bandes d√©coratives pour masque','Enduits bitumineux'],
  options_en:['Polished limestone facings','Protective paints','Decorative bands to mask wear','Bituminous coatings'],
  answer:[0,1,2]
},
{ id:'E21', type:'QCM',
  question_fr:'Quelles approches √©taient utilis√©es pour aligner astronomiquement les temples ?',
  question_en:'Which approaches were used to astronomically align temples?',
  options_fr:['Observation de l‚Äôhorizon','Alignement sur positions solaires','Utilisation d‚Äô√©toiles fixes','Syst√®mes GPS antiques'],
  options_en:['Horizon observation','Solar alignments','Use of fixed stars','Ancient GPS systems'],
  answer:[0,1,2]
},
{ id:'E22', type:'QCM',
  question_fr:'Quels types de joints structuraux √©taient employ√©s entre blocs ?',
  question_en:'Which structural joint types were used between blocks?',
  options_fr:['Joints secs serr√©s','Broches m√©talliques','Mortier peu √©pais','Joints compressifs en bois'],
  options_en:['Tight dry joints','Metal dowels','Thin mortar','Compressible wooden joints'],
  answer:[0,1,2]
},
{ id:'E23', type:'QCM',
  question_fr:'Quelles pratiques de construction favorisaient la conservation ?',
  question_en:'Which construction practices favored conservation?',
  options_fr:['Utilisation de pierres dures','Orientation pour ombre','Sur√©paisseur de murs','Rev√™tements organiques'],
  options_en:['Use of hard stones','Orientation for shade','Thickened walls','Organic coverings'],
  answer:[0,1,2]
},
{ id:'E24', type:'QCM',
  question_fr:'Quelles fonctions secondaires avaient les temples (√©conomiques/administratives) ?',
  question_en:'Which secondary functions did temples have (economic/administrative)?',
  options_fr:['Stockage de grains','Ateliers d‚Äôartisanat','Archives administratives','Habitation royale'],
  options_en:['Grain storage','Craft workshops','Administrative archives','Royal residence'],
  answer:[0,1,2]
},
{ id:'E25', type:'QCM',
  question_fr:'Quelles techniques de levage pouvaient √™tre combin√©es ?',
  question_en:'Which lifting techniques could be combined?',
  options_fr:['Tra√Æneaux + lubrification','Treuils + rampes','Barges + grue rudimentaire','Ballons gonflables'],
  options_en:['Sledges + lubrication','Winches + ramps','Barges + crude crane','Balloons'],
  answer:[0,1,2]
},
{ id:'E26', type:'QCM',
  question_fr:'Quelles solutions pour la ventilation des pi√®ces profondes ?',
  question_en:'Which solutions for ventilation of deep rooms?',
  options_fr:['Conduits discrets','Fentes √©troites vers l‚Äôext√©rieur','Cour centrale ventil√©e','Ventilateurs m√©caniques'],
  options_en:['Discrete shafts','Narrow external slits','Central ventilated courtyard','Mechanical fans'],
  answer:[0,1,2]
},
{ id:'E27', type:'QCM',
  question_fr:'Quels types d‚Äôoutils m√©talliques sont attest√©s pour finitions ?',
  question_en:'Which metal tools are attested for finishing?',
  options_fr:['Ciseaux en bronze','Limes m√©talliques','Scies en fer (tardif)','Outils de cuivre durci'],
  options_en:['Bronze chisels','Metal files','Iron saws (late)','Hardened copper tools'],
  answer:[0,1,3]
},
{ id:'E28', type:'QCM',
  question_fr:'Quelles pratiques r√©duisaient les effets de tassement diff√©rentiel ?',
  question_en:'Which practices reduced differential settlement effects?',
  options_fr:['Fondations profondes localis√©es','R√©partition uniforme des charges','Compactage par couches','Utilisation de pieux m√©talliques'],
  options_en:['Localized deep footings','Uniform load distribution','Layered compaction','Metal piles'],
  answer:[0,1,2]
},
{ id:'E29', type:'QCM',
  question_fr:'Quelles d√©corations sculpt√©es prot√©geaient symboliquement l‚Äôentr√©e ?',
  question_en:'Which sculpted decorations protected the entrance symbolically?',
  options_fr:['Statues colossales','Sphinx align√©s','St√®les votives','Portails en bois']
  , options_en:['Colossal statues','Aligned sphinxes','Votive stelae','Wooden gates'],
  answer:[0,1,2]
},
{ id:'E30', type:'QCM',
  question_fr:'Quelles strat√©gies limitaient l‚Äôhumidit√© dans les structures souterraines ?',
  question_en:'Which strategies limited moisture in underground structures?',
  options_fr:['Drainage p√©riph√©rique','Remblai imperm√©able','Enduits internes r√©sistants','Pompes m√©caniques']
  , options_en:['Peripheral drainage','Impermeable backfill','Resistant internal coatings','Mechanical pumps'],
  answer:[0,1,2]
},
{ id:'E31', type:'QCM',
  question_fr:'Quelles parties du temple √©taient strictement r√©serv√©es aux pr√™tres ?',
  question_en:'Which temple parts were strictly reserved for priests?',
  options_fr:['Sanctuaire int√©rieur','Chambre du naos','Certaines cours','Toutes les entr√©es publiques']
  , options_en:['Inner sanctuary','Naos chamber','Certain courts','All public entrances'],
  answer:[0,1,2]
},
{ id:'E32', type:'QCM',
  question_fr:'Quels motifs g√©om√©triques fr√©quents sur sols et plafonds ?',
  question_en:'Which geometric motifs are common on floors and ceilings?',
  options_fr:['Quadrillages','Rosaces','Bandes lin√©aires','Fleurons romans']
  , options_en:['Grids','Rosettes','Linear bands','Roman fleurons'],
  answer:[0,1,2]
},
{ id:'E33', type:'QCM',
  question_fr:'Quelles formes d‚Äôenseignes royales marquaient les constructions ?',
  question_en:'Which royal insignia forms marked constructions?',
  options_fr:['Cartouches','Couronnes grav√©es','Titres hi√©rarchiques','Plaques m√©talliques modernes']
  , options_en:['Cartouches','Engraved crowns','Hierarchical titles','Modern metal plates'],
  answer:[0,1,2]
},
{ id:'E34', type:'QCM',
  question_fr:'Quels d√©chets de chantier √©taient recycl√©s ?',
  question_en:'Which construction wastes were recycled?',
  options_fr:['Fragments de pierre','Tiges de roseau','Chaux de d√©blais','Rien n‚Äô√©tait recycl√©']
  , options_en:['Stone fragments','Reed stems','Lime debris','Nothing recycled'],
  answer:[0,1,2]
},
{ id:'E35', type:'QCM',
  question_fr:'Quelles pratiques r√©duisaient l‚Äô√©rosion due au vent et au sable ?',
  question_en:'Which practices reduced wind and sand erosion?',
  options_fr:['Barri√®res naturelles','Orientation des rues','Rev√™tements lisses','Utilisation de verre']
  , options_en:['Natural windbreaks','Street orientation','Smooth facings','Use of glass'],
  answer:[0,1,2]
},
{ id:'E36', type:'QCM',
  question_fr:'Quelles approches sont utilis√©es pour lier les √©l√©ments architecturaux ?',
  question_en:'Which approaches are used to bind architectural elements?',
  options_fr:['Clefs en pierre','Broches en bronze','Mortier √† base d‚Äôargile','Agrafes en acier moderne']
  , options_en:['Stone keys','Bronze dowels','Clay-based mortar','Modern steel clamps'],
  answer:[0,1,2]
},
{ id:'E37', type:'QCM',
  question_fr:'Quelles sources d‚Äôinspiration formelle influen√ßaient les chapiteaux ?',
  question_en:'Which formal inspirations influenced capitals?',
  options_fr:['Plantes locales','Symboles solaires','Formes anthropomorphes','Modes √©trangers contemporains']
  , options_en:['Local plants','Solar symbols','Anthropomorphic forms','Contemporary foreign fashions'],
  answer:[0,1,2]
},
{ id:'E38', type:'QCM',
  question_fr:'Quelles techniques limitaient le bruit et am√©lioraient l‚Äôacoustique ?',
  question_en:'Which techniques reduced noise and improved acoustics?',
  options_fr:['Salles hypostyles profondes','Rev√™tements rugueux','Formes absorbantes','Mat√©riaux synth√©tiques modernes']
  , options_en:['Deep hypostyle halls','Rough linings','Absorbing shapes','Modern synthetic materials'],
  answer:[0,1,2]
},
{ id:'E39', type:'QCM',
  question_fr:'Quelles fonctions utilitaires sont integr√©es aux complexes (logistique) ?',
  question_en:'Which utilitarian functions are integrated in complexes (logistics)?',
  options_fr:['D√©p√¥ts','Ateliers','Bureaux administratifs','H√¥tels modernes']
  , options_en:['Warehouses','Workshops','Administrative offices','Modern hotels'],
  answer:[0,1,2]
},
{ id:'E40', type:'QCM',
  question_fr:'Quelles techniques d‚Äôancrage sont utilis√©es pour statues colossales ?',
  question_en:'Which anchoring techniques are used for colossal statues?',
  options_fr:['Encastrement dans socle','Broches internes','Fonds en pierres massives','Fixations m√©talliques externes']
  , options_en:['Socketing into plinth','Internal dowels','Massive stone bases','External metal fasteners'],
  answer:[0,1,2]
},
{ id:'E41', type:'QCM',
  question_fr:'Quelles m√©thodes mesurables aidaient le contr√¥le qualit√© ?',
  question_en:'Which measurable methods helped quality control?',
  options_fr:['Gabarits de coud√©e','Niveaux √† corde','Mesures √† la main','Instruments lasers']
  , options_en:['Cubit templates','String levels','Hand measures','Laser instruments'],
  answer:[0,1,2]
},
{ id:'E42', type:'QCM',
  question_fr:'Quelles adaptations sont visibles dans les zones inondables ?',
  question_en:'Which adaptations are visible in flood-prone areas?',
  options_fr:['Soubassements sur√©lev√©s','Drainage p√©riph√©rique','Pentes dirig√©es','Sous-sols √©tanches modernes']
  , options_en:['Elevated plinths','Peripheral drainage','Directed slopes','Modern waterproof basements'],
  answer:[0,1,2]
},
{ id:'E43', type:'QCM',
  question_fr:'Quelles interventions r√©centes facilitent la conservation actuelle ?',
  question_en:'Which recent interventions facilitate current conservation?',
  options_fr:['Consolidation par r√©sine','Monitoring climatique','Reconstitutions anastrophiques','Remplacement total par copies']
  , options_en:['Resin consolidation','Climate monitoring','Anastrophic reconstructions','Total replacement with replicas'],
  answer:[0,1,2]
},
{ id:'E44', type:'QCM',
  question_fr:'Quelles approches sont utilis√©es pour prot√©ger les inscriptions ?',
  question_en:'Which approaches are used to protect inscriptions?',
  options_fr:['Housses protectrices','Contr√¥les d‚Äôhumidit√©','R√©duire l‚Äôexposition publique','Peinture de protection moderne']
  , options_en:['Protective covers','Humidity controls','Restrict public exposure','Modern protective paints'],
  answer:[0,1,2]
},
{ id:'E45', type:'QCM',
  question_fr:'Quels principes de conception structurale garantissaient durabilit√© et monumentalit√© ?',
  question_en:'Which design principles ensured durability and monumentality?',
  options_fr:['Simplicit√© massive','Proportions modulaires','Redondance structurelle','Utilisation de mat√©riaux l√©gers']
  , options_en:['Massive simplicity','Modular proportions','Structural redundancy','Use of lightweight materials'],
  answer:[0,1,2]
},

/* 35 QCS (E46..E80) - one correct answer */
{ id:'E46', type:'QCS',
  question_fr:'Quelle √©tait la longueur de la coud√©e royale √©gyptienne (approx.) ?',
  question_en:'What was the approximate length of the Egyptian royal cubit?',
  options_fr:['52.3 cm','60 cm','45 cm','1 m'],
  options_en:['52.3 cm','60 cm','45 cm','1 m'],
  answer:[0]
},
{ id:'E47', type:'QCS',
  question_fr:'Quelle carri√®re fournissait le granite pour beaucoup d‚Äôob√©lisques ?',
  question_en:'Which quarry provided granite for many obelisks?',
  options_fr:['Assouan','Gizeh','Saqqarah','Memphis'],
  options_en:['Aswan','Giza','Saqqara','Memphis'],
  answer:[0]
},
{ id:'E48', type:'QCS',
  question_fr:'Quel chapiteau imite la fleur de lotus ouverte ?',
  question_en:'Which capital imitates the open lotus flower?',
  options_fr:['Lotiforme','Papyriforme','Hathorique','Palmiforme'],
  options_en:['Lotiform','Papyriform','Hathoric','Palmiform'],
  answer:[0]
},
{ id:'E49', type:'QCS',
  question_fr:'Quel √©l√©ment marque l‚Äôentr√©e monumentale d‚Äôun temple ?',
  question_en:'Which element marks a temple‚Äôs monumental entrance?',
  options_fr:['Le pyl√¥ne','L‚Äôob√©lisque','La statue colossale','La fontaine'],
  options_en:['The pylon','The obelisk','Colossal statue','Fountain'],
  answer:[0]
},
{ id:'E50', type:'QCS',
  question_fr:'Quelle ville est c√©l√®bre pour le complexe fun√©raire de Kh√©ops ?',
  question_en:'Which city is famous for Khufu‚Äôs funerary complex?',
  options_fr:['Gizeh','Th√®bes','Alexandrie','Abydos'],
  options_en:['Giza','Thebes','Alexandria','Abydos'],
  answer:[0]
},
{ id:'E51', type:'QCS',
  question_fr:'Quelle technique a probablement facilit√© la pose de lits de joints ?',
  question_en:'Which technique likely facilitated laying bedding joints?',
  options_fr:['Niveaux √† fil','Niveaux laser','Marquage √† la craie','Technique moderne de collage'],
  options_en:['String levels','Laser levels','Chalk marking','Modern adhesive technique'],
  answer:[0]
},
{ id:'E52', type:'QCS',
  question_fr:'Quel mat√©riau dominait pour les murs domestiques ?',
  question_en:'Which material dominated domestic walls?',
  options_fr:['Brique crue','Pierre taill√©e','Bois','B√©ton'],
  options_en:['Mudbrick','Cut stone','Wood','Concrete'],
  answer:[0]
},
{ id:'E53', type:'QCS',
  question_fr:'Quel √©l√©ment est caract√©ristique d‚Äôun hypostyle ?',
  question_en:'What element characterizes a hypostyle?',
  options_fr:['Colonnes nombreuses','Vo√ªte en berceau','Fen√™tres larges','Fa√ßade vitr√©e'],
  options_en:['Many columns','Barrel vault','Large windows','Glass facade'],
  answer:[0]
},
{ id:'E54', type:'QCS',
  question_fr:'Quel type de chapiteau repr√©sente souvent un visage de d√©esse ?',
  question_en:'Which type of capital often depicts a goddess face?',
  options_fr:['Hathorique','Lotiforme','Papyriforme','Palmiforme'],
  options_en:['Hathoric','Lotiform','Papyriform','Palmiform'],
  answer:[0]
},
{ id:'E55', type:'QCS',
  question_fr:'Quel instrument de mesure √©tait utilis√© pour la coud√©e ?',
  question_en:'Which instrument was used for measuring the cubit?',
  options_fr:['Gabarit de coud√©e','R√®gle en m√©tal moderne','M√®tre ruban','Niveau √©lectronique'],
  options_en:['Cubit rod','Modern metal ruler','Measuring tape','Electronic level'],
  answer:[0]
},
{ id:'E56', type:'QCS',
  question_fr:'Quel processus prot√©geait les momies et le mobilier fun√©raire ?',
  question_en:'Which process protected mummies and funerary goods?',
  options_fr:['Scellage du puits','Remplissage et rebouchage','Installation dans un hypog√©e profond','Transport vers mus√©es modernes'],
  options_en:['Sealing shafts','Backfilling and sealing','Placement in deep hypogea','Transport to modern museums'],
  answer:[1]
},
{ id:'E57', type:'QCS',
  question_fr:'Quelle plante est souvent repr√©sent√©e dans l‚Äôiconographie des chapiteaux ?',
  question_en:'Which plant is often depicted in capital iconography?',
  options_fr:['Papyrus','Ch√™ne','Sapin','Vigne'],
  options_en:['Papyrus','Oak','Fir','Vine'],
  answer:[0]
},
{ id:'E58', type:'QCS',
  question_fr:'Quelle m√©thode √©tait utilis√©e pour lever les blocs sur des rampes ?',
  question_en:'Which method was used to raise blocks on ramps?',
  options_fr:['Tra√Æneaux + lubrification','Ascenseurs hydrauliques','Syst√®mes pneumatiques','Grues motoris√©es'],
  options_en:['Sledges + lubrication','Hydraulic elevators','Pneumatic systems','Motorized cranes'],
  answer:[0]
},
{ id:'E59', type:'QCS',
  question_fr:'Quel b√¢timent abrite la salle hypostyle la plus c√©l√®bre ?',
  question_en:'Which building houses the most famous hypostyle hall?',
  options_fr:['Karnak','Gizeh','Saqqarah','Luxor'],
  options_en:['Karnak','Giza','Saqqara','Luxor'],
  answer:[0]
},
{ id:'E60', type:'QCS',
  question_fr:'Quel est le principal mat√©riau pour st√®les et statues polies ?',
  question_en:'What is the main material for polished stelae and statues?',
  options_fr:['Granite','Brique crue','Bois','Pl√¢tre'],
  options_en:['Granite','Mudbrick','Wood','Plaster'],
  answer:[0]
},
{ id:'E61', type:'QCS',
  question_fr:'Quelle est la fonction symbolique d‚Äôun ob√©lisque ?',
  question_en:'What is the symbolic function of an obelisk?',
  options_fr:['Symbole solaire et comm√©moratif','Tour d√©fensive','R√©servoir d‚Äôeau','√âdifice r√©sidentiel'],
  options_en:['Solar and commemorative symbol','Defensive tower','Water reservoir','Residential building'],
  answer:[0]
},
{ id:'E62', type:'QCS',
  question_fr:'Quelle technique conservatoire est non destructive ?',
  question_en:'Which conservation technique is non-destructive?',
  options_fr:['Consolidation par r√©sine','Remplacement total','D√©molition contr√¥l√©e','Reconstruction int√©grale'],
  options_en:['Resin consolidation','Total replacement','Controlled demolition','Full reconstruction'],
  answer:[0]
},
{ id:'E63', type:'QCS',
  question_fr:'Quel instrument mesurait la plan√©it√© lors de la pose de dalles ?',
  question_en:'Which instrument measured flatness during slab laying?',
  options_fr:['Fil √† plomb et corde','G√©om√®tre laser moderne','R√®gle m√©tallique longue','Niveau √©lectronique'],
  options_en:['Plumb-line and string','Modern laser surveyor','Long metal straightedge','Electronic level'],
  answer:[0]
},
{ id:'E64', type:'QCS',
  question_fr:'Quel r√¥le jouait le naos dans le temple ?',
  question_en:'What role did the naos play in the temple?',
  options_fr:['Abri du dieu (sanctuaire)','Espace public central','Magasin','Zone agricole'],
  options_en:['God\'s dwelling (sanctuary)','Central public area','Storehouse','Agricultural area'],
  answer:[0]
},
{ id:'E65', type:'QCS',
  question_fr:'Quelle est la technique probable pour sceller les portes fun√©raires ?',
  question_en:'What was the likely technique to seal funerary doors?',
  options_fr:['Blocage par lourdes pierres','Serrures m√©talliques','Emprisonnement par clous','Huisseries modernes'],
  options_en:['Blocking with heavy stones','Metal locks','Nail confinement','Modern frames'],
  answer:[0]
},
{ id:'E66', type:'QCS',
  question_fr:'Quelle proportion de monuments utilisaient du granite ext√©rieur ?',
  question_en:'Which proportion of monuments used exterior granite?',
  options_fr:['Principalement ob√©lisques et statues colossales','La plupart des maisons','L‚Äôessentiel des murs domestiques','Peu d‚Äô√©l√©ments modernes'],
  options_en:['Mainly obelisks and colossi','Most houses','Most domestic walls','Few modern elements'],
  answer:[0]
},
{ id:'E67', type:'QCS',
  question_fr:'Quel √©l√©ment marque un complexe fun√©raire royal complet ?',
  question_en:'Which element marks a complete royal funerary complex?',
  options_fr:['Pyramide + temple + chauss√©e','Simple tumulus','Mausol√©e isol√©','Enceinte en bois'],
  options_en:['Pyramid + temple + causeway','Simple barrow','Isolated mausoleum','Wooden enclosure'],
  answer:[0]
},
{ id:'E68', type:'QCS',
  question_fr:'Quel traitement prot√©geait les polychromies murales ?',
  question_en:'Which treatment protected mural polychromies?',
  options_fr:['Application d‚Äôun vernis organique','Recouvrement par panneaux','Remplacement par copies','Exposition directe sans protection'],
  options_en:['Application of organic varnish','Covering with panels','Replacement by copies','Direct exposure without protection'],
  answer:[0]
},
{ id:'E69', type:'QCS',
  question_fr:'Quel terme d√©signe la chambre centrale d‚Äôun temple (sanctuaire) ?',
  question_en:'Which term designates the central chamber of a temple (sanctuary)?',
  options_fr:['Naos','Hypostyle','Pyl√¥ne','Peristyle'],
  options_en:['Naos','Hypostyle','Pylon','Peristyle'],
  answer:[0]
},
{ id:'E70', type:'QCS',
  question_fr:'Quel type de joint rendait √©tanche un puits fun√©raire ?',
  question_en:'Which joint type made a burial shaft waterproof?',
  options_fr:['Joints serr√©s sans mortier','Mortier bitumineux','Joint en textile','Assemblage boulonn√©'],
  options_en:['Tight dry joints','Bituminous mortar','Textile joint','Bolted assembly'],
  answer:[1]
},
{ id:'E71', type:'QCS',
  question_fr:'Quelle est la fonction des rampes lat√©rales hypoth√©tiques ?',
  question_en:'What is the function of hypothetical side ramps?',
  options_fr:['Faciliter l‚Äôacc√®s progressif','√âl√©vation interne','D√©coration','Syst√®me d√©fensif'],
  options_en:['Facilitate progressive access','Internal lifting','Decoration','Defensive system'],
  answer:[0]
},
{ id:'E72', type:'QCS',
  question_fr:'Quel mat√©riau dominait pour sols monumentaux ?',
  question_en:'Which material dominated monumental floors?',
  options_fr:['Dalles de calcaire poli','Bois','Terre battue','Asphalte'],
  options_en:['Polished limestone slabs','Wood','Compacted earth','Asphalt'],
  answer:[0]
},
{ id:'E73', type:'QCS',
  question_fr:'Quel mat√©riau √©tait rarement employ√© pour grandes structures ?',
  question_en:'Which material was rarely used for large structures?',
  options_fr:['Bois','Calcaire','Granit','Pierre volcanique'],
  options_en:['Wood','Limestone','Granite','Volcanic stone'],
  answer:[0]
},
{ id:'E74', type:'QCS',
  question_fr:'Quel √©l√©ment identifie souvent l‚Äôentr√©e d‚Äôun temple de la p√©riode ramesside ?',
  question_en:'Which element often marks the entrance of a Ramesside period temple?',
  options_fr:['Ob√©lisque','Portail en verre','Fen√™tre moderne','Pergola'],
  options_en:['Obelisk','Glass portal','Modern window','Pergola'],
  answer:[0]
},
{ id:'E75', type:'QCS',
  question_fr:'Quelle technique aide √† d√©placer des ob√©lisques de plusieurs tonnes ?',
  question_en:'Which technique helps move multi-ton obelisks?',
  options_fr:['Assemblage sur radeaux et navigation','Tir par chevaux seulement','Transport par avions','Usage de rails modernes'],
  options_en:['Assembly on rafts and navigation','Horse-only pulling','Air transport','Modern railways'],
  answer:[0]
},
{ id:'E76', type:'QCS',
  question_fr:'Quelle m√©thode d‚Äôexcavation √©tait utilis√©e pour hypog√©es ?',
  question_en:'Which excavation method was used for hypogea?',
  options_fr:['Creusement dirig√© par tra√ßage','Dynamitage','Excavation m√©canique moderne','Remplissage pr√©alable'],
  options_en:['Guided trenching','Blasting','Modern mechanical excavation','Pre-backfilling'],
  answer:[0]
},
{ id:'E77', type:'QCS',
  question_fr:'Quel motif sert √† identifier des rues orient√©es pour l‚Äôombre ?',
  question_en:'Which motif identifies streets oriented for shade?',
  options_fr:['Rues √©troites parall√®les','Rues larges ouvertes','Rues circulaires','Rues pav√©es modernes'],
  options_en:['Narrow parallel streets','Wide open streets','Circular streets','Modern paved streets'],
  answer:[0]
},
{ id:'E78', type:'QCS',
  question_fr:'Quel terme d√©signe la base sur laquelle repose une statue ?',
  question_en:'What term designates the base on which a statue rests?',
  options_fr:['Socle','Naos','Dromos','Pyl√¥ne'],
  options_en:['Plinth','Naos','Dromos','Pylon'],
  answer:[0]
},
{ id:'E79', type:'QCS',
  question_fr:'Quel type d‚Äôeau est utilis√© pour faciliter le transport sur le sol ?',
  question_en:'Which water usage facilitated transport on the ground?',
  options_fr:['Humidification du sable devant sledges','Submersion des berges','Irrigation agricole','Refroidissement des outils'],
  options_en:['Wet the sand in front of sledges','Submerging banks','Agricultural irrigation','Cooling tools'],
  answer:[0]
},
{ id:'E80', type:'QCS',
  question_fr:'Quel √©l√©ment distingue une chapelle fun√©raire (mastaba) d‚Äôune pyramide ?',
  question_en:'What distinguishes a funerary chapel (mastaba) from a pyramid?',
  options_fr:['Forme trap√©zo√Ødale √† sommet plat','Forme pyramidale','Absence de couronne royale','Usage r√©sidentiel'],
  options_en:['Trapezoidal flat-topped form','Pyramidal form','Absence of royal crown','Residential use'],
  answer:[0]
},

/* 20 V/F (E81..E100) */
{ id:'E81', type:'VF',
  question_fr:'Les ob√©lisques √©taient toujours transport√©s par des routes pav√©es sur terre.',
  question_en:'Obelisks were always transported on paved roads over land.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E82', type:'VF',
  question_fr:'Le granite destin√© aux ob√©lisques provenait majoritairement d‚ÄôAssouan.',
  question_en:'Granite for obelisks mainly came from Aswan.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E83', type:'VF',
  question_fr:'La coud√©e royale √©tait utilis√©e comme module de proportion architecturale.',
  question_en:'The royal cubit was used as a module for architectural proportion.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E84', type:'VF',
  question_fr:'Les colonnes hathoriques repr√©sentent souvent la d√©esse Hathor par une t√™te sculpt√©e.',
  question_en:'Hathoric columns often represent the goddess Hathor with a sculpted head.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E85', type:'VF',
  question_fr:'Les maisons n√©olithiques √† √áatal H√∂y√ºk sont un bon exemple d‚Äôarchitecture √©gyptienne.',
  question_en:'Neolithic houses at √áatal H√∂y√ºk are a good example of Egyptian architecture.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E86', type:'VF',
  question_fr:'Les rampes h√©lico√Ødales internes ont √©t√© prouv√©es arch√©ologiquement pour toutes les pyramides.',
  question_en:'Internal spiral ramps have been archaeologically proven for all pyramids.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E87', type:'VF',
  question_fr:'Les temples √©gyptiens respectaient souvent un axe ax√© vers des ph√©nom√®nes c√©lestes.',
  question_en:'Egyptian temples often respected an axis oriented to celestial phenomena.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E88', type:'VF',
  question_fr:'La brique crue √©tait courante dans l‚Äôhabitat domestique √©gyptien ancien.',
  question_en:'Mudbrick was common in ancient Egyptian domestic housing.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E89', type:'VF',
  question_fr:'Les toits plats permettaient l‚Äôusage quotidien et la circulation sur les toits.',
  question_en:'Flat roofs allowed daily use and circulation on rooftops.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E90', type:'VF',
  question_fr:'Les pharaons construisaient uniquement des b√¢timents en bois pour montrer leur richesse.',
  question_en:'Pharaohs built only wooden buildings to show their wealth.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E91', type:'VF',
  question_fr:'Les colonnades massives contribuaient au soutien du poids de la couverture des temples.',
  question_en:'Massive colonnades contributed to supporting the weight of temple roofs.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E92', type:'VF',
  question_fr:'Le d√©cor polychrome int√©rieur √©tait rare dans les temples.',
  question_en:'Polychrome interior decoration was rare in temples.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E93', type:'VF',
  question_fr:'Les souterrains hypog√©es √©taient parfois prot√©g√©s par des remplissages apr√®s l‚Äôinhumation.',
  question_en:'Hypogeal undergrounds were sometimes protected by backfilling after burial.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E94', type:'VF',
  question_fr:'La proportion des salles suivait toujours une grille math√©matique simple identique pour tous les temples.',
  question_en:'The proportion of rooms always followed a simple mathematical grid identical for all temples.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E95', type:'VF',
  question_fr:'Les reliefs hi√©roglyphiques servaient √† la fois d‚Äôinformation et de d√©fense symbolique.',
  question_en:'Hieroglyphic reliefs served as information and symbolic defense.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E96', type:'VF',
  question_fr:'La plupart des grandes statues √©taient taill√©es dans un seul bloc (monolithe).',
  question_en:'Most large statues were carved from a single block (monolith).',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E97', type:'VF',
  question_fr:'Les syst√®mes de drainage n‚Äôexistaient pas dans l‚Äôarchitecture √©gyptienne classique.',
  question_en:'Drainage systems did not exist in classical Egyptian architecture.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
},
{ id:'E98', type:'VF',
  question_fr:'Les colonnades externes permettaient parfois l‚Äôombre et la circulation ombrag√©e.',
  question_en:'External colonnades sometimes provided shade and shaded circulation.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E99', type:'VF',
  question_fr:'Les architectes √©gyptiens utilisaient des mod√®les en petite √©chelle (maquettes).',
  question_en:'Egyptian architects used small-scale models (maquettes).',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[0]
},
{ id:'E100', type:'VF',
  question_fr:'Les architectes √©gyptiens ignoraient compl√®tement les principes de stabilit√© structurelle.',
  question_en:'Egyptian architects were completely unaware of structural stability principles.',
  options_fr:['Vrai','Faux'],
  options_en:['True','False'],
  answer:[1]
}

/* End of allQuestions list */
];

/* ---------- Ensure uniqueness and counts ---------- */
const counts = {
  QCM: allQuestions.filter(q => q.type==='QCM').length,
  QCS: allQuestions.filter(q => q.type==='QCS').length,
  VF:  allQuestions.filter(q => q.type==='VF').length,
  total: allQuestions.length
};
// console.log('Counts', counts); // for debugging if needed

/* ---------- Quiz control functions ---------- */
function resetQuizUI(){
  // reset displays
  questionIndexEl.textContent = '‚Äî';
  questionTextEl.textContent = 'Choisissez "Commencer" pour d√©marrer le quiz. S√©lectionnez la langue et le mode si d√©sir√©.';
  optionsContainer.innerHTML = '';
  scoreDisplay.textContent = '0';
  timerDisplay.textContent = '00:00';
  typeLabel.textContent = '‚Äî';
  totalLabel.textContent = '0';
  remainingLabel.textContent = '0';
  resultArea.style.display = 'none';
  // reset variables
  currentSet = [];
  currentIndex = 0;
  userAnswers = [];
  score = 0;
  stopTimer();
  retryMode = false;
  wrongIds = [];
  started = false;
}

/* Start quiz with selected mode */
startBtn.addEventListener('click', () => {
  startQuiz();
});
finishBtn.addEventListener('click', () => {
  finishQuiz();
});

prevBtn.addEventListener('click', () => {
  saveCurrentAnswer();
  if(currentIndex>0){ currentIndex--; renderQuestion(); }
});
nextBtn.addEventListener('click', () => {
  saveCurrentAnswer();
  if(currentIndex<currentSet.length-1){ currentIndex++; renderQuestion(); }
});
submitBtn.addEventListener('click', () => {
  saveCurrentAnswer();
  finishQuiz();
});

/* Save current answer state */
function saveCurrentAnswer(){
  const q = currentSet[currentIndex];
  if(!q) return;
  const inputs = Array.from(optionsContainer.querySelectorAll('input[name="opt"]'));
  if(q.type==='QCM'){
    const chosen = inputs.filter(i => i.checked).map(i => parseInt(i.value));
    userAnswers[currentIndex] = chosen.length ? chosen : null;
  } else {
    const chosen = inputs.find(i => i.checked);
    userAnswers[currentIndex] = chosen ? [parseInt(chosen.value)] : null;
  }
}

/* Start quiz implementation */
function startQuiz(){
  // Prepare set based on mode
  const mode = modeSelect.value; // mixed|QCM|QCS|VF
  const lang = langSelect.value;
  typeLabel.textContent = mode === 'mixed' ? 'Mixed' : mode;
  lessonLabel.textContent = '√âgypte';
  // Filter by type
  if(mode==='mixed'){
    // Mixed: use all questions, but shuffle to randomize complexity
    currentSet = clone(allQuestions);
  } else {
    currentSet = clone(allQuestions.filter(q => q.type === mode));
  }
  // Shuffle for difficulty mixing
  shuffleArray(currentSet);
  userAnswers = Array(currentSet.length).fill(null);
  currentIndex = 0;
  score = 0;
  wrongIds = [];
  retryMode = false;
  // Setup UI counts
  totalLabel.textContent = currentSet.length;
  remainingLabel.textContent = currentSet.length;
  scoreDisplay.textContent = '0';
  // Timer: give 1.5 min per 10 questions (approx) -> dynamic
  timeLeft = Math.max(5*60, Math.floor(currentSet.length * 9)); // approx seconds per Q
  startTimer();
  renderQuestion();
  started = true;
  // Nav buttons
  prevBtn.disabled = false;
  nextBtn.disabled = false;
  submitBtn.style.display = 'inline-block';
}

/* Render a question */
function renderQuestion(){
  optionsContainer.innerHTML = '';
  const q = currentSet[currentIndex];
  if(!q) return;
  // language text
  const lang = langSelect.value;
  const qText = (lang==='fr') ? q.question_fr : q.question_en;
  const opts = (lang==='fr') ? q.options_fr || q.options_fr : q.options_en || q.options_en;
  questionIndexEl.textContent = `Question ${currentIndex+1} / ${currentSet.length}`;
  questionTextEl.textContent = qText;
  // render options depending on type
  if(q.type === 'QCM'){
    opts.forEach((opt,i) => {
      const label = document.createElement('label');
      label.className = 'option';
      label.setAttribute('role','listitem');
      const input = document.createElement('input');
      input.type = 'checkbox';
      input.name = 'opt';
      input.value = i;
      // restore if answered
      const prev = userAnswers[currentIndex];
      if(Array.isArray(prev) && prev.includes(i)) input.checked = true;
      label.appendChild(input);
      const span = document.createElement('span');
      span.textContent = opt;
      label.appendChild(span);
      optionsContainer.appendChild(label);
      // clicking label toggles
      label.addEventListener('click', (e) => {
        if(e.target.tagName !== 'INPUT') input.checked = !input.checked;
      });
    });
  } else if(q.type === 'QCS'){
    opts.forEach((opt,i) => {
      const label = document.createElement('label');
      label.className = 'option';
      const input = document.createElement('input');
      input.type = 'radio';
      input.name = 'opt';
      input.value = i;
      if(Array.isArray(userAnswers[currentIndex]) && userAnswers[currentIndex][0] === i) input.checked = true;
      label.appendChild(input);
      const span = document.createElement('span');
      span.textContent = opt;
      label.appendChild(span);
      optionsContainer.appendChild(label);
      label.addEventListener('click', (e) => {
        if(e.target.tagName !== 'INPUT'){ input.checked = true; }
      });
    });
  } else { // VF
    const vfOpts = (lang==='fr')? ['Vrai','Faux'] : ['True','False'];
    vfOpts.forEach((opt,i) => {
      const label = document.createElement('label');
      label.className = 'option';
      const input = document.createElement('input');
      input.type = 'radio';
      input.name = 'opt';
      input.value = i;
      if(Array.isArray(userAnswers[currentIndex]) && userAnswers[currentIndex][0] === i) input.checked = true;
      label.appendChild(input);
      const span = document.createElement('span');
      span.textContent = opt;
      label.appendChild(span);
      optionsContainer.appendChild(label);
      label.addEventListener('click', (e) => {
        if(e.target.tagName !== 'INPUT'){ input.checked = true; }
      });
    });
  }
  // update nav/remaining
  prevBtn.disabled = currentIndex === 0;
  nextBtn.disabled = currentIndex === currentSet.length - 1;
  remainingLabel.textContent = currentSet.length - (currentIndex + 1);
}

/* Timer functions */
function startTimer(){
  stopTimer();
  updateTimerDisplay();
  timer = setInterval(() => {
    timeLeft--;
    updateTimerDisplay();
    if(timeLeft <= 0){
      stopTimer();
      finishQuiz();
    }
  }, 1000);
}
function stopTimer(){
  if(timer){ clearInterval(timer); timer = null; }
}
function updateTimerDisplay(){
  const m = Math.floor(timeLeft/60).toString().padStart(2,'0');
  const s = (timeLeft%60).toString().padStart(2,'0');
  timerDisplay.textContent = `${m}:${s}`;
}

/* Finish quiz and scoring (+1 correct, -1 incorrect, 0 unanswered) */
function finishQuiz(){
  stopTimer();
  // ensure last saved
  saveCurrentAnswer();
  score = 0;
  wrongIds = [];
  for(let i=0;i<currentSet.length;i++){
    const q = currentSet[i];
    const user = userAnswers[i];
    const correct = q.answer.slice().sort((a,b)=>a-b);
    if(!user || user.length===0){
      // unanswered => 0
      continue;
    }
    // compare sets for QCM: exact match required
    const u = user.slice().sort((a,b)=>a-b);
    const equal = (u.length === correct.length) && u.every((v,j)=>v===correct[j]);
    if(equal){
      score += 1;
    } else {
      score -= 1;
      wrongIds.push(q.id);
    }
  }
  // display score and details
  scoreDisplay.textContent = `${score}`;
  showResults();
}

/* Show results with answers and option to retry wrong ones */
function showResults(){
  resultArea.style.display = 'block';
  // summary
  resultSummary.innerHTML = `<p>Score final : <strong>${score}</strong> (sur ${currentSet.length} questions).<br>
    Correctes : <strong>${Math.max(0, score)}</strong> (approx), Incorrectes : <strong>${wrongIds.length}</strong>.</p>`;
  // answers list
  answersList.innerHTML = '';
  const lang = langSelect.value;
  currentSet.forEach((q,i) => {
    const item = document.createElement('div');
    item.className = 'answer-item';
    const qtitle = document.createElement('div');
    qtitle.style.fontWeight = '700';
    qtitle.textContent = `Q${i+1} ‚Äî ${ (lang==='fr')? q.question_fr : q.question_en }`;
    item.appendChild(qtitle);

    const ua = document.createElement('div');
    ua.style.marginTop = '6px';
    let uaText = 'Votre r√©ponse : ';
    if(!userAnswers[i] || userAnswers[i].length===0){
      uaText += '<em>Pas de r√©ponse</em>';
    } else {
      uaText += userAnswers[i].map(idx => {
        if(q.type==='VF'){
          return (lang==='fr') ? (idx===0? 'Vrai':'Faux') : (idx===0? 'True':'False');
        } else {
          return (lang==='fr') ? q.options_fr[idx] : q.options_en[idx];
        }
      }).join(', ');
    }
    ua.innerHTML = uaText;
    item.appendChild(ua);

    const ca = document.createElement('div');
    ca.style.marginTop = '6px';
    ca.innerHTML = `<strong>R√©ponse correcte :</strong> ${ q.answer.map(idx => {
      if(q.type==='VF') return (lang==='fr') ? (q.options_fr[idx]) : (q.options_en[idx]);
      return (lang==='fr') ? q.options_fr[idx] : q.options_en[idx];
    }).join(', ') }`;
    item.appendChild(ca);

    const mark = document.createElement('div');
    mark.style.marginTop = '8px';
    const isCorrect = userAnswers[i] && userAnswers[i].length && ( userAnswers[i].slice().sort().toString() === q.answer.slice().sort().toString() );
    mark.innerHTML = isCorrect ? `<span style="color:green;font-weight:700">‚úî Bonne r√©ponse</span>` : `<span style="color:#d6336c;font-weight:700">‚úñ Mauvaise r√©ponse</span>`;
    item.appendChild(mark);

    answersList.appendChild(item);
  });

  // enable/disable retry
  if(retryWrongCheckbox.checked && wrongIds.length>0){
    retryBtn.disabled = false;
  } else {
    retryBtn.disabled = true;
  }
}

/* Retry wrong questions */
retryBtn.addEventListener('click', () => {
  if(wrongIds.length===0) return;
  // build new currentSet with wrong questions
  const newSet = [];
  wrongIds.forEach(id => {
    const q = allQuestions.find(x => x.id === id);
    if(q) newSet.push(clone(q));
  });
  currentSet = newSet;
  userAnswers = Array(currentSet.length).fill(null);
  currentIndex = 0;
  score = 0;
  wrongIds = [];
  retryMode = true;
  totalLabel.textContent = currentSet.length;
  remainingLabel.textContent = currentSet.length;
  timeLeft = Math.max(3*60, Math.floor(currentSet.length*9));
  startTimer();
  resultArea.style.display = 'none';
  renderQuestion();
});

/* Initialize UI default */
resetQuizUI();

/* Accessibility: allow keyboard navigation arrows */
document.addEventListener('keydown', (e) => {
  if(!quizOpen) return;
  if(e.key === 'ArrowRight'){ nextBtn.click(); }
  if(e.key === 'ArrowLeft'){ prevBtn.click(); }
});

/* Prevent accidental form submissions or interactions */
document.addEventListener('click', (e) => {
  // keep clicks functional
});

/* Ensure modal open state if user presses open button again */
openQuizBtn.addEventListener('dblclick', () => {
  // optional: reset if double clicked
  resetQuizUI();
});

/* Minor: prevent sidebar covering content on small screens by default hidden */
if(window.innerWidth < 960){
  sidebar.classList.add('hidden');
}

/* End of script */
</script>
</body>
</html>
