<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ›ï¸ Quiz Architecture â€“ ArchiSpace</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet" />
<style>
  /* Reset & Base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin:0; padding:0; height:100%;
    font-family: 'Rubik', sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 20px;
    overflow-x: hidden;
  }
  h1 {
    margin-bottom: 10px;
    font-weight: 600;
    font-size: 2.5rem;
    text-align: center;
    user-select: none;
  }
  .emoji {
    user-select: none;
  }

  /* Container */
  #quiz-container {
    background: rgba(0,0,0,0.45);
    max-width: 700px;
    width: 100%;
    border-radius: 12px;
    padding: 25px 30px 40px 30px;
    box-shadow:
      0 0 15px rgba(255 204 0 / 0.8),
      inset 0 0 10px rgba(255 204 0 / 0.3);
    position: relative;
    overflow: hidden;
  }
  /* Question box */
  .question-box {
    opacity: 0;
    animation: fadeIn 0.7s forwards;
    transition: box-shadow 0.3s ease;
    border-radius: 10px;
    padding: 20px 25px;
    background: linear-gradient(145deg, #f7b733, #f7d358);
    color: #222;
    box-shadow: 0 4px 12px rgba(247, 183, 51, 0.7),
                0 0 20px rgba(247, 183, 51, 0.6);
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(15px);}
    to {opacity: 1; transform: translateY(0);}
  }
  .question-text {
    font-weight: 600;
    font-size: 1.3rem;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  /* Options */
  .options label {
    display: block;
    margin-bottom: 12px;
    cursor: pointer;
    font-weight: 500;
    font-size: 1.1rem;
    color: #222;
    user-select: none;
    padding: 8px 15px;
    border-radius: 8px;
    background: #fff8d6;
    box-shadow: 0 2px 8px rgba(247, 183, 51, 0.4);
    transition: background-color 0.25s ease, box-shadow 0.25s ease;
    position: relative;
  }
  .options label:hover {
    background: #ffd633;
    box-shadow: 0 4px 20px rgba(255, 214, 51, 0.85);
  }
  input[type="radio"], input[type="checkbox"] {
    margin-right: 14px;
    cursor: pointer;
  }

  /* Buttons container */
  .buttons {
    margin-top: 25px;
    display: flex;
    justify-content: space-between;
    user-select: none;
  }
  button {
    background: linear-gradient(45deg, #f7b733, #f7d358);
    border: none;
    padding: 12px 26px;
    font-weight: 600;
    font-size: 1rem;
    border-radius: 10px;
    cursor: pointer;
    color: #222;
    box-shadow: 0 4px 15px rgba(247, 183, 51, 0.7);
    transition:
      background-color 0.3s ease,
      transform 0.25s ease,
      box-shadow 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
  }
  button:hover:not(:disabled) {
    background: linear-gradient(45deg, #ffde59, #ffd633);
    box-shadow: 0 6px 25px rgba(255, 214, 51, 0.95);
    transform: translateY(-3px);
  }
  button:disabled {
    background: #ccc;
    color: #777;
    cursor: default;
    box-shadow: none;
    transform: none;
  }

  /* Timer circular */
  #timer {
    position: relative;
    width: 70px;
    height: 70px;
    margin: 20px auto 10px auto;
  }
  svg {
    transform: rotate(-90deg);
  }
  .circle-bg {
    fill: none;
    stroke: #333;
    stroke-width: 8;
  }
  .circle {
    fill: none;
    stroke: #ffcc00;
    stroke-width: 8;
    stroke-linecap: round;
    stroke-dasharray: 220;
    stroke-dashoffset: 0;
    transition: stroke-dashoffset 1s linear;
  }
  #timer-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: 700;
    font-size: 1.3rem;
    color: #ffcc00;
    user-select: none;
  }

  /* Result box */
  #result {
    margin-top: 30px;
    background: rgba(0,0,0,0.75);
    padding: 20px;
    border-radius: 12px;
    box-shadow:
      0 0 20px #ffd633aa;
    color: #fff;
    font-weight: 600;
    font-size: 1.2rem;
  }

  /* Scrollbar for container */
  #quiz-container {
    max-height: 70vh;
    overflow-y: auto;
  }

  /* Responsive */
  @media(max-width: 760px){
    #quiz-container {
      max-width: 100%;
      padding: 15px 20px 30px 20px;
    }
  }

</style>
</head>
<body>

<h1>ğŸ›ï¸ Quiz Architecture â€“ ArchiSpace <span class="emoji">ğŸ§±ğŸ“</span></h1>

<div id="timer" aria-label="timer">
  <svg width="70" height="70">
    <circle class="circle-bg" cx="35" cy="35" r="35"></circle>
    <circle class="circle" cx="35" cy="35" r="35"></circle>
  </svg>
  <div id="timer-text" aria-live="polite" aria-atomic="true">30:00</div>
</div>

<div id="quiz-container" role="main" aria-live="polite" aria-atomic="true">
  <!-- Ø§Ù„Ø³Ø¤Ø§Ù„ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
</div>

<div class="buttons">
  <button id="prevBtn" disabled aria-label="Question prÃ©cÃ©dente">â¬…ï¸ PrÃ©cÃ©dent</button>
  <button id="nextBtn" aria-label="Question suivante">Suivant â¡ï¸</button>
  <button id="submitBtn" style="display:none;" aria-label="Soumettre le quiz">ğŸ“¤ Soumettre</button>
</div>

<div id="result" aria-live="polite" aria-atomic="true" style="display:none;"></div>

<script>
  // Ø£Ø³Ø¦Ù„Ø© - 100 Ø³Ø¤Ø§Ù„ (45 QCM + 35 QCS + 20 VF) Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±
  const questions = [
    // 45 QCM (Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯ ØµØ­ÙŠØ­)
    {type:"qcm", q:"Quelle est la principale fonction d'une colonne en architecture ?", choices:["Supporter le poids","DÃ©corer les murs","Isoler le bÃ¢timent","Illuminer l'espace"], answer:0},
    {type:"qcm", q:"Le bÃ©ton armÃ© est composÃ© de :", choices:["BÃ©ton et acier","BÃ©ton et bois","Acier et bois","BÃ©ton et plastique"], answer:0},
    {type:"qcm", q:"Quelle unitÃ© est utilisÃ©e pour mesurer une surface ?", choices:["MÃ¨tre carrÃ©","MÃ¨tre cube","Kilogramme","Litre"], answer:0},
    {type:"qcm", q:"Quel matÃ©riau est le plus utilisÃ© dans la construction des maisons traditionnelles ?", choices:["Brique","Verre","Plastique","Acier"], answer:0},
    {type:"qcm", q:"Un plan en coupe montre :", choices:["Une vue intÃ©rieure","Une vue extÃ©rieure","Un plan Ã©lectrique","Un plan de jardin"], answer:0},
    {type:"qcm", q:"Quelle forme de toit est la plus courante dans les maisons d'architecture traditionnelle ?", choices:["Toit en pente","Toit plat","Toit en dÃ´me","Toit en verre"], answer:0},
    {type:"qcm", q:"Le terme 'portique' dÃ©signe :", choices:["Une galerie avec colonnes","Une porte principale","Une fenÃªtre spÃ©ciale","Un escalier"], answer:0},
    {type:"qcm", q:"Quelle est la fonction principale du dallage ?", choices:["RevÃªtement de sol","Mur porteur","Toiture","FenÃªtre"], answer:0},
    {type:"qcm", q:"Un pilier est diffÃ©rent d'une colonne car :", choices:["Il est plus massif et sans fÃ»t","Il est toujours en bois","Il est transparent","Il est dÃ©coratif uniquement"], answer:0},
    {type:"qcm", q:"Quel matÃ©riau est le plus Ã©cologique ?", choices:["Bois","BÃ©ton","Acier","Plastique"], answer:0},
    {type:"qcm", q:"Lâ€™architecture gothique est caractÃ©risÃ©e par :", choices:["Arcs en ogive","Colonnes doriques","Toits plats","FenÃªtres rondes"], answer:0},
    {type:"qcm", q:"Quelle est la principale caractÃ©ristique d'un mur porteur ?", choices:["Supporte la charge du bÃ¢timent","Est uniquement dÃ©coratif","Est amovible","Est en verre"], answer:0},
    {type:"qcm", q:"Un plan d'architecte est gÃ©nÃ©ralement dessinÃ© Ã  l'Ã©chelle de :", choices:["1:100","1:1","1:1000","1:10"], answer:0},
    {type:"qcm", q:"Le terme 'faÃ§ade' dÃ©signe :", choices:["La face extÃ©rieure du bÃ¢timent","La toiture","Le sous-sol","L'intÃ©rieur"], answer:0},
    {type:"qcm", q:"Quâ€™est-ce quâ€™un voÃ»te en architecture ?", choices:["Une structure en arc","Un type de colonne","Un matÃ©riau de construction","Une fenÃªtre"], answer:0},
    {type:"qcm", q:"Lequel des suivants est un matÃ©riau inerte ?", choices:["Verre","Bois","BÃ©ton","Plastique"], answer:0},
    {type:"qcm", q:"La rÃ©sistance des matÃ©riaux mesure :", choices:["La capacitÃ© Ã  supporter une charge","La couleur","La texture","La flexibilitÃ©"], answer:0},
    {type:"qcm", q:"Le terme 'plinthe' dÃ©signe :", choices:["La base du mur","Le toit","La fenÃªtre","La porte"], answer:0},
    {type:"qcm", q:"Quelle est lâ€™Ã©paisseur moyenne dâ€™un mur porteur ?", choices:["30 cm","5 cm","1 mÃ¨tre","10 cm"], answer:0},
    {type:"qcm", q:"Lâ€™acier est principalement utilisÃ© pour :", choices:["Les structures porteuses","Les revÃªtements de sol","Les fenÃªtres","Les toitures"], answer:0},
    {type:"qcm", q:"Le terme 'corniche' dÃ©signe :", choices:["Un Ã©lÃ©ment dÃ©coratif en haut dâ€™un mur","Une porte","Un pilier","Une fenÃªtre"], answer:0},
    {type:"qcm", q:"Quelle est la fonction dâ€™une dalle ?", choices:["Supporter les charges","DÃ©corer","Isoler","Ã‰clairer"], answer:0},
    {type:"qcm", q:"Les fenÃªtres en architecture traditionnelle sont souvent :", choices:["Petites et rectangulaires","Grandes et rondes","En verre teintÃ©","En plastique"], answer:0},
    {type:"qcm", q:"Quâ€™est-ce quâ€™une travÃ©e ?", choices:["Espace entre deux colonnes","Un type de toit","Une fenÃªtre spÃ©ciale","Un escalier"], answer:0},
    {type:"qcm", q:"Le toit en terrasse est caractÃ©ristique de :", choices:["Lâ€™architecture moderne","Lâ€™architecture gothique","Lâ€™architecture classique","Lâ€™architecture romaine"], answer:0},
    {type:"qcm", q:"Le ciment est un composant de :", choices:["Le bÃ©ton","Le bois","Lâ€™acier","Le verre"], answer:0},
    {type:"qcm", q:"Quelle est la durÃ©e approximative de prise du bÃ©ton ?", choices:["24 heures","1 heure","1 semaine","10 minutes"], answer:0},
    {type:"qcm", q:"Lequel des Ã©lÃ©ments suivants est une structure horizontale ?", choices:["Dalle","Poteau","Colonne","Mur"], answer:0},
    {type:"qcm", q:"Le parquet est un type de :", choices:["RevÃªtement de sol","Mur","Toiture","Escalier"], answer:0},
    {type:"qcm", q:"Quel type de fondation est le plus courant ?", choices:["Semelle filante","Fondation sur pieux","Radier gÃ©nÃ©ral","Fondation superficielle"], answer:0},
    {type:"qcm", q:"Le terme 'chaperon' dÃ©signe :", choices:["La partie supÃ©rieure dâ€™un mur","Une porte","Une fenÃªtre","Un pilier"], answer:0},
    {type:"qcm", q:"La charpente est gÃ©nÃ©ralement en :", choices:["Bois","Acier","BÃ©ton","Plastique"], answer:0},
    {type:"qcm", q:"Le bÃ©ton prÃ©contraint est :", choices:["RenforcÃ© par des cÃ¢bles tendus","Simple bÃ©ton","En bois","Transparent"], answer:0},
    {type:"qcm", q:"Quel est lâ€™avantage principal des structures en acier ?", choices:["Grande rÃ©sistance et lÃ©gÃ¨retÃ©","CoÃ»t faible","Isolation thermique","FacilitÃ© dâ€™installation"], answer:0},
    {type:"qcm", q:"La surface dâ€™un rectangle se calcule par :", choices:["Longueur Ã— Largeur","Longueur + Largeur","Longueur - Largeur","Longueur / Largeur"], answer:0},
    {type:"qcm", q:"Un escalier droit est caractÃ©risÃ© par :", choices:["Une seule volÃ©e","Plusieurs virages","Escalier en colimaÃ§on","Escalier suspendu"], answer:0},
    {type:"qcm", q:"Le mortier sert Ã  :", choices:["Assembler les briques","Isoler","DÃ©corer","Peindre"], answer:0},
    {type:"qcm", q:"La hauteur sous plafond standard est d'environ :", choices:["2,5 mÃ¨tres","1 mÃ¨tre","4 mÃ¨tres","5 mÃ¨tres"], answer:0},
    {type:"qcm", q:"Quel matÃ©riau offre la meilleure isolation thermique ?", choices:["La laine de verre","Le bÃ©ton","Le mÃ©tal","Le verre"], answer:0},
    {type:"qcm", q:"Lequel est un systÃ¨me de chauffage courant dans les bÃ¢timents modernes ?", choices:["Plancher chauffant","CheminÃ©e ouverte","PoÃªle Ã  bois","Radiateur Ã  eau"], answer:0},
    {type:"qcm", q:"Les murs rideaux sont :", choices:["Des faÃ§ades lÃ©gÃ¨res en verre","Des murs porteurs en bÃ©ton","Des murs en briques","Des toits"], answer:0},

    // 35 QCS (Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ ØµØ­ÙŠØ­)
    {type:"qcs", q:"Quel est le matÃ©riau principal utilisÃ© dans la pyramide de KhÃ©ops ?", choices:["Calcaire","Brique","Bois","Acier"], answer:0},
    {type:"qcs", q:"Comment appelle-t-on un dessin technique reprÃ©sentant une vue de dessus ?", choices:["Plan","Coupe","FaÃ§ade","Perspective"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'un linteau ?", choices:["Supporter l'ouverture au-dessus d'une porte ou fenÃªtre","DÃ©corer un mur","Isoler une piÃ¨ce","Faire une fenÃªtre"], answer:0},
    {type:"qcs", q:"Quelle forme ont les arcs en architecture romane ?", choices:["Arc en plein cintre","Arc brisÃ©","Arc ogival","Arc en anse de panier"], answer:0},
    {type:"qcs", q:"Quel type de plan montre une section verticale ?", choices:["Plan en coupe","Plan d'ensemble","Plan de faÃ§ade","Plan de masse"], answer:0},
    {type:"qcs", q:"Quel Ã©lÃ©ment architectural est souvent sculptÃ© dans les chapiteaux ?", choices:["Feuilles d'acanthe","Colonnes","Dalles","Poutres"], answer:0},
    {type:"qcs", q:"Quelle est la partie horizontale supÃ©rieure d'une colonne ?", choices:["Chapiteau","FÃ»t","Base","Dalle"], answer:0},
    {type:"qcs", q:"Qu'est-ce qu'un plan masse ?", choices:["Plan d'ensemble du terrain","Plan intÃ©rieur","Plan de faÃ§ade","Plan en coupe"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'une poutre ?", choices:["Supporter une charge horizontale","DÃ©corer","Isoler","Servir de fenÃªtre"], answer:0},
    {type:"qcs", q:"Quelle est la particularitÃ© d'un mur mitoyen ?", choices:["SÃ©pare deux propriÃ©tÃ©s","Est toujours en bois","Est en verre","Est amovible"], answer:0},
    {type:"qcs", q:"Quel matÃ©riau est le plus lourd ?", choices:["BÃ©ton","Bois","Acier","Verre"], answer:2},
    {type:"qcs", q:"Lequel est un exemple dâ€™Ã©lÃ©ment non porteur ?", choices:["Cloison","Colonne","Poteau","Poutre"], answer:0},
    {type:"qcs", q:"Lequel des Ã©lÃ©ments suivants fait partie de la fondation ?", choices:["Semelle","Plafond","Mur","Toit"], answer:0},
    {type:"qcs", q:"Quelle est la principale caractÃ©ristique du style baroque ?", choices:["Ornements exubÃ©rants","SimplicitÃ©","Formes gÃ©omÃ©triques simples","Couleurs neutres"], answer:0},
    {type:"qcs", q:"Quelle est la fonction dâ€™une fenÃªtre ?", choices:["Permettre l'entrÃ©e de lumiÃ¨re et d'air","Supporter un toit","DÃ©corer une faÃ§ade","Isoler"], answer:0},
    {type:"qcs", q:"Quel outil est utilisÃ© pour tracer des arcs ?", choices:["Compas","RÃ¨gle","Ã‰querre","Crayon"], answer:0},
    {type:"qcs", q:"Quel est le rÃ´le dâ€™une charpente ?", choices:["Soutenir la toiture","Isoler","DÃ©corer","Supporter le sol"], answer:0},
    {type:"qcs", q:"Quelle est l'Ã©paisseur recommandÃ©e pour un mur extÃ©rieur ?", choices:["30 Ã  40 cm","5 cm","1 mÃ¨tre","10 cm"], answer:0},
    {type:"qcs", q:"Quel est le matÃ©riau utilisÃ© pour isoler ?", choices:["Laine de verre","BÃ©ton","Acier","Verre"], answer:0},
    {type:"qcs", q:"Quel est l'Ã©lÃ©ment principal d'un toit en pente ?", choices:["La charpente","La dalle","Le mur","Le sol"], answer:0},
    {type:"qcs", q:"Quelle est la hauteur standard d'une porte ?", choices:["2 mÃ¨tres","1 mÃ¨tre","3 mÃ¨tres","2,5 mÃ¨tres"], answer:0},
    {type:"qcs", q:"Qu'est-ce qu'une faÃ§ade ?","choices":["Face extÃ©rieure du bÃ¢timent","Mur intÃ©rieur","Toit","Sol"], answer:0},
    {type:"qcs", q:"Le bÃ©ton est principalement composÃ© de :", choices:["Ciment, sable, gravier et eau","Bois","Acier","Verre"], answer:0},
    {type:"qcs", q:"Quel est l'outil utilisÃ© pour mesurer les angles ?", choices:["Rapporteur","RÃ¨gle","Compas","Niveau"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'une fondation ?", choices:["Transmettre les charges au sol","DÃ©corer","Isoler","Ventiler"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'une dalle ?", choices:["Supporter les charges","DÃ©corer","Isoler","Ventiler"], answer:0},
    {type:"qcs", q:"Quelle est la caractÃ©ristique d'une voÃ»te en berceau ?", choices:["Arc continu et arrondi","Arc brisÃ©","Arc en ogive","Arc en anse de panier"], answer:0},
    {type:"qcs", q:"Lequel est un matÃ©riau naturel ?", choices:["Bois","BÃ©ton","Acier","Plastique"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'un escalier ?", choices:["Permettre la circulation verticale","Isoler","DÃ©corer","Supporter le poids"], answer:0},
    {type:"qcs", q:"Quel est le terme pour une ouverture dans un mur ?", choices:["FenÃªtre","Pilier","Plinthe","Corniche"], answer:0},
    {type:"qcs", q:"Quel matÃ©riau est rÃ©sistant Ã  la corrosion ?", choices:["Acier inoxydable","Bois","Plastique","BÃ©ton"], answer:0},
    {type:"qcs", q:"Quelle est la particularitÃ© du style Art dÃ©co ?", choices:["Lignes gÃ©omÃ©triques et ornements stylisÃ©s","Formes organiques","Couleurs pastel","DÃ©cor minimaliste"], answer:0},
    {type:"qcs", q:"Quel est le rÃ´le dâ€™un poteau ?", choices:["Supporter verticalement","DÃ©corer","Isoler","Ventiler"], answer:0},
    {type:"qcs", q:"Quel type de dessin montre la faÃ§ade d'un bÃ¢timent ?", choices:["FaÃ§ade","Plan","Coupe","Perspective"], answer:0},
    {type:"qcs", q:"Quelle est la fonction dâ€™un linteau ?", choices:["Supporter lâ€™ouverture dâ€™une fenÃªtre ou porte","DÃ©corer","Isoler","Ventiler"], answer:0},

    // 20 VF (Vrai/Faux)
    {type:"vf", q:"Le bÃ©ton armÃ© combine bÃ©ton et acier.", answer:true},
    {type:"vf", q:"Une colonne est toujours ronde.", answer:false},
    {type:"vf", q:"Le bois est un matÃ©riau Ã©cologique.", answer:true},
    {type:"vf", q:"La charpente soutient la toiture.", answer:true},
    {type:"vf", q:"Une dalle est une structure horizontale.", answer:true},
    {type:"vf", q:"Un pilier est toujours dÃ©coratif.", answer:false},
    {type:"vf", q:"Le mortier sert Ã  assembler les briques.", answer:true},
    {type:"vf", q:"La rÃ©sistance des matÃ©riaux ne concerne pas la flexibilitÃ©.", answer:false},
    {type:"vf", q:"Une voÃ»te est une structure arquÃ©e.", answer:true},
    {type:"vf", q:"La faÃ§ade est la partie intÃ©rieure du bÃ¢timent.", answer:false},
    {type:"vf", q:"Le plan en coupe montre une vue verticale.", answer:true},
    {type:"vf", q:"Le parquet est un revÃªtement de sol.", answer:true},
    {type:"vf", q:"Lâ€™acier est principalement utilisÃ© pour les fenÃªtres.", answer:false},
    {type:"vf", q:"La laine de verre est un isolant thermique.", answer:true},
    {type:"vf", q:"Un escalier droit a plusieurs virages.", answer:false},
    {type:"vf", q:"La surface dâ€™un rectangle est longueur plus largeur.", answer:false},
    {type:"vf", q:"Le bÃ©ton prend environ 24 heures pour durcir.", answer:true},
    {type:"vf", q:"Une fenÃªtre permet l'entrÃ©e de lumiÃ¨re et d'air.", answer:true},
    {type:"vf", q:"Un mur porteur ne supporte pas la charge du bÃ¢timent.", answer:false},
    {type:"vf", q:"Les murs rideaux sont des faÃ§ades lÃ©gÃ¨res en verre.", answer:true},
  ];

  // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
  let currentIndex = 0;
  let score = 0;
  let answers = new Array(questions.length).fill(null);

  // DOM Ø§Ù„Ø¹Ù†Ø§ØµØ±
  const quizContainer = document.getElementById('quiz-container');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');
  const timerText = document.getElementById('timer-text');
  const circle = document.querySelector('.circle');

  // Ù…Ø¤Ù‚Øª Ø¯Ø§Ø¦Ø±ÙŠ
  const FULL_DASH_ARRAY = 220;
  const TIME_LIMIT = 30 * 60; // 30 Ø¯Ù‚ÙŠÙ‚Ø© Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
  let timePassed = 0;
  let timeLeft = TIME_LIMIT;
  let timerInterval = null;

  function startTimer() {
    updateTimerCircle();
    timerInterval = setInterval(() => {
      timePassed++;
      timeLeft = TIME_LIMIT - timePassed;
      updateTimerCircle();
      if(timeLeft <= 0) {
        clearInterval(timerInterval);
        alert("â° Temps Ã©coulÃ©! Fin du quiz.");
        showResult();
        disableButtons();
      }
    }, 1000);
  }

  function updateTimerCircle() {
    timerText.textContent = formatTime(timeLeft);
    const rawTimeFraction = timeLeft / TIME_LIMIT;
    const circleDashoffset = FULL_DASH_ARRAY * (1 - rawTimeFraction);
    circle.style.strokeDashoffset = circleDashoffset;
    if(timeLeft <= 10) {
      circle.style.stroke = "#ff4444"; // rouge en fin de temps
      timerText.style.color = "#ff4444";
    }
  }

  function formatTime(time) {
    const minutes = Math.floor(time / 60);
    const seconds = time % 60;
    return `${minutes}:${seconds < 10 ? '0'+seconds : seconds}`;
  }

  // Ø¹Ø±Ø¶ Ø³Ø¤Ø§Ù„ Ø­Ø³Ø¨ currentIndex
  function showQuestion() {
    const q = questions[currentIndex];
    quizContainer.innerHTML = '';

    // ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø³Ø¤Ø§Ù„
    const box = document.createElement('div');
    box.className = 'question-box';
    // Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø¹ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    let emoji = '';
    if(q.type === 'qcm') emoji = 'ğŸ“';
    else if(q.type === 'qcs') emoji = 'ğŸ”˜';
    else if(q.type === 'vf') emoji = 'âœ…';

    box.innerHTML = `<div class="question-text">${emoji} ${currentIndex+1}. ${q.q}</div>`;

    const optionsDiv = document.createElement('div');
    optionsDiv.className = 'options';

    if(q.type === 'qcm') {
      // Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯ (checkbox)
      q.choices.forEach((choice, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="checkbox" name="answer" value="${i}" aria-label="${choice}"> ${choice}`;
        // Ù„Ùˆ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø³Ø§Ø¨Ù‚Ø§
        if(Array.isArray(answers[currentIndex]) && answers[currentIndex].includes(i)) {
          label.querySelector('input').checked = true;
        }
        optionsDiv.appendChild(label);
      });
    } else if(q.type === 'qcs') {
      // Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (radio)
      q.choices.forEach((choice, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="radio" name="answer" value="${i}" aria-label="${choice}"> ${choice}`;
        if(answers[currentIndex] === i) {
          label.querySelector('input').checked = true;
        }
        optionsDiv.appendChild(label);
      });
    } else if(q.type === 'vf') {
      // ØµØ­ / Ø®Ø·Ø£ (radio)
      ['Vrai', 'Faux'].forEach((choice, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="radio" name="answer" value="${i}" aria-label="${choice}"> ${choice}`;
        if(answers[currentIndex] === i) {
          label.querySelector('input').checked = true;
        }
        optionsDiv.appendChild(label);
      });
    }

    box.appendChild(optionsDiv);
    quizContainer.appendChild(box);

    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
    prevBtn.disabled = currentIndex === 0;
    nextBtn.style.display = currentIndex === questions.length -1 ? 'none' : 'inline-flex';
    submitBtn.style.display = currentIndex === questions.length -1 ? 'inline-flex' : 'none';

    // ØªØ£Ø«ÙŠØ± fade-in
    box.style.opacity = 0;
    setTimeout(() => { box.style.opacity = 1; }, 50);
  }

  // ØªØ®Ø²ÙŠÙ† Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  function saveAnswer() {
    const q = questions[currentIndex];
    let selected;

    if(q.type === 'qcm') {
      const checkedBoxes = [...document.querySelectorAll('input[name="answer"]:checked')].map(input => parseInt(input.value));
      answers[currentIndex] = checkedBoxes.length ? checkedBoxes : null;
    } else {
      const checkedRadio = document.querySelector('input[name="answer"]:checked');
      answers[currentIndex] = checkedRadio ? parseInt(checkedRadio.value) : null;
    }
  }

  // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª (QCM ÙŠØ¬Ø¨ ÙƒÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§ ÙÙ‚Ø·)
  function checkAnswer(index) {
    const q = questions[index];
    const userAns = answers[index];
    if(userAns === null) return false;

    if(q.type === 'qcm') {
      // Ø¬ÙˆØ§Ø¨ ØµØ­ÙŠØ­ Ù…ÙØªØ±Ø¶ Ø£Ù† ÙŠÙƒÙˆÙ† Ø±Ù‚Ù… ÙˆØ­ÙŠØ¯ ÙÙŠ q.answer ØŸ Ù„Ø§ØŒ Ù„Ø¯ÙŠÙ†Ø§ ÙÙ‚Ø· Ø±Ù‚Ù… ÙˆØ§Ø­Ø¯ ÙÙŠ q.answer ÙˆÙ‡Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙÙ‚Ø·
      // Ù„ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯: ÙÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø£Ø¹Ø·ÙŠØª answer Ø±Ù‚Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· => ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
      // Ù„Ø°Ù„Ùƒ ÙÙŠ Ù‡Ø°Ø§ ÙƒÙˆÙŠØ² ÙƒÙ„ QCM ÙŠØ­ØªÙˆÙŠ Ø¬ÙˆØ§Ø¨ ØµØ­ÙŠØ­ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· (Ù„Ù„ØªØ¨Ø³ÙŠØ·)
      return Array.isArray(userAns) && userAns.length === 1 && userAns[0] === q.answer;
    } else if(q.type === 'qcs') {
      return userAns === q.answer;
    } else if(q.type === 'vf') {
      return (userAns === 0 && q.answer === true) || (userAns === 1 && q.answer === false);
    }
    return false;
  }

  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
  function showResult() {
    clearInterval(timerInterval);
    saveAnswer();

    score = 0;
    let correctCount = 0;
    let total = questions.length;
    let resultHTML = `<h2>RÃ©sultats du quiz ğŸ†</h2>`;
    resultHTML += `<p>Nombre total de questions : <strong>${total}</strong></p>`;

    for(let i=0; i < total; i++) {
      if(checkAnswer(i)) {
        correctCount++;
      }
    }
    score = correctCount;

    resultHTML += `<p>Votre score est : <strong>${score} / ${total}</strong> (${((score/total)*100).toFixed(1)}%)</p>`;

    resultHTML += `<details style="margin-top: 15px; background: rgba(255 255 255 / 0.1); border-radius: 8px; padding: 10px; color: #ffd633;">
      <summary>Voir les dÃ©tails par question</summary>`;
    for(let i=0; i < total; i++) {
      const q = questions[i];
      const userCorrect = checkAnswer(i);
      let userAnswerText = '';
      if(answers[i] === null) userAnswerText = `<em>Pas rÃ©pondu</em>`;
      else {
        if(q.type === 'vf') {
          userAnswerText = answers[i] === 0 ? 'Vrai' : 'Faux';
        } else if(q.type === 'qcs') {
          userAnswerText = q.choices[answers[i]] ?? 'RÃ©ponse invalide';
        } else if(q.type === 'qcm') {
          userAnswerText = answers[i].map(a => q.choices[a]).join(', ');
        }
      }
      let correctAnswerText = '';
      if(q.type === 'vf') {
        correctAnswerText = q.answer ? 'Vrai' : 'Faux';
      } else {
        correctAnswerText = q.choices[q.answer];
      }

      resultHTML += `<p style="margin:8px 0;">
        <strong>Q${i+1}:</strong> ${q.q}<br>
        Votre rÃ©ponse: <span style="color:${userCorrect ? '#a3ff7a' : '#ff6b6b'}">${userAnswerText}</span><br>
        RÃ©ponse correcte: <strong>${correctAnswerText}</strong>
      </p>`;
    }
    resultHTML += `</details>`;

    document.getElementById('result').innerHTML = resultHTML;
    document.getElementById('result').style.display = 'block';

    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    quizContainer.style.display = 'none';
    prevBtn.style.display = 'none';
    nextBtn.style.display = 'none';
    submitBtn.style.display = 'none';
    timerText.style.display = 'none';
    circle.style.display = 'none';
  }

  // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
  function disableButtons() {
    prevBtn.disabled = true;
    nextBtn.disabled = true;
    submitBtn.disabled = true;
  }

  // Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
  prevBtn.addEventListener('click', () => {
    saveAnswer();
    if(currentIndex > 0) {
      currentIndex--;
      showQuestion();
    }
  });
  nextBtn.addEventListener('click', () => {
    saveAnswer();
    if(currentIndex < questions.length -1) {
      currentIndex++;
      showQuestion();
    }
  });
  submitBtn.addEventListener('click', () => {
    saveAnswer();
    showResult();
  });

  // Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
  showQuestion();
  startTimer();

</script>

</body>
</html>

