<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz ‚Äî Architecture √©gyptienne</title>
  <meta name="description" content="Quiz pour Histoire de l'Architecture ‚Äî Architecture √©gyptienne. 100 questions FR/EN, responsive." />
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* --- Design principal (conserve ton style) --- */
    :root{
      --accent:#06b6d4;
      --accent-2:#0ea5a4;
      --muted:#64748b;
      --card-bg:#fbfdff;
      --panel-bg:#ffffff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Rubik',sans-serif;
      background:#fff;
      color:#111;
      display:flex;
      min-height:100vh;
    }
    aside{
      width:240px;
      background:#f4f4f4;
      height:100vh;
      padding:20px;
      box-shadow:2px 0 5px rgba(0,0,0,.08);
      position:fixed;
      left:0;top:0;
      overflow:auto;
      transition:transform .25s ease;
      z-index:50;
    }
    aside.hidden{transform:translateX(-260px)}
    #toggleSidebar{
      position:fixed; left:20px; top:20px; z-index:1000;
      background:#111; color:#fff; border:0; padding:10px 14px; border-radius:8px; cursor:pointer;
    }
    .back-button{display:block; width:100%; margin-bottom:12px; background:#ddd; border:0; padding:10px; border-radius:8px; font-weight:600; text-align:center; cursor:pointer}
    .sidebar-header h2{margin-top:8px; font-size:18px}
    main{flex-grow:1; padding:30px; margin-left:240px; transition:margin-left .25s ease}
    aside.hidden ~ main{margin-left:0}
    .section-title{font-size:26px; margin-bottom:20px; color:#000}
    .lesson{margin-bottom:24px; background:linear-gradient(180deg,#fbfbfb 0,#fff 100%); padding:18px; border-radius:10px; box-shadow:0 6px 18px rgba(8,24,40,.05); border:1px solid rgba(15,23,42,.04)}
    .lesson h3{display:flex;justify-content:space-between;align-items:center;margin:0 0 8px 0;font-size:20px}
    .buttons{display:flex;gap:10px;align-items:center}
    .buttons button, .buttons a button{background:#fff;border:1px solid #e6e6e6;padding:8px 12px;border-radius:8px;cursor:pointer}
    footer{margin-top:40px;text-align:center;color:#888;font-size:13px}

    /* --- Modal quiz --- */
    .quiz-modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1200; background:rgba(2,6,23,0.55); padding:20px}
    .quiz-card{width:100%; max-width:980px; background:var(--panel-bg); border-radius:12px; overflow:hidden; box-shadow:0 24px 60px rgba(2,6,23,0.4); display:flex; flex-direction:column; animation:pop .14s ease}
    @keyframes pop{from{transform:translateY(8px) scale(.98);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}
    .quiz-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:linear-gradient(90deg,var(--accent-2),var(--accent)); color:#fff}
    .quiz-header .title{font-size:18px;font-weight:700}
    .quiz-controls{display:flex;gap:10px;align-items:center}
    .quiz-controls select, .quiz-controls input[type="checkbox"]{padding:8px;border-radius:8px;border:0;font-weight:600}
    .close-quiz{background:transparent;border:0;color:white;font-size:20px;cursor:pointer}

    /* fixed timer row below header but inside modal so always visible and not overlapping content */
    .quiz-timer{display:flex;justify-content:space-between;align-items:center;padding:10px 18px;background:#f8fafc;border-bottom:1px solid #eef2f7}
    .timer-box{display:flex;gap:10px;align-items:center}
    .timer{font-weight:800;font-size:18px;color:#0f172a;background:#e6f6f7;padding:6px 10px;border-radius:8px}
    .lang-indicator{font-size:14px;color:var(--muted)}

    .quiz-body{display:grid;grid-template-columns:1fr 320px;gap:18px;padding:18px;background:linear-gradient(180deg,#fff,#fbfdff)}
    .question-area{background:var(--card-bg);padding:16px;border-radius:10px;min-height:340px}
    .question-index{font-size:13px;color:var(--muted);margin-bottom:8px}
    .question-text{font-size:18px;color:#0f172a;margin-bottom:14px;line-height:1.4}
    .options{display:flex;flex-direction:column;gap:10px}
    .option{display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;border:1px solid #e6eef2;background:#fff;cursor:pointer}
    .option input{transform:scale(1.15)}
    .option.disabled{opacity:.6;pointer-events:none}

    .sidebar-panel{background:#fff;padding:14px;border-radius:10px;border:1px solid #eef6f9;height:100%}
    .meta{color:var(--muted);font-size:14px;margin-top:8px}
    .nav-buttons{display:flex;gap:10px;margin-top:14px}
    .btn{padding:10px 14px;border-radius:8px;background:var(--accent-2);color:#fff;border:0;cursor:pointer;font-weight:700}
    .btn.secondary{background:#e6eef2;color:#0f172a}
    .small{font-size:13px}
    .result{padding:18px}
    .answers-list{display:flex;flex-direction:column;gap:10px;max-height:320px;overflow:auto;margin-top:12px}
    .answer-item{background:#fcfcff;border:1px solid #eef2ff;padding:12px;border-radius:8px}
    .muted{color:var(--muted)}
    /* responsive */
    @media (max-width:880px){
      aside{width:220px}
      main{margin-left:0;padding:16px}
      .quiz-body{grid-template-columns:1fr}
      .quiz-card{max-width:96%}
      .quiz-header{flex-direction:column;gap:8px;align-items:flex-start}
      .quiz-timer{flex-direction:column;align-items:flex-start;gap:8px}
      .sidebar-panel{order:-1}
    }
  </style>
</head>
<body>
  <button id="toggleSidebar">‚ò∞ Menu</button>

  <aside class="sidebar" id="sidebar">
    <a href="sem1.html" class="back-button">üîô Retour √† Semestre 1</a>
    <button class="back-button" onclick="history.back()">üîô Retour</button>
    <div class="sidebar-header">
      <h2>üìö Ann√©e 1 - Semestre 1</h2>
    </div>
    <ul class="sidebar-menu">
      <li><a href="atelier1.html">üèóÔ∏è Atelier de projet 1</a></li>
      <li><a href="dca1.html">üìê DCA 1</a></li>
      <li><a href="dag1.html">üé® DAG 1</a></li>
      <li><a href="histoire1.html">üèõÔ∏è Histoire de l‚ÄôArchitecture 1</a></li>
      <li><a href="theorie1.html">üìò Th√©orie de projet 1</a></li>
      <li><a href="geometrie1.html">üìè G√©om√©trie de l‚Äôespace 1</a></li>
      <li><a href="tmc1.html">üß± TMC 1</a></li>
      <li><a href="math1.html">üßÆ Math√©matiques</a></li>
      <li><a href="expression1.html">üó£Ô∏è Expression orale</a></li>
      <li><a href="stage.html">üèûÔ∏è Stage d√©couverte 1</a></li>
      <hr>
      <li><a href="projets.html">üíº Projets</a></li>
      <li><a href="mailto:archispaceiya@gmail.com">üì© Contact</a></li>
    </ul>
  </aside>

  <main>
    <h1 class="section-title">üèõÔ∏è Histoire de l‚ÄôArchitecture 1</h1>

    <div class="lesson">
      <h3>
        <span>La pr√©histoire et les premiers refuges</span>
        <span><button class="quiz-open-btn" title="Quiz pr√©histoire" style="background:#06b6d4;color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600;">üìù Quiz</button></span>
      </h3>
      <div class="buttons">
        <a href="cours_1_prehistoire.pdf"><button>üìÑ PDF</button></a>
        <button>üé• Vid√©o</button>
        <button id="premiumButton1">‚≠ê Premium</button>
      </div>
    </div>

    <div class="lesson">
      <h3>
        <span>Architecture √©gyptienne</span>
        <span><button id="openEgyptQuiz" title="Quiz Egypte" style="background:#06b6d4;color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600;">üìù Quiz</button></span>
      </h3>
      <div class="buttons">
        <a href="Egyptian civilization ENG.pdf"><button>üìÑ PDF</button></a>
        <button>üé• Vid√©o</button>
        <button>‚≠ê Premium</button>
      </div>
    </div>

    <footer>¬© 2025 ArchiSpace ‚Äì Tous droits r√©serv√©s.</footer>
  </main>

  <!-- Quiz Modal (single modal used for Egyptian quiz) -->
  <div id="quizModal" class="quiz-modal" aria-hidden="true" role="dialog" aria-labelledby="quizTitle">
    <div class="quiz-card" role="document">
      <div class="quiz-header">
        <div class="title" id="quizTitle">Quiz ‚Äî Architecture √©gyptienne (Ancienne)</div>
        <div class="quiz-controls">
          <label class="lang-indicator small">Langue:
            <select id="langSelect" aria-label="Choisir la langue">
              <option value="fr">FR</option>
              <option value="en">EN</option>
            </select>
          </label>
          <label class="lang-indicator small">Type:
            <select id="typeSelect" aria-label="Choisir le type">
              <option value="ALL">Tous (mix)</option>
              <option value="QCM">QCM (choix multiples)</option>
              <option value="QCS">QCS (choix unique)</option>
              <option value="VF">Vrai / Faux</option>
            </select>
          </label>
          <label class="small"><input type="checkbox" id="shuffleCheckbox" checked> M√©langer</label>
          <button class="close-quiz" id="closeQuizBtn" title="Fermer">‚úï</button>
        </div>
      </div>

      <div class="quiz-timer">
        <div class="timer-box">
          <div class="muted small">Temps restant :</div>
          <div class="timer" id="timerDisplay">20:00</div>
        </div>
        <div class="lang-indicator small">S√©lection: <span id="selectedLang">FR</span> ¬∑ <span id="selectedTypeText">Tous</span></div>
      </div>

      <div class="quiz-body">
        <div class="question-area">
          <div class="question-index" id="questionIndex">Question ‚Äî</div>
          <div class="question-text" id="questionText">Choisissez la langue et le type puis appuyez sur "D√©marrer".</div>

          <div class="options" id="optionsContainer"></div>

          <div class="nav-buttons">
            <button class="btn secondary" id="prevBtn" disabled>‚óÄ Pr√©c√©dent</button>
            <button class="btn secondary" id="nextBtn" disabled>Suivant ‚ñ∂</button>
            <button class="btn" id="startBtn">D√©marrer</button>
            <button class="btn" id="submitBtn" style="display:none;">Soumettre</button>
          </div>
        </div>

        <div class="sidebar-panel">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div style="font-size:13px;color:var(--muted)">Timer</div>
              <div class="timer" id="miniTimer">20:00</div>
            </div>
            <div style="text-align:right;">
              <div style="font-size:13px;color:var(--muted)">Score</div>
              <div style="font-weight:800;font-size:18px" id="scoreDisplay">0</div>
            </div>
          </div>

          <div class="meta">
            <div>Type: <b id="selectedType">‚Äî</b></div>
            <div style="margin-top:8px;">Questions totales: <b id="totalQuestions">100</b></div>
            <div style="margin-top:6px;">Question actuelle: <b id="currentNumber">0</b></div>
            <div style="margin-top:8px;">R√©essayer fautes: <input type="checkbox" id="retryWrong" checked></div>
            <div style="margin-top:8px;">Bar√®me: +1 correct, ‚àí1 incorrect, 0 non r√©pondu</div>
            <div style="margin-top:8px;">Astuce: pour QCM cochez toutes les cases correctes.</div>
          </div>

          <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="endEarlyBtn">Finir maintenant</button>
            <button class="btn secondary" id="resetBtn">R√©initialiser</button>
          </div>

          <div style="margin-top:12px;font-size:13px;color:var(--muted)">
            <div>Navigation: utilisez ‚óÄ / ‚ñ∂ ou les boutons.</div>
            <div style="margin-top:8px">Apr√®s soumission : affichage d√©taill√© + option reprise fautes.</div>
          </div>
        </div>
      </div>

      <div id="resultArea" style="display:none;" class="result">
        <h3 id="resultTitle">R√©sultat</h3>
        <div id="resultSummary"></div>
        <div class="answers-list" id="answersList"></div>
        <div style="margin-top:14px;display:flex;gap:10px">
          <button class="btn" id="retryBtn">Reprendre les questions incorrectes</button>
          <button class="btn secondary" id="closeResultBtn">Fermer</button>
        </div>
      </div>

    </div>
  </div>

  <script>
    /* Sidebar toggle */
    const sidebar = document.getElementById('sidebar');
    document.getElementById('toggleSidebar').addEventListener('click', () => sidebar.classList.toggle('hidden'));

    /* Modal open/close toggle (same button toggles) */
    const openEgyptQuizBtn = document.getElementById('openEgyptQuiz');
    const quizModal = document.getElementById('quizModal');
    const closeQuizBtn = document.getElementById('closeQuizBtn');
    const startBtn = document.getElementById('startBtn');
    const submitBtn = document.getElementById('submitBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const optionsContainer = document.getElementById('optionsContainer');
    const questionText = document.getElementById('questionText');
    const questionIndex = document.getElementById('questionIndex');
    const timerDisplay = document.getElementById('timerDisplay');
    const miniTimer = document.getElementById('miniTimer');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const selectedLangSpan = document.getElementById('selectedLang');
    const selectedTypeSpan = document.getElementById('selectedTypeText');
    const totalQuestionsLabel = document.getElementById('totalQuestions');
    const currentNumberLabel = document.getElementById('currentNumber');
    const selectedTypeBadge = document.getElementById('selectedType');
    const langSelect = document.getElementById('langSelect');
    const typeSelect = document.getElementById('typeSelect');
    const shuffleCheckbox = document.getElementById('shuffleCheckbox');
    const retryBtn = document.getElementById('retryBtn');
    const resultArea = document.getElementById('resultArea');
    const resultSummary = document.getElementById('resultSummary');
    const answersList = document.getElementById('answersList');
    const retryWrongInput = document.getElementById('retryWrong');
    const endEarlyBtn = document.getElementById('endEarlyBtn');
    const resetBtn = document.getElementById('resetBtn');
    const closeResultBtn = document.getElementById('closeResultBtn');

    // Toggle modal open/close using the Egypt quiz button
    document.getElementById('openEgyptQuiz').addEventListener('click', () => {
      if (quizModal.style.display === 'flex') closeQuiz();
      else openQuiz();
    });
    // Also allow the prehistoire quiz button to toggle same modal for demo (not loaded)
    document.querySelectorAll('.quiz-open-btn').forEach(b=>b.addEventListener('click', openQuiz));

    // click outside to close
    quizModal.addEventListener('click', (e) => {
      if (e.target === quizModal) closeQuiz();
    });
    closeQuizBtn.addEventListener('click', closeQuiz);
    closeResultBtn.addEventListener('click', closeQuiz);

    function openQuiz(){
      quizModal.style.display = 'flex';
      quizModal.setAttribute('aria-hidden','false');
      // default UI state
      langSelect.value = 'fr';
      typeSelect.value = 'ALL';
      selectedLangSpan.textContent = langSelect.value.toUpperCase();
      selectedTypeSpan.textContent = 'Tous';
      resetQuizState();
      renderInfo();
    }
    function closeQuiz(){
      quizModal.style.display = 'none';
      quizModal.setAttribute('aria-hidden','true');
      stopTimer();
      resultArea.style.display = 'none';
    }

    /* ---------------- Questions data (100 unique questions) ----------------
       Each question object structure:
       {
         id: 'q1',
         type: 'QCM'|'QCS'|'VF',
         fr: 'question text in French',
         en: 'question text in English',
         options: [{fr:'...', en:'...'}, ...], // For VF use options ["Vrai","Faux"] / ["True","False"]
         answer: [indices] // array of correct indices (single for QCS/VF)
       }
       NOTE: no duplicates, unique ids q1..q100
    */
    const allQuestions = [
      /* ---------- QCM 1..45 (45 items) - multiple correct ---------- */
      { id:'q1', type:'QCM',
        fr:'Quels mat√©riaux √©taient couramment employ√©s pour la construction des murs dans l‚Äô√âgypte ancienne ?',
        en:'Which materials were commonly used for wall construction in ancient Egypt?',
        options:[
          {fr:'Pierre calcaire', en:'Limestone'},
          {fr:'Brique crue (adobe)', en:'Mudbrick (adobe)'},
          {fr:'Bois massif (structure portante)', en:'Solid timber (load-bearing)'},
          {fr:'B√©ton arm√©', en:'Reinforced concrete'}
        ], answer:[0,1]
      },
      { id:'q2', type:'QCM',
        fr:'Quelles techniques utilisaient les √âgyptiens pour d√©placer de grosses pierres ?',
        en:'Which techniques did Egyptians use to move large stones?',
        options:[
          {fr:'Rampes et tra√Æneaux', en:'Ramps and sledges'},
          {fr:'Palans hydrauliques', en:'Hydraulic cranes'},
          {fr:'Lubrification des sols (eau)', en:'Lubricating the ground (water)'},
          {fr:'Transport a√©rien', en:'Air transport'}
        ], answer:[0,2]
      },
      { id:'q3', type:'QCM',
        fr:'Quelles fonctions remplissaient les hypog√©es et mastabas ?',
        en:'What functions did hypogea and mastabas serve?',
        options:[
          {fr:'S√©pultures', en:'Burials'},
          {fr:'Lieux de culte pour les vivants', en:'Places of worship for the living'},
          {fr:'Stockage de provisions', en:'Storage of provisions'},
          {fr:'Habitat r√©sidentiel moderne', en:'Modern residential housing'}
        ], answer:[0,1,2]
      },
      { id:'q4', type:'QCM',
        fr:'Quelles sont les caract√©ristiques d‚Äôune pyramide √† degr√©s (ex : Dj√©ser) ?',
        en:'What are characteristics of a step pyramid (e.g. Djoser)?',
        options:[
          {fr:'Forme en terrasses superpos√©es', en:'Terraced, stacked form'},
          {fr:'Structure enti√®rement monolithique en acier', en:'Entirely monolithic steel structure'},
          {fr:'Chambres fun√©raires souterraines', en:'Underground burial chambers'},
          {fr:'Syst√®me axial de procession', en:'Axial processional way'}
        ], answer:[0,2,3]
      },
      { id:'q5', type:'QCM',
        fr:'Quels outils ou savoir-faire √©taient essentiels dans la taille des pierres ?',
        en:'Which tools or skills were essential in stone cutting?',
        options:[
          {fr:'Coins et maillets en bois et cuivre', en:'Wedges and mallets (wood & copper)'},
          {fr:'Scies en acier modernes', en:'Modern steel saws'},
          {fr:'Abrasion avec sable et eau', en:'Abrasion with sand and water'},
          {fr:'Soudure laser', en:'Laser welding'}
        ], answer:[0,2]
      },
      { id:'q6', type:'QCM',
        fr:'Parmi ces √©l√©ments, lesquels sont des types de colonnes √©gyptiennes ?',
        en:'Which of these are Egyptian column types?',
        options:[
          {fr:'Papyriforme', en:'Papyriform'},
          {fr:'Doric', en:'Doric'},
          {fr:'Lotiforme', en:'Lotiform'},
          {fr:'Hathorique', en:'Hathoric'}
        ], answer:[0,2,3]
      },
      { id:'q7', type:'QCM',
        fr:'Les temples √©gyptiens pr√©sentent souvent quelle organisation spatiale ?',
        en:'Egyptian temples often present which spatial organization?',
        options:[
          {fr:'Axe central menant au sanctuaire', en:'Central axis to the sanctuary'},
          {fr:'Plan libre contemporain', en:'Contemporary open plan'},
          {fr:'Salle hypostyle', en:'Hypostyle hall'},
          {fr:'Orientation astronomique/solaire', en:'Astronomical/solar orientation'}
        ], answer:[0,2,3]
      },
      { id:'q8', type:'QCM',
        fr:'Quels √©l√©ments architecturaux servaient √† la symbolique religieuse ?',
        en:'Which architectural elements served religious symbolism?',
        options:[
          {fr:'Ob√©lisques', en:'Obelisks'},
          {fr:'Statues colossales', en:'Colossal statues'},
          {fr:'Fen√™tres en verre color√©', en:'Stained glass windows'},
          {fr:'Cour √† ciel ouvert', en:'Open courtyards'}
        ], answer:[0,1,3]
      },
      { id:'q9', type:'QCM',
        fr:'Quelles m√©thodes assuraient la stabilit√© des grandes pierres ?',
        en:'Which methods ensured stability of large stones?',
        options:[
          {fr:'Encoches et tenons', en:'Notches and tenons'},
          {fr:'Mortier √† base d‚Äôargile', en:'Mud-based mortar'},
          {fr:'Vis et boulons en acier', en:'Steel screws and bolts'},
          {fr:'Pose sur lits de sable compact√©', en:'Placement on compacted sand beds'}
        ], answer:[0,1,3]
      },
      { id:'q10', type:'QCM',
        fr:'Dans l‚Äôarchitecture fun√©raire, quels sont des √©l√©ments standards ?',
        en:'In funerary architecture, which are standard elements?',
        options:[
          {fr:'Chapelle fun√©raire', en:'Mortuary chapel'},
          {fr:'Serdab', en:'Serdab (statue chamber)'},
          {fr:'Narthex occidental', en:'Western narthex'},
          {fr:'Puits d‚Äôacc√®s', en:'Shaft/pit access'}
        ], answer:[0,1,3]
      },
      { id:'q11', type:'QCM',
        fr:'Quelles techniques de levage sont document√©es dans l‚Äô√âgypte ancienne ?',
        en:'Which lifting techniques are documented in ancient Egypt?',
        options:[
          {fr:'Levier et bascule', en:'Levers and seesaws'},
          {fr:'Rampes d‚Äô√©l√©vation', en:'Raising ramps'},
          {fr:'Treuils modernes √©lectriques', en:'Modern electric winches'},
          {fr:'Syst√®mes de contrepoids rudimentaires', en:'Primitive counterweight systems'}
        ], answer:[0,1,3]
      },
      { id:'q12', type:'QCM',
        fr:'Quelles r√©f√©rences dimensionnelles employaient-ils souvent ?',
        en:'Which dimensional references did they often use?',
        options:[
          {fr:'Le coude royal (coud√©e)', en:'Royal cubit'},
          {fr:'Mesures en m√®tres', en:'Meters (modern)'},
          {fr:'Unit√©s proportionnelles bas√©es sur le corps', en:'Body-based proportional units'},
          {fr:'Syst√®me imp√©rial anglais', en:'Imperial system'}
        ], answer:[0,2]
      },
      { id:'q13', type:'QCM',
        fr:'Quelles surfaces √©taient privil√©gi√©es pour les sols et cours ?',
        en:'Which surfaces were favored for floors and courtyards?',
        options:[
          {fr:'Dallage en pierre', en:'Stone paving'},
          {fr:'Sols en terre battue', en:'Packed earth floors'},
          {fr:'Parquet en bois lamell√©', en:'Engineered wood floors'},
          {fr:'Rev√™tement en marbre poli', en:'Polished marble'}
        ], answer:[0,1]
      },
      { id:'q14', type:'QCM',
        fr:'Quels motifs ornaient fr√©quemment les chapiteaux √©gyptiens ?',
        en:'Which motifs frequently adorned Egyptian capitals?',
        options:[
          {fr:'Fleurs de lotus', en:'Lotus flowers'},
          {fr:'Feuilles de papyrus', en:'Papyrus leaves'},
          {fr:'Motifs corinthiens europ√©ens', en:'European Corinthian motifs'},
          {fr:'T√™tes de d√©esses (Hathor)', en:'Hathor-headed capitals'}
        ], answer:[0,1,3]
      },
      { id:'q15', type:'QCM',
        fr:'Quelles consid√©rations climatiques influen√ßaient l‚Äôorientation des b√¢timents ?',
        en:'Which climatic considerations influenced building orientation?',
        options:[
          {fr:'Protection solaire', en:'Sun protection'},
          {fr:'Vent dominante pour ventilation', en:'Prevailing winds for ventilation'},
          {fr:'Orientation vers p√¥le magn√©tique', en:'Orientation to magnetic pole'},
          {fr:'Ombres et cours ombrag√©es', en:'Shaded courtyards'}
        ], answer:[0,1,3]
      },
      { id:'q16', type:'QCM',
        fr:'Quels proc√©d√©s √©taient utilis√©s pour prot√©ger contre l‚Äôhumidit√© ?',
        en:'Which methods were used to protect against moisture?',
        options:[
          {fr:'Relev√©s de fondation', en:'Raised foundations'},
          {fr:'Enduits hydrophobes primaires', en:'Primitive waterproof coatings'},
          {fr:'Syst√®mes modernes de drainage', en:'Modern drainage systems'},
          {fr:'Sols en pierre sur lit de gravier', en:'Stone floors on gravel beds'}
        ], answer:[0,1,3]
      },
      { id:'q17', type:'QCM',
        fr:'Quelles fonctions remplissaient les colonnades dans les temples ?',
        en:'What functions did colonnades serve in temples?',
        options:[
          {fr:'Support de toiture', en:'Roof support'},
          {fr:'Diss√©miner lumi√®re et ombre', en:'Distribute light and shade'},
          {fr:'D√©limiter espace sacr√©', en:'Define sacred space'},
          {fr:'Servir de galeries commerciales', en:'Serve as commercial galleries'}
        ], answer:[0,1,2]
      },
      { id:'q18', type:'QCM',
        fr:'Quels types de vo√ªtes ou structures de couverture utilisaient-ils ?',
        en:'Which vault or roofing structures did they use?',
        options:[
          {fr:'Toit √† poutres et solives (hypostyle)', en:'Beam-and-joist roofs (hypostyle)'},
          {fr:'Vo√ªte en berceau romaine', en:'Roman barrel vault'},
          {fr:'D√¥mes ma√ßonn√©s', en:'Masonry domes'},
          {fr:'Toits plats en roseau et argile', en:'Flat reed-and-clay roofs'}
        ], answer:[0,3]
      },
      { id:'q19', type:'QCM',
        fr:'Quelles raisons expliquent l‚Äôemploi massif de la pierre pour monuments fun√©raires ?',
        en:'Why was stone massively used for funerary monuments?',
        options:[
          {fr:'Durabilit√©', en:'Durability'},
          {fr:'Signification symbolique d‚Äô√©ternit√©', en:'Symbolic meaning of eternity'},
          {fr:'Facilit√© d‚Äôassemblage rapide', en:'Ease of quick assembly'},
          {fr:'Raret√© des autres mat√©riaux', en:'Scarcity of other materials'}
        ], answer:[0,1]
      },
      { id:'q20', type:'QCM',
        fr:'Quels √©l√©ments faisaient partie du complexe fun√©raire autour d‚Äôune pyramide ?',
        en:'What elements were part of a pyramid funerary complex?',
        options:[
          {fr:'Temple mortuaire', en:'Mortuary temple'},
          {fr:'Chauss√©e processionale', en:'Processional causeway'},
          {fr:'Portail romain', en:'Roman gate'},
          {fr:'Temple fun√©raire de la vall√©e', en:'Valley temple'}
        ], answer:[0,1,3]
      },
      { id:'q21', type:'QCM',
        fr:'Quelles op√©rations de pr√©paration du site sont attest√©es ?',
        en:'What site preparation operations are attested?',
        options:[
          {fr:'Nivellement et compactage', en:'Leveling and compaction'},
          {fr:'Piquetage et tra√ßage axial', en:'Staking and axial layout'},
          {fr:'Excavation de carri√®res locales', en:'Excavation of local quarries'},
          {fr:'Injection de fondations modernes', en:'Injection of modern foundations'}
        ], answer:[0,1,2]
      },
      { id:'q22', type:'QCM',
        fr:'Quelles sont des sources principales pour conna√Ætre leurs techniques constructives ?',
        en:'What are primary sources to understand their construction techniques?',
        options:[
          {fr:'Reliefs et peintures murales', en:'Reliefs and wall paintings'},
          {fr:'Textes et papyrus techniques', en:'Technical papyri and texts'},
          {fr:'Fouilles arch√©ologiques (outils, rampes)', en:'Archaeological excavations (tools, ramps)'},
          {fr:'Photographies a√©riennes modernes uniquement', en:'Only modern aerial photos'}
        ], answer:[0,1,2]
      },
      { id:'q23', type:'QCM',
        fr:'Quelles fonctions avaient les salles hypostyles ?',
        en:'What functions did hypostyle halls have?',
        options:[
          {fr:'Espace de rassemblement c√©r√©moniel', en:'Ceremonial gathering space'},
          {fr:'Support structurel pour toitures vastes', en:'Structural support for large roofs'},
          {fr:'Salle d‚Äôhabitation', en:'Residential hall'},
          {fr:'Ambiance de p√©nombre sacr√©e', en:'Sacred dimness atmosphere'}
        ], answer:[0,1,3]
      },
      { id:'q24', type:'QCM',
        fr:'Parmi ces mesures, lesquelles sont li√©es au module de la coud√©e ?',
        en:'Which measures are related to the cubit module?',
        options:[
          {fr:'Proportions pour colonnes', en:'Column proportions'},
          {fr:'Hauteur de portes et linteaux', en:'Door and lintel heights'},
          {fr:'Distances en kilom√®tres', en:'Distances in kilometers'},
          {fr:'Dimensions de la chambre fun√©raire', en:'Burial chamber dimensions'}
        ], answer:[0,1,3]
      },
      { id:'q25', type:'QCM',
        fr:'Quelles op√©rations de finition d√©corative utilisaient-ils ?',
        en:'Which finishing and decorative operations did they use?',
        options:[
          {fr:'Polissage de la pierre', en:'Stone polishing'},
          {fr:'Peinture sur enduit', en:'Painting on plaster'},
          {fr:'Placage d‚Äôor et incrustations', en:'Gilding and inlays'},
          {fr:'Rev√™tement en plastique', en:'Plastic cladding'}
        ], answer:[0,1,2]
      },
      { id:'q26', type:'QCM',
        fr:'Quels types de fondations √©taient employ√©s selon le sol ?',
        en:'Which foundation types were used based on soil?',
        options:[
          {fr:'Assises sur lit de gravier', en:'Beds on gravel layers'},
          {fr:'Assises sur sol compact√©', en:'Beds on compacted soil'},
          {fr:'Fondations sur pieux modernes', en:'Modern pile foundations'},
          {fr:'Socles en pierre massive', en:'Massive stone plinths'}
        ], answer:[0,1,3]
      },
      { id:'q27', type:'QCM',
        fr:'Quelles fonctions assurait l‚Äôorientation astronomique des temples ?',
        en:'What functions did temples\' astronomical orientation serve?',
        options:[
          {fr:'Marquer solstices/√©quinoxes', en:'Mark solstices/equinoxes'},
          {fr:'Aligner la procession solaire', en:'Align processional solar path'},
          {fr:'Calculer longueurs en m√®tres', en:'Calculate lengths in meters'},
          {fr:'Rituels calendaires', en:'Calendar rituals'}
        ], answer:[0,1,3]
      },
      { id:'q28', type:'QCM',
        fr:'Quelles sont des raisons d‚Äôutiliser le calcaire pr√®s du Nil ?',
        en:'Why use limestone near the Nile?',
        options:[
          {fr:'Disponibilit√© locale', en:'Local availability'},
          {fr:'Facilit√© de taille', en:'Ease of carving'},
          {fr:'Grande r√©sistance structurelle', en:'High structural strength'},
          {fr:'Transparence optique', en:'Optical transparency'}
        ], answer:[0,1,2]
      },
      { id:'q29', type:'QCM',
        fr:'Quelles composantes font partie d‚Äôun plan axial √©gyptien classique ?',
        en:'Which components are part of a classic Egyptian axial plan?',
        options:[
          {fr:'Entr√©e monumentale (pyl√¥ne)', en:'Monumental entrance (pylon)'},
          {fr:'Cour √† portiques', en:'Columned courtyard'},
          {fr:'Salle hypostyle', en:'Hypostyle hall'},
          {fr:'Atrium romain', en:'Roman atrium'}
        ], answer:[0,1,2]
      },
      { id:'q30', type:'QCM',
        fr:'Quelles pratiques d‚Äôalignement utilisaient-ils pour grands axes ?',
        en:'Which alignment practices were used for major axes?',
        options:[
          {fr:'Vis√©e astronomique (√©toile)', en:'Astronomical sighting (star)'},
          {fr:'Cordeau et piquets', en:'Cord and pegs'},
          {fr:'Lasers modernes', en:'Modern lasers'},
          {fr:'Observation du soleil levant', en:'Observation of sunrise'}
        ], answer:[0,1,3]
      },
      { id:'q31', type:'QCM',
        fr:'Quels usages avaient les portiques dans les complexes ?',
        en:'What were colonnades used for in complexes?',
        options:[
          {fr:'Circulation abrit√©e', en:'Sheltered circulation'},
          {fr:'Lieu d‚Äôexposition rituelle', en:'Ritual exhibition space'},
          {fr:'Stockage d‚Äôeau potable', en:'Potable water storage'},
          {fr:'D√©gagement d‚Äôespaces ombrag√©s', en:'Creation of shaded spaces'}
        ], answer:[0,1,3]
      },
      { id:'q32', type:'QCM',
        fr:'Quelles sont des caract√©ristiques des linteaux √©gyptiens ?',
        en:'What are characteristics of Egyptian lintels?',
        options:[
          {fr:'Pi√®ces horizontales massives', en:'Massive horizontal members'},
          {fr:'Souvent en pierre taill√©e', en:'Often carved from stone'},
          {fr:'Suspension avec c√¢bles', en:'Suspension by cables'},
          {fr:'Un r√¥le porteur crucial', en:'Crucial load-bearing role'}
        ], answer:[0,1,3]
      },
      { id:'q33', type:'QCM',
        fr:'Quelles techniques de finition g√©om√©trique sont utilis√©es sur les murs ?',
        en:'Which geometric finishing techniques were used on walls?',
        options:[
          {fr:'Nivellation pr√©cise des assises', en:'Precise leveling of courses'},
          {fr:'Traitement altern√© de bossage', en:'Alternating bossage treatment'},
          {fr:'Enduits peints avec motifs', en:'Painted plaster with motifs'},
          {fr:'Rev√™tement en tuiles industrielles', en:'Industrial tile cladding'}
        ], answer:[0,1,2]
      },
      { id:'q34', type:'QCM',
        fr:'Quels outils servaient au polissage de la pierre ?',
        en:'What tools were used for stone polishing?',
        options:[
          {fr:'Sable fin et eau', en:'Fine sand and water'},
          {fr:'Pierre abrasive', en:'Abrasive stones'},
          {fr:'Disques diamant√©s modernes', en:'Modern diamond discs'},
          {fr:'Peaux et cires organiques', en:'Organic skins and waxes'}
        ], answer:[0,1,3]
      },
      { id:'q35', type:'QCM',
        fr:'Quelles m√©thodes √©taient utilis√©es pour assurer l‚Äôalignement vertical des colonnes ?',
        en:'Which methods were used to ensure vertical alignment of columns?',
        options:[
          {fr:'Cordeau vertical et fil √† plomb', en:'Plumb line and vertical cord'},
          {fr:'√âchafaudages et gabarits', en:'Scaffolding and templates'},
          {fr:'Nivellement laser', en:'Laser leveling'},
          {fr:'Utilisation de mortaises', en:'Use of mortises'}
        ], answer:[0,1,3]
      },
      { id:'q36', type:'QCM',
        fr:'Pourquoi la navigation fluviale √©tait-elle importante pour la construction ?',
        en:'Why was river navigation important for construction?',
        options:[
          {fr:'Transport des blocs lourds', en:'Transport of heavy blocks'},
          {fr:'Approvisionnement en mat√©riaux', en:'Supply of materials'},
          {fr:'D√©placement des ouvriers', en:'Movement of workers'},
          {fr:'√âvacuation des d√©chets modernes', en:'Removal of modern waste'}
        ], answer:[0,1,2]
      },
      { id:'q37', type:'QCM',
        fr:'Quelles sont des caract√©ristiques du pyl√¥ne d‚Äôentr√©e ?',
        en:'What are characteristics of the entrance pylon?',
        options:[
          {fr:'Deux tours massives s√©parant l‚Äôentr√©e', en:'Two massive towers flanking the entrance'},
          {fr:'Surface d√©cor√©e de bas-reliefs', en:'Surface decorated with bas-reliefs'},
          {fr:'Ouvertures vitr√©es modernes', en:'Modern glazed openings'},
          {fr:'Fonction symbolique et d√©fensive', en:'Symbolic and defensive function'}
        ], answer:[0,1,3]
      },
      { id:'q38', type:'QCM',
        fr:'Quelles pratiques d‚Äô√©clairage int√©rieur utilisaient-ils ?',
        en:'Which interior lighting practices did they use?',
        options:[
          {fr:'Coupoles et puits de lumi√®re', en:'Domes and light wells'},
          {fr:'Fentes d‚Äô√©clairage axial', en:'Axial lighting slits'},
          {fr:'√âclairage √©lectrique', en:'Electric lighting'},
          {fr:'Ouvertures en haut des murs', en:'High wall openings'}
        ], answer:[0,1,3]
      },
      { id:'q39', type:'QCM',
        fr:'Quelles caract√©ristiques des statues colossales ?',
        en:'What characteristics of colossal statues?',
        options:[
          {fr:'Ancrage sur socle massif', en:'Anchoring on a massive plinth'},
          {fr:'Proportions hi√©rarchiques', en:'Hierarchical proportions'},
          {fr:'Usage de mat√©riaux l√©gers modernes', en:'Use of modern lightweight materials'},
          {fr:'Fonction votive et comm√©morative', en:'Votive and commemorative function'}
        ], answer:[0,1,3]
      },
      { id:'q40', type:'QCM',
        fr:'Quelles m√©thodes utilisaient-ils pour cr√©er surfaces lisses et faces g√©om√©triques ?',
        en:'Which methods were used to create smooth surfaces and geometric faces?',
        options:[
          {fr:'Rabots et meules abrasives', en:'Planes and abrasive mills'},
          {fr:'Lixiviation chimique', en:'Chemical leaching'},
          {fr:'Cales et coins pour fracturation contr√¥l√©e', en:'Wedges and shims for controlled splitting'},
          {fr:'Polissage au sable fin', en:'Fine sand polishing'}
        ], answer:[0,2,3]
      },
      { id:'q41', type:'QCM',
        fr:'Quels crit√®res d√©terminent l‚Äôemplacement d‚Äôun temple ?',
        en:'What criteria determine the siting of a temple?',
        options:[
          {fr:'Rapport au Nil et voies fluviales', en:'Relation to Nile and waterways'},
          {fr:'Orientation rituelle', en:'Ritual orientation'},
          {fr:'Proximit√© de carri√®res', en:'Proximity to quarries'},
          {fr:'Acc√®s routier moderne', en:'Modern road access'}
        ], answer:[0,1,2]
      },
      { id:'q42', type:'QCM',
        fr:'Quelles pratiques rendaient un espace sacr√© distinct ?',
        en:'Which practices made a space distinctively sacred?',
        options:[
          {fr:'S√©paration par pyl√¥nes et portiques', en:'Separation by pylons and porticoes'},
          {fr:'Progression vers des espaces de plus en plus intimes', en:'Progression to more intimate spaces'},
          {fr:'Usage de portes vitr√©es', en:'Use of glazed doors'},
          {fr:'D√©cors iconographiques sp√©cifiques', en:'Specific iconographic decoration'}
        ], answer:[0,1,3]
      },
      { id:'q43', type:'QCM',
        fr:'Quelles techniques employaient-ils pour assurer les joints entre pierres ?',
        en:'Which techniques were used to secure joints between stones?',
        options:[
          {fr:'Chocs et ajustements √† la taille', en:'Fitting by chipping and dressing'},
          {fr:'Clavettes m√©talliques', en:'Metal clamps'},
          {fr:'Mortier moderne √† la chaux', en:'Modern lime mortar'},
          {fr:'Plugs en bois gonflant', en:'Wooden plugs that swell'}
        ], answer:[0,1,3]
      },
      { id:'q44', type:'QCM',
        fr:'Quels types d‚Äôespaces mesurables distinguaient les temples ?',
        en:'Which measurable spaces distinguished temples?',
        options:[
          {fr:'Cours ouvertes', en:'Open courtyards'},
          {fr:'Salles hypostyles', en:'Hypostyle halls'},
          {fr:'Sanctuaires clos', en:'Enclosed sanctuaries'},
          {fr:'Nef centrale gothique', en:'Gothic central nave'}
        ], answer:[0,1,2]
      },
      { id:'q45', type:'QCM',
        fr:'Quels proc√©d√©s √©taient employ√©s pour la d√©coration pigment√©e ?',
        en:'Which processes were employed for painted decoration?',
        options:[
          {fr:'Pigments min√©raux broy√©s', en:'Ground mineral pigments'},
          {fr:'S√©chage au soleil et couche d‚Äôattente', en:'Sun-drying and intermediary layers'},
          {fr:'Peinture √† l‚Äôhuile', en:'Oil painting'},
          {fr:'Application sur enduit frais', en:'Application on fresh plaster (fresco-like)'}
        ], answer:[0,1,3]
      },

      /* ---------- QCS 46..80 (35 items) single choice ---------- */
      { id:'q46', type:'QCS',
        fr:'Quel mat√©riau compose principalement la Grande Pyramide de Gizeh (Kh√©ops) ?',
        en:'What material mainly composes the Great Pyramid of Khufu (Cheops)?',
        options:[
          {fr:'Granite', en:'Granite'},
          {fr:'Calcaire', en:'Limestone'},
          {fr:'Marbre', en:'Marble'},
          {fr:'Brique crue', en:'Mudbrick'}
        ], answer:[1]
      },
      { id:'q47', type:'QCS',
        fr:'Quel architecte est traditionnellement associ√© √† la pyramide √† degr√©s de Dj√©ser ?',
        en:'Which architect is traditionally associated with the Step Pyramid of Djoser?',
        options:[
          {fr:'Imhotep', en:'Imhotep'},
          {fr:'Senmut', en:'Senmut'},
          {fr:'Hemiunu', en:'Hemiunu'},
          {fr:'Imhot', en:'Imhot'}
        ], answer:[0]
      },
      { id:'q48', type:'QCS',
        fr:'Quel ordre de colonne est sp√©cifique √† l‚Äô√âgypte antique (bas√© sur v√©g√©taux) ?',
        en:'Which column order is specific to ancient Egypt (plant-based)?',
        options:[
          {fr:'Corinthien', en:'Corinthian'},
          {fr:'Ionique', en:'Ionic'},
          {fr:'Papyriforme', en:'Papyriform'},
          {fr:'Toscan', en:'Tuscan'}
        ], answer:[2]
      },
      { id:'q49', type:'QCS',
        fr:'Quel √©l√©ment marque typiquement l‚Äôentr√©e principale d‚Äôun temple √©gyptien ?',
        en:'What element typically marks the main entrance of an Egyptian temple?',
        options:[
          {fr:'Pyl√¥ne', en:'Pylon'},
          {fr:'√âdicule baroque', en:'Baroque edicule'},
          {fr:'Atrium romain', en:'Roman atrium'},
          {fr:'Loggia italienne', en:'Italian loggia'}
        ], answer:[0]
      },
      { id:'q50', type:'QCS',
        fr:'Quel mat√©riau √©tait souvent utilis√© pour les colonnes int√©rieures destin√©es au polissage fin ?',
        en:'What material was often used for inner columns intended for fine polishing?',
        options:[
          {fr:'Granit', en:'Granite'},
          {fr:'Bois tendre', en:'Softwood'},
          {fr:'Brique cuite', en:'Fired brick'},
          {fr:'Pl√¢tre', en:'Plaster'}
        ], answer:[0]
      },
      { id:'q51', type:'QCS',
        fr:'Quel type de chapiteau imite une corolle de fleur repli√©e (forme ferm√©e) ?',
        en:'Which capital imitates a folded flower corolla (closed form)?',
        options:[
          {fr:'Papyriforme ouvert', en:'Open papyriform'},
          {fr:'Papyriforme ferm√© (papyriforme ferm√©e)', en:'Closed papyriform'},
          {fr:'Lotiforme', en:'Lotiform'},
          {fr:'Hathorique', en:'Hathoric'}
        ], answer:[1]
      },
      { id:'q52', type:'QCS',
        fr:'Quel r√¥le avait le "serdab" dans une tombe √©gyptienne ?',
        en:'What role did the "serdab" have in an Egyptian tomb?',
        options:[
          {fr:'Chambre pour les statues des morts', en:'Chamber for the statue of the deceased'},
          {fr:'R√©serve d‚Äôeau', en:'Water reserve'},
          {fr:'Salle de banquet', en:'Banquet hall'},
          {fr:'Atelier d‚Äôartisan', en:'Artisan workshop'}
        ], answer:[0]
      },
      { id:'q53', type:'QCS',
        fr:'Quelle est la principale raison de l‚Äôusage du granit pour certaines parties (ob√©lisques, chambres) ?',
        en:'What is the main reason for using granite for certain parts (obelisks, chambers)?',
        options:[
          {fr:'Facilit√© de taillage', en:'Ease of carving'},
          {fr:'Duret√© et r√©sistance', en:'Hardness and durability'},
          {fr:'L√©g√®ret√©', en:'Lightness'},
          {fr:'Transparence', en:'Transparency'}
        ], answer:[1]
      },
      { id:'q54', type:'QCS',
        fr:'Quel type de toiture est typique des maisons domestiques √©gyptiennes ?',
        en:'What type of roof is typical of Egyptian domestic houses?',
        options:[
          {fr:'Toit plat en roseau et argile', en:'Flat reed-and-clay roof'},
          {fr:'Toit √† double pente', en:'Gabled roof'},
          {fr:'Vo√ªte nervur√©e', en:'Ribbed vault'},
          {fr:'Toit en t√¥le', en:'Sheet metal roof'}
        ], answer:[0]
      },
      { id:'q55', type:'QCS',
        fr:'Quel instrument de mesure fondamental utilisaient-ils en architecture ?',
        en:'What fundamental measuring instrument did they use in architecture?',
        options:[
          {fr:'Coud√©e (cubit)', en:'Cubit'},
          {fr:'M√®tre', en:'Meter'},
          {fr:'Yard', en:'Yard'},
          {fr:'Pied imp√©rial', en:'Imperial foot'}
        ], answer:[0]
      },
      { id:'q56', type:'QCS',
        fr:'Quel √©difice √©gyptien est r√©put√© pour sa salle hypostyle monumentale ?',
        en:'Which Egyptian building is famed for its monumental hypostyle hall?',
        options:[
          {fr:'Temple de Karnak', en:'Karnak Temple'},
          {fr:'Pyramide de Khufu', en:'Pyramid of Khufu'},
          {fr:'Mastaba de Saqqara', en:'Mastaba of Saqqara'},
          {fr:'Temple de Louxor moderne', en:'Modern Luxor temple'}
        ], answer:[0]
      },
      { id:'q57', type:'QCS',
        fr:'Quel motif v√©g√©tal symbolisait souvent la renaissance et l‚Äôeau ?',
        en:'Which plant motif often symbolized rebirth and water?',
        options:[
          {fr:'Papyrus', en:'Papyrus'},
          {fr:'Ch√™ne', en:'Oak'},
          {fr:'Saule', en:'Willow'},
          {fr:'Olive', en:'Olive'}
        ], answer:[0]
      },
      { id:'q58', type:'QCS',
        fr:'Quel √©l√©ment structurel portait l‚Äôessentiel de la toiture dans la salle hypostyle ?',
        en:'Which structural element carried most of the roof in the hypostyle hall?',
        options:[
          {fr:'Colonnes', en:'Columns'},
          {fr:'Murs porteurs uniquement', en:'Only load-bearing walls'},
          {fr:'Arcs en acier', en:'Steel arches'},
          {fr:'Toit autoportant moderne', en:'Modern self-supporting roof'}
        ], answer:[0]
      },
      { id:'q59', type:'QCS',
        fr:'Quelle pierre √©tait privil√©gi√©e pour les statues colossales faciales (visage) ?',
        en:'Which stone was preferred for colossal statues faces?',
        options:[
          {fr:'Granit rose', en:'Pink granite'},
          {fr:'Calcaire tendre', en:'Soft limestone'},
          {fr:'Marbre blanc', en:'White marble'},
          {fr:'Basalte', en:'Basalt'}
        ], answer:[0]
      },
      { id:'q60', type:'QCS',
        fr:'Quel type de d√©cor caract√©rise principalement les sanctuaires √©gyptiens int√©rieurs ?',
        en:'What type of decoration mainly characterizes interior Egyptian sanctuaries?',
        options:[
          {fr:'Bas-reliefs et inscriptions hi√©roglyphiques', en:'Bas-reliefs and hieroglyphic inscriptions'},
          {fr:'Peintures fresques baroques', en:'Baroque fresco paintings'},
          {fr:'Mosa√Øques romaines', en:'Roman mosaics'},
          {fr:'Tapisseries gothiques', en:'Gothic tapestries'}
        ], answer:[0]
      },
      { id:'q61', type:'QCS',
        fr:'Quel espace correspond au "p√©ristyle" dans un temple √©gyptien ?',
        en:'Which space corresponds to the "peristyle" in an Egyptian temple?',
        options:[
          {fr:'Cour entour√©e de colonnes', en:'Courtyard surrounded by columns'},
          {fr:'Chambre souterraine', en:'Underground chamber'},
          {fr:'Escalier ext√©rieur', en:'External staircase'},
          {fr:'Vestibule romain', en:'Roman vestibule'}
        ], answer:[0]
      },
      { id:'q62', type:'QCS',
        fr:'Quel mat√©riau on utilisait pour les rev√™tements int√©rieurs d√©licats ?',
        en:'Which material was used for delicate interior finishes?',
        options:[
          {fr:'Pl√¢tre fin (enduit)', en:'Fine plaster (stucco)'},
          {fr:'PVC moderne', en:'Modern PVC'},
          {fr:'Brique brute', en:'Raw brick'},
          {fr:'T√¥le galvanis√©e', en:'Galvanized sheet'}
        ], answer:[0]
      },
      { id:'q63', type:'QCS',
        fr:'Quel √©l√©ment architectonique servait souvent √† recevoir inscriptions royales ?',
        en:'Which architectural element often received royal inscriptions?',
        options:[
          {fr:'Pyl√¥nes et fa√ßades', en:'Pylons and fa√ßades'},
          {fr:'Planchers en bois', en:'Wooden floors'},
          {fr:'Foss√©s ext√©rieurs', en:'Outer moats'},
          {fr:'Toitures en chaume', en:'Thatched roofs'}
        ], answer:[0]
      },
      { id:'q64', type:'QCS',
        fr:'Quel type de colonne porte un chapiteau en forme de t√™te de d√©esse ?',
        en:'Which column type bears a capital in the form of a goddess\' head?',
        options:[
          {fr:'Hathorique', en:'Hathoric'},
          {fr:'Ionique', en:'Ionic'},
          {fr:'Corinthien', en:'Corinthian'},
          {fr:'Toscan', en:'Tuscan'}
        ], answer:[0]
      },
      { id:'q65', type:'QCS',
        fr:'Quel espace est appel√© "naos" dans un temple √©gyptien ?',
        en:'Which space is called the "naos" in an Egyptian temple?',
        options:[
          {fr:'Sanctuaire interne (c≈ìur sacr√©)', en:'Inner sanctuary (sacred core)'},
          {fr:'Cour ext√©rieure', en:'Outer courtyard'},
          {fr:'Salle hypostyle', en:'Hypostyle hall'},
          {fr:'Lieu de stockage', en:'Storage area'}
        ], answer:[0]
      },
      { id:'q66', type:'QCS',
        fr:'Quelle technique participait au nivellement pr√©cis sur grandes √©tendues?',
        en:'Which technique aided precise leveling over large areas?',
        options:[
          {fr:'Alignement par corde et piquets', en:'Cord and peg alignment'},
          {fr:'Nivellement par GPS', en:'GPS leveling'},
          {fr:'Laser rotatif', en:'Rotary laser'},
          {fr:'Mesure par fum√©e', en:'Smoke measurement'}
        ], answer:[0]
      },
      { id:'q67', type:'QCS',
        fr:'Quel monument sert d‚Äôexemple de complexit√© fun√©raire (pyramide + temple + chauss√©e) ?',
        en:'Which monument exemplifies funerary complexity (pyramid + temple + causeway)?',
        options:[
          {fr:'Complexe de Gizeh', en:'Giza complex'},
          {fr:'Temple de Kom Ombo', en:'Kom Ombo temple'},
          {fr:'Mastaba isol√©e', en:'Isolated mastaba'},
          {fr:'Hypog√©e √©trusque', en:'Etruscan hypogeum'}
        ], answer:[0]
      },
      { id:'q68', type:'QCS',
        fr:'Quel mat√©riau rev√™tait parfois les faces ext√©rieures pour un fini lisse ?',
        en:'What material sometimes covered outer faces for a smooth finish?',
        options:[
          {fr:'Calcite ou pierre polie (rev√™tement)', en:'Polished calcite or stone facing'},
          {fr:'Enduit moderne en plastique', en:'Modern plastic coating'},
          {fr:'Peinture √† l‚Äôhuile', en:'Oil paint'},
          {fr:'Tissu tendu', en:'Stretched fabric'}
        ], answer:[0]
      },
      { id:'q69', type:'QCS',
        fr:'Quel est le r√¥le principal de l‚Äôob√©lisque ?',
        en:'What is the primary role of the obelisk?',
        options:[
          {fr:'Monument comm√©moratif et solaire', en:'Commemorative and solar monument'},
          {fr:'Soutien structurel', en:'Structural support'},
          {fr:'Habitat', en:'Housing'},
          {fr:'R√©servoir d‚Äôeau', en:'Water reservoir'}
        ], answer:[0]
      },
      { id:'q70', type:'QCS',
        fr:'Quel √©l√©ment servait souvent de limite entre espace profane et sacr√© ?',
        en:'Which element often served as a boundary between profane and sacred space?',
        options:[
          {fr:'Pyl√¥ne', en:'Pylon'},
          {fr:'Portail moderne', en:'Modern gate'},
          {fr:'Palissade en bois', en:'Wooden fence'},
          {fr:'Mur mitoyen', en:'Party wall'}
        ], answer:[0]
      },

      /* continuing QCS to reach 80 (we have 46..70 => 25 items; need 35 total QCS -> items 46..80) */
      { id:'q71', type:'QCS',
        fr:'Quelle forme de cour √©tait courante devant le pyl√¥ne ?',
        en:'Which courtyard form was common before the pylon?',
        options:[
          {fr:'Cour √† portiques', en:'Columned courtyard'},
          {fr:'Atrium int√©rieur', en:'Interior atrium'},
          {fr:'Place publique romaine', en:'Roman public square'},
          {fr:'Cour pav√©e gothique', en:'Gothic paved yard'}
        ], answer:[0]
      },
      { id:'q72', type:'QCS',
        fr:'Quel artisanat sp√©cialis√© pouvait √™tre rep√©r√© sur un site (indices) ?',
        en:'Which specialized craft could be identified on a site (evidence)?',
        options:[
          {fr:'Atelier de sculpture', en:'Sculpture workshop'},
          {fr:'Usine industrielle moderne', en:'Modern factory'},
          {fr:'Laverie collective', en:'Communal laundry'},
          {fr:'Appareillage √©lectrique', en:'Electrical workshop'}
        ], answer:[0]
      },
      { id:'q73', type:'QCS',
        fr:'Quel mat√©riau √©tait pr√©f√©r√© pour les colonnes expos√©es aux intemp√©ries ?',
        en:'Which material was preferred for columns exposed to weather?',
        options:[
          {fr:'Granit', en:'Granite'},
          {fr:'Pl√¢tre', en:'Plaster'},
          {fr:'Bois tendre', en:'Softwood'},
          {fr:'Brique crue', en:'Mudbrick'}
        ], answer:[0]
      },
      { id:'q74', type:'QCS',
        fr:'Quel artifice √©tait utilis√© pour que les inscriptions soient visibles de loin ?',
        en:'What device was used so inscriptions were visible from afar?',
        options:[
          {fr:'Peinture contrast√©e sur relief', en:'Contrasting paint on reliefs'},
          {fr:'√âclairage LED', en:'LED lighting'},
          {fr:'Usage de lettres en m√©tal', en:'Metal lettering'},
          {fr:'Gravure tr√®s profonde sans finition', en:'Deep carving without finish'}
        ], answer:[0]
      },
      { id:'q75', type:'QCS',
        fr:'Quel √©l√©ment structurel prot√©geait l‚Äôacc√®s aux chambres internes ?',
        en:'Which structural element protected access to inner chambers?',
        options:[
          {fr:'Couloir ou puits d‚Äôacc√®s scell√©', en:'Sealed passage or shaft'},
          {fr:'Portail en verre', en:'Glass gate'},
          {fr:'Mur en briques l√©g√®res', en:'Light brick wall'},
          {fr:'Portique ouvert', en:'Open portico'}
        ], answer:[0]
      },
      { id:'q76', type:'QCS',
        fr:'Quel mat√©riau permettait l‚Äôincrustation de couleurs vives ?',
        en:'Which material allowed inlay of vivid colors?',
        options:[
          {fr:'Pierre polie et enduit', en:'Polished stone and plaster'},
          {fr:'Acier inoxydable', en:'Stainless steel'},
          {fr:'B√©ton brut', en:'Raw concrete'},
          {fr:'Tissu peint', en:'Painted fabric'}
        ], answer:[0]
      },
      { id:'q77', type:'QCS',
        fr:'Quel √©l√©ment marquait la pr√©sence royale dans un complexe ?',
        en:'Which element marked royal presence in a complex?',
        options:[
          {fr:'Cartouches et titulature royale', en:'Cartouches and royal titulary'},
          {fr:'Drapeaux modernes', en:'Modern flags'},
          {fr:'Panneaux publics', en:'Public signs'},
          {fr:'Timbres postaux', en:'Postal stamps'}
        ], answer:[0]
      },
      { id:'q78', type:'QCS',
        fr:'Quelle infrastructure facilitait l‚Äôapprovisionnement des chantiers ?',
        en:'Which infrastructure facilitated supply to construction sites?',
        options:[
          {fr:'Quais sur le Nil', en:'Quays on the Nile'},
          {fr:'R√©seau routier asphalt√©', en:'Asphalt road network'},
          {fr:'Chemins de fer', en:'Railways'},
          {fr:'Stations-service', en:'Service stations'}
        ], answer:[0]
      },
      { id:'q79', type:'QCS',
        fr:'Quel √©l√©ment est souvent au centre d‚Äôune cour monumentale ?',
        en:'What element is often at the center of a monumental courtyard?',
        options:[
          {fr:'Statue du souverain ou divinit√©', en:'Statue of the ruler or deity'},
          {fr:'Fontaine moderne', en:'Modern fountain'},
          {fr:'Parking', en:'Parking lot'},
          {fr:'Kiosque commercial', en:'Commercial kiosk'}
        ], answer:[0]
      },
      { id:'q80', type:'QCS',
        fr:'Quel type d‚Äôornement se retrouve fr√©quemment sur les murs ext√©rieurs royaux ?',
        en:'Which ornament frequently appears on royal exterior walls?',
        options:[
          {fr:'Bas-reliefs narratifs', en:'Narrative bas-reliefs'},
          {fr:'Sticker publicitaire', en:'Advertising sticker'},
          {fr:'Tissage mural', en:'Wall tapestry'},
          {fr:'Peinture murale contemporaine', en:'Contemporary mural painting'}
        ], answer:[0]
      },

      /* ---------- VF 81..100 (20 items) True/False ---------- */
      { id:'q81', type:'VF',
        fr:'Les pyramides √©gyptiennes ont √©t√© construites uniquement en brique crue.', 
        en:'Egyptian pyramids were built only of mudbrick.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q82', type:'VF',
        fr:'La coud√©e royale √©tait une unit√© de mesure utilis√©e couramment.', 
        en:'The royal cubit was a commonly used unit of measurement.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q83', type:'VF',
        fr:'Les colonnes hathoriques repr√©sentent souvent des visages f√©minins.', 
        en:'Hathoric columns often depict female faces.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q84', type:'VF',
        fr:'Les rampes sont une hypoth√®se pour la construction des pyramides.', 
        en:'Ramps are a hypothesis for pyramid construction.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q85', type:'VF',
        fr:'Les temples √©gyptiens sont toujours orient√©s exactement au nord.', 
        en:'Egyptian temples are always oriented exactly north.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q86', type:'VF',
        fr:'Le granit √©tait utilis√© pour des √©l√©ments n√©cessitant une grande r√©sistance.', 
        en:'Granite was used for elements requiring great strength.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q87', type:'VF',
        fr:'Les colonnes papyriformes imitent des tiges de papyrus.', 
        en:'Papyriform columns imitate papyrus stems.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q88', type:'VF',
        fr:'Les ouvriers transportaient les blocs uniquement par la mer.', 
        en:'Workers transported blocks only by sea.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q89', type:'VF',
        fr:'Les bas-reliefs √©gyptiens √©taient souvent peints apr√®s la sculpture.', 
        en:'Egyptian bas-reliefs were often painted after carving.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q90', type:'VF',
        fr:'Le serdab permettait la circulation des vivants.', 
        en:'The serdab allowed circulation of the living.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q91', type:'VF',
        fr:'Les linteaux en pierre ne supportaient pas de charge importante.', 
        en:'Stone lintels did not support significant loads.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q92', type:'VF',
        fr:'Les rampes pouvaient √™tre droites, en spirale ou √† gradins.', 
        en:'Ramps could be straight, spiral or stepped.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q93', type:'VF',
        fr:'Les salles hypostyles sont caract√©ris√©es par de nombreuses colonnes.', 
        en:'Hypostyle halls are characterized by many columns.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q94', type:'VF',
        fr:'Les ob√©lisques √©taient taill√©s dans un seul bloc', 
        en:'Obelisks were carved from a single block.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q95', type:'VF',
        fr:'Les enduits peints permettaient d‚Äôisoler thermiquement les murs.', 
        en:'Painted plasters provided thermal insulation to walls.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q96', type:'VF',
        fr:'L‚Äôorientation des temples pouvait √™tre li√©e √† la course du soleil.', 
        en:'Temple orientation could be linked to the sun‚Äôs course.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q97', type:'VF',
        fr:'Les natifs utilisaient la brique crue pour l‚Äôensemble des monuments royaux.', 
        en:'Natives used mudbrick for all royal monuments.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q98', type:'VF',
        fr:'Les colonnes lotiformes rappellent la corolle du lotus.', 
        en:'Lotiform columns recall the lotus corolla.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      },
      { id:'q99', type:'VF',
        fr:'La navigation fluviale n‚Äô√©tait pas pertinente pour l‚Äôapprovisionnement des chantiers.', 
        en:'River navigation was not relevant for supplying construction sites.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[1]
      },
      { id:'q100', type:'VF',
        fr:'Les bas-reliefs racontent souvent des sc√®nes de la vie quotidienne ou rituelle.', 
        en:'Bas-reliefs often depict scenes of daily or ritual life.',
        options:[ {fr:'Vrai', en:'True'}, {fr:'Faux', en:'False'} ], answer:[0]
      }
    ]; // end allQuestions

    /* -------------- Quiz runtime logic -------------- */
    let currentSet = [];
    let currentIndex = 0;
    let answers = []; // each entry: array of chosen indices or null
    let score = 0;
    let timer = null;
    let timeLeft = 20 * 60; // default total seconds for full set (20 min)
    let wrongIds = [];
    let retryMode = false;

    function renderInfo(){
      selectedLangSpan.textContent = langSelect.value.toUpperCase();
      selectedTypeSpan.textContent = (typeSelect.value === 'ALL')? 'Tous' : typeSelect.value;
      selectedTypeBadge.textContent = (typeSelect.value==='ALL')? 'Tous' : typeSelect.value;
    }

    // Helper: shuffle array in-place
    function shuffle(array){
      for(let i=array.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
      }
      return array;
    }

    // Filter questions by selected type
    function buildSet(){
      const t = typeSelect.value;
      let set = (t==='ALL')? allQuestions.slice() : allQuestions.filter(q=>q.type===t);
      if (shuffleCheckbox.checked) shuffle(set);
      return set;
    }

    function resetQuizState(){
      stopTimer();
      resultArea.style.display='none';
      currentSet = [];
      currentIndex = 0;
      answers = [];
      score = 0;
      wrongIds = [];
      retryMode = false;
      scoreDisplay.textContent = '0';
      timerDisplay.textContent = formatTime(timeLeft);
      miniTimer.textContent = formatTime(timeLeft);
      questionText.textContent = 'Choisissez la langue et le type puis appuyez sur "D√©marrer".';
      optionsContainer.innerHTML = '';
      questionIndex.textContent = 'Question ‚Äî';
      prevBtn.disabled = true; nextBtn.disabled = true;
      startBtn.disabled = false; submitBtn.style.display='none';
      totalQuestionsLabel.textContent = '0';
      currentNumberLabel.textContent = '0';
      selectedLangSpan.textContent = langSelect.value.toUpperCase();
      selectedTypeSpan.textContent = (typeSelect.value==='ALL')? 'Tous' : typeSelect.value;
    }

    function formatTime(sec){
      const m=Math.floor(sec/60).toString().padStart(2,'0');
      const s=(sec%60).toString().padStart(2,'0');
      return `${m}:${s}`;
    }

    // Start quiz with chosen language & type
    startBtn.addEventListener('click', () => {
      // build set
      currentSet = buildSet();
      if (currentSet.length===0){ alert('Aucune question disponible pour ce type.'); return; }
      // initialize
      answers = Array(currentSet.length).fill(null);
      currentIndex = 0;
      score = 0;
      wrongIds = [];
      retryMode = false;
      totalQuestionsLabel.textContent = currentSet.length;
      currentNumberLabel.textContent = currentIndex+1;
      startBtn.disabled = true;
      submitBtn.style.display = 'inline-block';
      prevBtn.disabled = true;
      nextBtn.disabled = (currentSet.length===1);
      // timer default proportionally: set 12 seconds per question as baseline if many questions ‚Äî keep 20min cap
      const baseline = Math.min(20*60, Math.max(5*60, Math.floor(currentSet.length * 12)));
      timeLeft = baseline;
      timerDisplay.textContent = formatTime(timeLeft);
      miniTimer.textContent = formatTime(timeLeft);
      startTimer();
      renderQuestion();
    });

    // Render current question
    function renderQuestion(){
      const q = currentSet[currentIndex];
      const lang = langSelect.value;
      questionIndex.textContent = `Question ${currentIndex+1} / ${currentSet.length}`;
      questionText.textContent = (lang==='fr')? q.fr : q.en;
      optionsContainer.innerHTML = '';
      currentNumberLabel.textContent = currentIndex+1;
      selectedLangSpan.textContent = lang.toUpperCase();
      selectedTypeSpan.textContent = (typeSelect.value==='ALL')? 'Tous' : typeSelect.value;

      if (q.type==='QCM'){
        q.options.forEach((opt,i)=>{
          const label = document.createElement('label');
          label.className='option';
          const input = document.createElement('input');
          input.type='checkbox';
          input.name='opt';
          input.value=i;
          input.id=`opt-${q.id}-${i}`;
          // restore
          if (Array.isArray(answers[currentIndex]) && answers[currentIndex].includes(i)) input.checked=true;
          const span = document.createElement('span');
          span.textContent = (lang==='fr')? opt.fr : opt.en;
          label.appendChild(input); label.appendChild(span);
          optionsContainer.appendChild(label);
        });
      } else if (q.type==='QCS' || q.type==='VF'){
        // radio options
        q.options.forEach((opt,i)=>{
          const label=document.createElement('label');
          label.className='option';
          const input=document.createElement('input');
          input.type='radio';
          input.name='opt';
          input.value=i;
          input.id=`opt-${q.id}-${i}`;
          if (Array.isArray(answers[currentIndex]) && answers[currentIndex][0]===i) input.checked=true;
          const span=document.createElement('span');
          span.textContent = (lang==='fr')? opt.fr : opt.en;
          label.appendChild(input); label.appendChild(span);
          optionsContainer.appendChild(label);
        });
      }

      // update navigation
      prevBtn.disabled = (currentIndex===0);
      nextBtn.disabled = (currentIndex===currentSet.length-1);
    }

    // Save current answer
    function saveCurrentAnswer(){
      const q = currentSet[currentIndex];
      const inputs = Array.from(optionsContainer.querySelectorAll('input[name="opt"]'));
      if (q.type==='QCM'){
        const chosen = inputs.filter(i=>i.checked).map(i=>parseInt(i.value));
        answers[currentIndex] = chosen.length? chosen : null;
      } else {
        const chosen = inputs.find(i=>i.checked);
        answers[currentIndex] = chosen? [parseInt(chosen.value)] : null;
      }
    }

    // Navigation buttons
    prevBtn.addEventListener('click', ()=>{
      saveCurrentAnswer();
      if (currentIndex>0){ currentIndex--; renderQuestion(); }
    });
    nextBtn.addEventListener('click', ()=>{
      saveCurrentAnswer();
      if (currentIndex<currentSet.length-1){ currentIndex++; renderQuestion(); }
    });

    // Submit / Finish quiz
    submitBtn.addEventListener('click', finishQuiz);
    endEarlyBtn.addEventListener('click', finishQuiz);

    function finishQuiz(){
      stopTimer();
      saveCurrentAnswer();
      // scoring
      score = 0;
      wrongIds = [];
      currentSet.forEach((q, idx)=>{
        const user = answers[idx];
        const corr = q.answer.slice().sort((a,b)=>a-b);
        if (!user || user.length===0){
          // no answer => 0 points
          return;
        }
        const u = user.slice().sort((a,b)=>a-b);
        // compare arrays
        let equal = (u.length===corr.length && u.every((v,i)=>v===corr[i]));
        if (equal) score += 1;
        else {
          score -= 1;
          wrongIds.push(q.id);
        }
      });

      scoreDisplay.textContent = `${score} / ${currentSet.length}`;
      showResults();
    }

    // show results details
    function showResults(){
      resultArea.style.display = 'block';
      // summary
      resultSummary.innerHTML = `<p>Score final: <strong>${score}</strong> (bar√®me: +1 / ‚àí1 / 0 pour non r√©pondu)</p>
        <p>Questions totales: <strong>${currentSet.length}</strong>. Incorrectes: <strong>${wrongIds.length}</strong>.</p>`;
      // list each question with user answer and correct answer (language)
      answersList.innerHTML = '';
      const lang = langSelect.value;
      currentSet.forEach((q, idx)=>{
        const item = document.createElement('div'); item.className='answer-item';
        const title = document.createElement('div'); title.style.fontWeight='700';
        title.textContent = `Q${idx+1} ‚Äî ${lang==='fr'? q.fr : q.en}`;
        item.appendChild(title);
        const ua = document.createElement('div'); ua.style.marginTop='8px';
        let uaText = 'Votre r√©ponse : ';
        if (!answers[idx] || answers[idx].length===0) uaText += '(Non r√©pondu)';
        else uaText += answers[idx].map(i => (lang==='fr'? q.options[i].fr : q.options[i].en)).join(' ; ');
        ua.innerHTML = uaText;
        item.appendChild(ua);
        const ca = document.createElement('div'); ca.style.marginTop='6px';
        ca.innerHTML = `<strong>R√©ponse correcte :</strong> ${q.answer.map(i => (lang==='fr'? q.options[i].fr : q.options[i].en)).join(' ; ')}`;
        item.appendChild(ca);
        const isCorrect = answers[idx] && answers[idx].length && (answers[idx].slice().sort().toString() === q.answer.slice().sort().toString());
        const mark = document.createElement('div'); mark.style.marginTop='8px';
        mark.innerHTML = isCorrect? `<span style="color:green;font-weight:700">‚úî Correct</span>` : `<span style="color:#d6336c;font-weight:700">‚úñ Incorrect</span>`;
        item.appendChild(mark);
        answersList.appendChild(item);
      });
      // set retry button state
      if (wrongIds.length===0 || !retryWrongInput.checked) retryBtn.disabled = true;
      else retryBtn.disabled = false;
    }

    // Retry wrong questions only
    retryBtn.addEventListener('click', ()=>{
      if (wrongIds.length===0) return;
      retryMode = true;
      // build new currentSet from ids order preserved
      currentSet = wrongIds.map(id => allQuestions.find(q => q.id===id));
      answers = Array(currentSet.length).fill(null);
      currentIndex = 0;
      score = 0;
      wrongIds = [];
      totalQuestionsLabel.textContent = currentSet.length;
      currentNumberLabel.textContent = '1';
      resultArea.style.display = 'none';
      // restart timer short
      timeLeft = Math.max(3*60, Math.floor(currentSet.length*12));
      timerDisplay.textContent = formatTime(timeLeft);
      miniTimer.textContent = formatTime(timeLeft);
      startTimer();
      renderQuestion();
      submitBtn.style.display = 'inline-block';
      startBtn.disabled = true;
    });

    // Reset quiz (clear state)
    resetBtn.addEventListener('click', resetQuizState);

    // Timer functions
    function startTimer(){
      stopTimer();
      updateTimerDisplay();
      timer = setInterval(()=>{
        timeLeft--;
        updateTimerDisplay();
        if (timeLeft<=0) { stopTimer(); finishQuiz(); }
      }, 1000);
    }
    function stopTimer(){ if (timer){ clearInterval(timer); timer=null; } }
    function updateTimerDisplay(){
      timerDisplay.textContent = formatTime(timeLeft);
      miniTimer.textContent = formatTime(timeLeft);
    }

    // Utility: save answer on navigation or periodic
    // Also support keyboard arrows
    document.addEventListener('keydown', (e)=>{
      if (quizModal.style.display !== 'flex') return;
      if (e.key === 'ArrowRight') nextBtn.click();
      if (e.key === 'ArrowLeft') prevBtn.click();
      if (e.key === 'Escape') closeQuiz();
    });

    // Make clicking option toggle appropriate input (label wrapper already)
    optionsContainer.addEventListener('change', (e)=>{
      // no immediate auto-next; user can navigate
    });

    // close result or modal
    document.getElementById('closeResultBtn').addEventListener('click', closeQuiz);

    // on language or type change update labels
    langSelect.addEventListener('change', ()=>{ selectedLangSpan.textContent = langSelect.value.toUpperCase(); renderQuestion(); });
    typeSelect.addEventListener('change', ()=>{ selectedTypeSpan.textContent = (typeSelect.value==='ALL')? 'Tous' : typeSelect.value; selectedTypeBadge.textContent = (typeSelect.value==='ALL')? 'Tous' : typeSelect.value; });

    // initialize UI
    resetQuizState();
  </script>
</body>
</html>
