<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üèõÔ∏è Quiz Architecture ‚Äì ArchiSpace</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet" />
<style>
  /* Reset & Base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin:0; padding:0; height:100%;
    font-family: 'Rubik', sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 20px;
    overflow-x: hidden;
  }
  h1 {
    margin-bottom: 10px;
    font-weight: 600;
    font-size: 2.5rem;
    text-align: center;
    user-select: none;
  }
  .emoji {
    user-select: none;
  }

  /* Container */
  #quiz-container {
    background: rgba(0,0,0,0.45);
    max-width: 700px;
    width: 100%;
    border-radius: 12px;
    padding: 25px 30px 40px 30px;
    box-shadow:
      0 0 15px rgba(255 204 0 / 0.8),
      inset 0 0 10px rgba(255 204 0 / 0.3);
    position: relative;
    overflow: hidden;
  }
  /* Question box */
  .question-box {
    opacity: 0;
    animation: fadeIn 0.7s forwards;
    transition: box-shadow 0.3s ease;
    border-radius: 10px;
    padding: 20px 25px;
    background: linear-gradient(145deg, #f7b733, #f7d358);
    color: #222;
    box-shadow: 0 4px 12px rgba(247, 183, 51, 0.7),
                0 0 20px rgba(247, 183, 51, 0.6);
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(15px);}
    to {opacity: 1; transform: translateY(0);}
  }
  .question-text {
    font-weight: 600;
    font-size: 1.3rem;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  /* Options */
  .options label {
    display: block;
    margin-bottom: 12px;
    cursor: pointer;
    font-weight: 500;
    font-size: 1.1rem;
    color: #222;
    user-select: none;
    padding: 8px 15px;
    border-radius: 8px;
    background: #fff8d6;
    box-shadow: 0 2px 8px rgba(247, 183, 51, 0.4);
    transition: background-color 0.25s ease, box-shadow 0.25s ease;
    position: relative;
  }
  .options label:hover {
    background: #ffd633;
    box-shadow: 0 4px 20px rgba(255, 214, 51, 0.85);
  }
  input[type="radio"], input[type="checkbox"] {
    margin-right: 14px;
    cursor: pointer;
  }

  /* Buttons container */
  .buttons {
    margin-top: 25px;
    display: flex;
    justify-content: space-between;
    user-select: none;
  }
  button {
    background: linear-gradient(45deg, #f7b733, #f7d358);
    border: none;
    padding: 12px 26px;
    font-weight: 600;
    font-size: 1rem;
    border-radius: 10px;
    cursor: pointer;
    color: #222;
    box-shadow: 0 4px 15px rgba(247, 183, 51, 0.7);
    transition:
      background-color 0.3s ease,
      transform 0.25s ease,
      box-shadow 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
  }
  button:hover:not(:disabled) {
    background: linear-gradient(45deg, #ffde59, #ffd633);
    box-shadow: 0 6px 25px rgba(255, 214, 51, 0.95);
    transform: translateY(-3px);
  }
  button:disabled {
    background: #ccc;
    color: #777;
    cursor: default;
    box-shadow: none;
    transform: none;
  }

  /* Timer circular */
  #timer {
    position: relative;
    width: 70px;
    height: 70px;
    margin: 20px auto 10px auto;
  }
  svg {
    transform: rotate(-90deg);
  }
  .circle-bg {
    fill: none;
    stroke: #333;
    stroke-width: 8;
  }
  .circle {
    fill: none;
    stroke: #ffcc00;
    stroke-width: 8;
    stroke-linecap: round;
    stroke-dasharray: 220;
    stroke-dashoffset: 0;
    transition: stroke-dashoffset 1s linear;
  }
  #timer-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: 700;
    font-size: 1.3rem;
    color: #ffcc00;
    user-select: none;
  }

  /* Result box */
  #result {
    margin-top: 30px;
    background: rgba(0,0,0,0.75);
    padding: 20px;
    border-radius: 12px;
    box-shadow:
      0 0 20px #ffd633aa;
    color: #fff;
    font-weight: 600;
    font-size: 1.2rem;
  }

  /* Scrollbar for container */
  #quiz-container {
    max-height: 70vh;
    overflow-y: auto;
  }

  /* Responsive */
  @media(max-width: 760px){
    #quiz-container {
      max-width: 100%;
      padding: 15px 20px 30px 20px;
    }
  }

</style>
</head>
<body>

<h1>üèõÔ∏è Quiz Architecture ‚Äì ArchiSpace <span class="emoji">üß±üìê</span></h1>

<div id="timer" aria-label="timer">
  <svg width="70" height="70">
    <circle class="circle-bg" cx="35" cy="35" r="35"></circle>
    <circle class="circle" cx="35" cy="35" r="35"></circle>
  </svg>
  <div id="timer-text" aria-live="polite" aria-atomic="true">30:00</div>
</div>

<div id="quiz-container" role="main" aria-live="polite" aria-atomic="true">
  <!-- ÿßŸÑÿ≥ÿ§ÿßŸÑ Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß -->
</div>

<div class="buttons">
  <button id="prevBtn" disabled aria-label="Question pr√©c√©dente">‚¨ÖÔ∏è Pr√©c√©dent</button>
  <button id="nextBtn" aria-label="Question suivante">Suivant ‚û°Ô∏è</button>
  <button id="submitBtn" style="display:none;" aria-label="Soumettre le quiz">üì§ Soumettre</button>
</div>

<div id="result" aria-live="polite" aria-atomic="true" style="display:none;"></div>

<script>
  // ÿ£ÿ≥ÿ¶ŸÑÿ© - 100 ÿ≥ÿ§ÿßŸÑ (45 QCM + 35 QCS + 20 VF) ÿ®ÿØŸàŸÜ ÿ™ŸÉÿ±ÿßÿ±
  const questions = [
    // 45 QCM (ÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ™ÿπÿØÿØ ÿµÿ≠Ÿäÿ≠)
    {type:"qcm", q:"Quelle est la principale fonction d'une colonne en architecture ?", choices:["Supporter le poids","D√©corer les murs","Isoler le b√¢timent","Illuminer l'espace"], answer:0},
    {type:"qcm", q:"Le b√©ton arm√© est compos√© de :", choices:["B√©ton et acier","B√©ton et bois","Acier et bois","B√©ton et plastique"], answer:0},
    {type:"qcm", q:"Quelle unit√© est utilis√©e pour mesurer une surface ?", choices:["M√®tre carr√©","M√®tre cube","Kilogramme","Litre"], answer:0},
    {type:"qcm", q:"Quel mat√©riau est le plus utilis√© dans la construction des maisons traditionnelles ?", choices:["Brique","Verre","Plastique","Acier"], answer:0},
    {type:"qcm", q:"Un plan en coupe montre :", choices:["Une vue int√©rieure","Une vue ext√©rieure","Un plan √©lectrique","Un plan de jardin"], answer:0},
    {type:"qcm", q:"Quelle forme de toit est la plus courante dans les maisons d'architecture traditionnelle ?", choices:["Toit en pente","Toit plat","Toit en d√¥me","Toit en verre"], answer:0},
    {type:"qcm", q:"Le terme 'portique' d√©signe :", choices:["Une galerie avec colonnes","Une porte principale","Une fen√™tre sp√©ciale","Un escalier"], answer:0},
    {type:"qcm", q:"Quelle est la fonction principale du dallage ?", choices:["Rev√™tement de sol","Mur porteur","Toiture","Fen√™tre"], answer:0},
    {type:"qcm", q:"Un pilier est diff√©rent d'une colonne car :", choices:["Il est plus massif et sans f√ªt","Il est toujours en bois","Il est transparent","Il est d√©coratif uniquement"], answer:0},
    {type:"qcm", q:"Quel mat√©riau est le plus √©cologique ?", choices:["Bois","B√©ton","Acier","Plastique"], answer:0},
    {type:"qcm", q:"L‚Äôarchitecture gothique est caract√©ris√©e par :", choices:["Arcs en ogive","Colonnes doriques","Toits plats","Fen√™tres rondes"], answer:0},
    {type:"qcm", q:"Quelle est la principale caract√©ristique d'un mur porteur ?", choices:["Supporte la charge du b√¢timent","Est uniquement d√©coratif","Est amovible","Est en verre"], answer:0},
    {type:"qcm", q:"Un plan d'architecte est g√©n√©ralement dessin√© √† l'√©chelle de :", choices:["1:100","1:1","1:1000","1:10"], answer:0},
    {type:"qcm", q:"Le terme 'fa√ßade' d√©signe :", choices:["La face ext√©rieure du b√¢timent","La toiture","Le sous-sol","L'int√©rieur"], answer:0},
    {type:"qcm", q:"Qu‚Äôest-ce qu‚Äôun vo√ªte en architecture ?", choices:["Une structure en arc","Un type de colonne","Un mat√©riau de construction","Une fen√™tre"], answer:0},
    {type:"qcm", q:"Lequel des suivants est un mat√©riau inerte ?", choices:["Verre","Bois","B√©ton","Plastique"], answer:0},
    {type:"qcm", q:"La r√©sistance des mat√©riaux mesure :", choices:["La capacit√© √† supporter une charge","La couleur","La texture","La flexibilit√©"], answer:0},
    {type:"qcm", q:"Le terme 'plinthe' d√©signe :", choices:["La base du mur","Le toit","La fen√™tre","La porte"], answer:0},
    {type:"qcm", q:"Quelle est l‚Äô√©paisseur moyenne d‚Äôun mur porteur ?", choices:["30 cm","5 cm","1 m√®tre","10 cm"], answer:0},
    {type:"qcm", q:"L‚Äôacier est principalement utilis√© pour :", choices:["Les structures porteuses","Les rev√™tements de sol","Les fen√™tres","Les toitures"], answer:0},
    {type:"qcm", q:"Le terme 'corniche' d√©signe :", choices:["Un √©l√©ment d√©coratif en haut d‚Äôun mur","Une porte","Un pilier","Une fen√™tre"], answer:0},
    {type:"qcm", q:"Quelle est la fonction d‚Äôune dalle ?", choices:["Supporter les charges","D√©corer","Isoler","√âclairer"], answer:0},
    {type:"qcm", q:"Les fen√™tres en architecture traditionnelle sont souvent :", choices:["Petites et rectangulaires","Grandes et rondes","En verre teint√©","En plastique"], answer:0},
    {type:"qcm", q:"Qu‚Äôest-ce qu‚Äôune trav√©e ?", choices:["Espace entre deux colonnes","Un type de toit","Une fen√™tre sp√©ciale","Un escalier"], answer:0},
    {type:"qcm", q:"Le toit en terrasse est caract√©ristique de :", choices:["L‚Äôarchitecture moderne","L‚Äôarchitecture gothique","L‚Äôarchitecture classique","L‚Äôarchitecture romaine"], answer:0},
    {type:"qcm", q:"Le ciment est un composant de :", choices:["Le b√©ton","Le bois","L‚Äôacier","Le verre"], answer:0},
    {type:"qcm", q:"Quelle est la dur√©e approximative de prise du b√©ton ?", choices:["24 heures","1 heure","1 semaine","10 minutes"], answer:0},
    {type:"qcm", q:"Lequel des √©l√©ments suivants est une structure horizontale ?", choices:["Dalle","Poteau","Colonne","Mur"], answer:0},
    {type:"qcm", q:"Le parquet est un type de :", choices:["Rev√™tement de sol","Mur","Toiture","Escalier"], answer:0},
    {type:"qcm", q:"Quel type de fondation est le plus courant ?", choices:["Semelle filante","Fondation sur pieux","Radier g√©n√©ral","Fondation superficielle"], answer:0},
    {type:"qcm", q:"Le terme 'chaperon' d√©signe :", choices:["La partie sup√©rieure d‚Äôun mur","Une porte","Une fen√™tre","Un pilier"], answer:0},
    {type:"qcm", q:"La charpente est g√©n√©ralement en :", choices:["Bois","Acier","B√©ton","Plastique"], answer:0},
    {type:"qcm", q:"Le b√©ton pr√©contraint est :", choices:["Renforc√© par des c√¢bles tendus","Simple b√©ton","En bois","Transparent"], answer:0},
    {type:"qcm", q:"Quel est l‚Äôavantage principal des structures en acier ?", choices:["Grande r√©sistance et l√©g√®ret√©","Co√ªt faible","Isolation thermique","Facilit√© d‚Äôinstallation"], answer:0},
    {type:"qcm", q:"La surface d‚Äôun rectangle se calcule par :", choices:["Longueur √ó Largeur","Longueur + Largeur","Longueur - Largeur","Longueur / Largeur"], answer:0},
    {type:"qcm", q:"Un escalier droit est caract√©ris√© par :", choices:["Une seule vol√©e","Plusieurs virages","Escalier en colima√ßon","Escalier suspendu"], answer:0},
    {type:"qcm", q:"Le mortier sert √† :", choices:["Assembler les briques","Isoler","D√©corer","Peindre"], answer:0},
    {type:"qcm", q:"La hauteur sous plafond standard est d'environ :", choices:["2,5 m√®tres","1 m√®tre","4 m√®tres","5 m√®tres"], answer:0},
    {type:"qcm", q:"Quel mat√©riau offre la meilleure isolation thermique ?", choices:["La laine de verre","Le b√©ton","Le m√©tal","Le verre"], answer:0},
    {type:"qcm", q:"Lequel est un syst√®me de chauffage courant dans les b√¢timents modernes ?", choices:["Plancher chauffant","Chemin√©e ouverte","Po√™le √† bois","Radiateur √† eau"], answer:0},
    {type:"qcm", q:"Les murs rideaux sont :", choices:["Des fa√ßades l√©g√®res en verre","Des murs porteurs en b√©ton","Des murs en briques","Des toits"], answer:0},

    // 35 QCS (ÿßÿÆÿ™Ÿäÿßÿ± Ÿàÿßÿ≠ÿØ ÿµÿ≠Ÿäÿ≠)
    {type:"qcs", q:"Quel est le mat√©riau principal utilis√© dans la pyramide de Kh√©ops ?", choices:["Calcaire","Brique","Bois","Acier"], answer:0},
    {type:"qcs", q:"Comment appelle-t-on un dessin technique repr√©sentant une vue de dessus ?", choices:["Plan","Coupe","Fa√ßade","Perspective"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'un linteau ?", choices:["Supporter l'ouverture au-dessus d'une porte ou fen√™tre","D√©corer un mur","Isoler une pi√®ce","Faire une fen√™tre"], answer:0},
    {type:"qcs", q:"Quelle forme ont les arcs en architecture romane ?", choices:["Arc en plein cintre","Arc bris√©","Arc ogival","Arc en anse de panier"], answer:0},
    {type:"qcs", q:"Quel type de plan montre une section verticale ?", choices:["Plan en coupe","Plan d'ensemble","Plan de fa√ßade","Plan de masse"], answer:0},
    {type:"qcs", q:"Quel √©l√©ment architectural est souvent sculpt√© dans les chapiteaux ?", choices:["Feuilles d'acanthe","Colonnes","Dalles","Poutres"], answer:0},
    {type:"qcs", q:"Quelle est la partie horizontale sup√©rieure d'une colonne ?", choices:["Chapiteau","F√ªt","Base","Dalle"], answer:0},
    {type:"qcs", q:"Qu'est-ce qu'un plan masse ?", choices:["Plan d'ensemble du terrain","Plan int√©rieur","Plan de fa√ßade","Plan en coupe"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'une poutre ?", choices:["Supporter une charge horizontale","D√©corer","Isoler","Servir de fen√™tre"], answer:0},
    {type:"qcs", q:"Quelle est la particularit√© d'un mur mitoyen ?", choices:["S√©pare deux propri√©t√©s","Est toujours en bois","Est en verre","Est amovible"], answer:0},
    {type:"qcs", q:"Quel mat√©riau est le plus lourd ?", choices:["B√©ton","Bois","Acier","Verre"], answer:2},
    {type:"qcs", q:"Lequel est un exemple d‚Äô√©l√©ment non porteur ?", choices:["Cloison","Colonne","Poteau","Poutre"], answer:0},
    {type:"qcs", q:"Lequel des √©l√©ments suivants fait partie de la fondation ?", choices:["Semelle","Plafond","Mur","Toit"], answer:0},
    {type:"qcs", q:"Quelle est la principale caract√©ristique du style baroque ?", choices:["Ornements exub√©rants","Simplicit√©","Formes g√©om√©triques simples","Couleurs neutres"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d‚Äôune fen√™tre ?", choices:["Permettre l'entr√©e de lumi√®re et d'air","Supporter un toit","D√©corer une fa√ßade","Isoler"], answer:0},
    {type:"qcs", q:"Quel outil est utilis√© pour tracer des arcs ?", choices:["Compas","R√®gle","√âquerre","Crayon"], answer:0},
    {type:"qcs", q:"Quel est le r√¥le d‚Äôune charpente ?", choices:["Soutenir la toiture","Isoler","D√©corer","Supporter le sol"], answer:0},
    {type:"qcs", q:"Quelle est l'√©paisseur recommand√©e pour un mur ext√©rieur ?", choices:["30 √† 40 cm","5 cm","1 m√®tre","10 cm"], answer:0},
    {type:"qcs", q:"Quel est le mat√©riau utilis√© pour isoler ?", choices:["Laine de verre","B√©ton","Acier","Verre"], answer:0},
    {type:"qcs", q:"Quel est l'√©l√©ment principal d'un toit en pente ?", choices:["La charpente","La dalle","Le mur","Le sol"], answer:0},
    {type:"qcs", q:"Quelle est la hauteur standard d'une porte ?", choices:["2 m√®tres","1 m√®tre","3 m√®tres","2,5 m√®tres"], answer:0},
    {type:"qcs", q:"Qu'est-ce qu'une fa√ßade ?","choices":["Face ext√©rieure du b√¢timent","Mur int√©rieur","Toit","Sol"], answer:0},
    {type:"qcs", q:"Le b√©ton est principalement compos√© de :", choices:["Ciment, sable, gravier et eau","Bois","Acier","Verre"], answer:0},
    {type:"qcs", q:"Quel est l'outil utilis√© pour mesurer les angles ?", choices:["Rapporteur","R√®gle","Compas","Niveau"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'une fondation ?", choices:["Transmettre les charges au sol","D√©corer","Isoler","Ventiler"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'une dalle ?", choices:["Supporter les charges","D√©corer","Isoler","Ventiler"], answer:0},
    {type:"qcs", q:"Quelle est la caract√©ristique d'une vo√ªte en berceau ?", choices:["Arc continu et arrondi","Arc bris√©","Arc en ogive","Arc en anse de panier"], answer:0},
    {type:"qcs", q:"Lequel est un mat√©riau naturel ?", choices:["Bois","B√©ton","Acier","Plastique"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d'un escalier ?", choices:["Permettre la circulation verticale","Isoler","D√©corer","Supporter le poids"], answer:0},
    {type:"qcs", q:"Quel est le terme pour une ouverture dans un mur ?", choices:["Fen√™tre","Pilier","Plinthe","Corniche"], answer:0},
    {type:"qcs", q:"Quel mat√©riau est r√©sistant √† la corrosion ?", choices:["Acier inoxydable","Bois","Plastique","B√©ton"], answer:0},
    {type:"qcs", q:"Quelle est la particularit√© du style Art d√©co ?", choices:["Lignes g√©om√©triques et ornements stylis√©s","Formes organiques","Couleurs pastel","D√©cor minimaliste"], answer:0},
    {type:"qcs", q:"Quel est le r√¥le d‚Äôun poteau ?", choices:["Supporter verticalement","D√©corer","Isoler","Ventiler"], answer:0},
    {type:"qcs", q:"Quel type de dessin montre la fa√ßade d'un b√¢timent ?", choices:["Fa√ßade","Plan","Coupe","Perspective"], answer:0},
    {type:"qcs", q:"Quelle est la fonction d‚Äôun linteau ?", choices:["Supporter l‚Äôouverture d‚Äôune fen√™tre ou porte","D√©corer","Isoler","Ventiler"], answer:0},

    // 20 VF (Vrai/Faux)
    {type:"vf", q:"Le b√©ton arm√© combine b√©ton et acier.", answer:true},
    {type:"vf", q:"Une colonne est toujours ronde.", answer:false},
    {type:"vf", q:"Le bois est un mat√©riau √©cologique.", answer:true},
    {type:"vf", q:"La charpente soutient la toiture.", answer:true},
    {type:"vf", q:"Une dalle est une structure horizontale.", answer:true},
    {type:"vf", q:"Un pilier est toujours d√©coratif.", answer:false},
    {type:"vf", q:"Le mortier sert √† assembler les briques.", answer:true},
    {type:"vf", q:"La r√©sistance des mat√©riaux ne concerne pas la flexibilit√©.", answer:false},
    {type:"vf", q:"Une vo√ªte est une structure arqu√©e.", answer:true},
    {type:"vf", q:"La fa√ßade est la partie int√©rieure du b√¢timent.", answer:false},
    {type:"vf", q:"Le plan en coupe montre une vue verticale.", answer:true},
    {type:"vf", q:"Le parquet est un rev√™tement de sol.", answer:true},
    {type:"vf", q:"L‚Äôacier est principalement utilis√© pour les fen√™tres.", answer:false},
    {type:"vf", q:"La laine de verre est un isolant thermique.", answer:true},
    {type:"vf", q:"Un escalier droit a plusieurs virages.", answer:false},
    {type:"vf", q:"La surface d‚Äôun rectangle est longueur plus largeur.", answer:false},
    {type:"vf", q:"Le b√©ton prend environ 24 heures pour durcir.", answer:true},
    {type:"vf", q:"Une fen√™tre permet l'entr√©e de lumi√®re et d'air.", answer:true},
    {type:"vf", q:"Un mur porteur ne supporte pas la charge du b√¢timent.", answer:false},
    {type:"vf", q:"Les murs rideaux sont des fa√ßades l√©g√®res en verre.", answer:true},
  ];

  // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™
  let currentIndex = 0;
  let score = 0;
  let answers = new Array(questions.length).fill(null);

  // DOM ÿßŸÑÿπŸÜÿßÿµÿ±
  const quizContainer = document.getElementById('quiz-container');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');
  const timerText = document.getElementById('timer-text');
  const circle = document.querySelector('.circle');

  // ŸÖÿ§ŸÇÿ™ ÿØÿßÿ¶ÿ±Ÿä
  const FULL_DASH_ARRAY = 220;
  const TIME_LIMIT = 30 * 60; // 30 ÿØŸÇŸäŸÇÿ© ÿ®ÿßŸÑÿ´ŸàÿßŸÜŸä
  let timePassed = 0;
  let timeLeft = TIME_LIMIT;
  let timerInterval = null;

  function startTimer() {
    updateTimerCircle();
    timerInterval = setInterval(() => {
      timePassed++;
      timeLeft = TIME_LIMIT - timePassed;
      updateTimerCircle();
      if(timeLeft <= 0) {
        clearInterval(timerInterval);
        alert("‚è∞ Temps √©coul√©! Fin du quiz.");
        showResult();
        disableButtons();
      }
    }, 1000);
  }

  function updateTimerCircle() {
    timerText.textContent = formatTime(timeLeft);
    const rawTimeFraction = timeLeft / TIME_LIMIT;
    const circleDashoffset = FULL_DASH_ARRAY * (1 - rawTimeFraction);
    circle.style.strokeDashoffset = circleDashoffset;
    if(timeLeft <= 10) {
      circle.style.stroke = "#ff4444"; // rouge en fin de temps
      timerText.style.color = "#ff4444";
    }
  }

  function formatTime(time) {
    const minutes = Math.floor(time / 60);
    const seconds = time % 60;
    return `${minutes}:${seconds < 10 ? '0'+seconds : seconds}`;
  }

  // ÿπÿ±ÿ∂ ÿ≥ÿ§ÿßŸÑ ÿ≠ÿ≥ÿ® currentIndex
  function showQuestion() {
    const q = questions[currentIndex];
    quizContainer.innerHTML = '';

    // ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ≥ÿ§ÿßŸÑ
    const box = document.createElement('div');
    box.className = 'question-box';
    // ŸÜÿµ ÿßŸÑÿ≥ÿ§ÿßŸÑ ŸÖÿπ ÿ•ŸäŸÖŸàÿ¨Ÿä ÿ≠ÿ≥ÿ® ÿßŸÑŸÜŸàÿπ
    let emoji = '';
    if(q.type === 'qcm') emoji = 'üìù';
    else if(q.type === 'qcs') emoji = 'üîò';
    else if(q.type === 'vf') emoji = '‚úÖ';

    box.innerHTML = `<div class="question-text">${emoji} ${currentIndex+1}. ${q.q}</div>`;

    const optionsDiv = document.createElement('div');
    optionsDiv.className = 'options';

    if(q.type === 'qcm') {
      // ÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ™ÿπÿØÿØ (checkbox)
      q.choices.forEach((choice, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="checkbox" name="answer" value="${i}" aria-label="${choice}"> ${choice}`;
        // ŸÑŸà ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ± Ÿáÿ∞ÿß ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿ≥ÿßÿ®ŸÇÿß
        if(Array.isArray(answers[currentIndex]) && answers[currentIndex].includes(i)) {
          label.querySelector('input').checked = true;
        }
        optionsDiv.appendChild(label);
      });
    } else if(q.type === 'qcs') {
      // ÿßÿÆÿ™Ÿäÿßÿ± Ÿàÿßÿ≠ÿØ (radio)
      q.choices.forEach((choice, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="radio" name="answer" value="${i}" aria-label="${choice}"> ${choice}`;
        if(answers[currentIndex] === i) {
          label.querySelector('input').checked = true;
        }
        optionsDiv.appendChild(label);
      });
    } else if(q.type === 'vf') {
      // ÿµÿ≠ / ÿÆÿ∑ÿ£ (radio)
      ['Vrai', 'Faux'].forEach((choice, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="radio" name="answer" value="${i}" aria-label="${choice}"> ${choice}`;
        if(answers[currentIndex] === i) {
          label.querySelector('input').checked = true;
        }
        optionsDiv.appendChild(label);
      });
    }

    box.appendChild(optionsDiv);
    quizContainer.appendChild(box);

    // ÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ŸÜŸÇŸÑ
    prevBtn.disabled = currentIndex === 0;
    nextBtn.style.display = currentIndex === questions.length -1 ? 'none' : 'inline-flex';
    submitBtn.style.display = currentIndex === questions.length -1 ? 'inline-flex' : 'none';

    // ÿ™ÿ£ÿ´Ÿäÿ± fade-in
    box.style.opacity = 0;
    setTimeout(() => { box.style.opacity = 1; }, 50);
  }

  // ÿ™ÿÆÿ≤ŸäŸÜ ÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
  function saveAnswer() {
    const q = questions[currentIndex];
    let selected;

    if(q.type === 'qcm') {
      const checkedBoxes = [...document.querySelectorAll('input[name="answer"]:checked')].map(input => parseInt(input.value));
      answers[currentIndex] = checkedBoxes.length ? checkedBoxes : null;
    } else {
      const checkedRadio = document.querySelector('input[name="answer"]:checked');
      answers[currentIndex] = checkedRadio ? parseInt(checkedRadio.value) : null;
    }
  }

  // ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ•ÿ¨ÿßÿ®ÿßÿ™ (QCM Ÿäÿ¨ÿ® ŸÉŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿßÿ™ ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ© Ÿäÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±Ÿáÿß ŸÅŸÇÿ∑)
  function checkAnswer(index) {
    const q = questions[index];
    const userAns = answers[index];
    if(userAns === null) return false;

    if(q.type === 'qcm') {
      // ÿ¨Ÿàÿßÿ® ÿµÿ≠Ÿäÿ≠ ŸÖŸÅÿ™ÿ±ÿ∂ ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ±ŸÇŸÖ Ÿàÿ≠ŸäÿØ ŸÅŸä q.answer ÿü ŸÑÿßÿå ŸÑÿØŸäŸÜÿß ŸÅŸÇÿ∑ ÿ±ŸÇŸÖ Ÿàÿßÿ≠ÿØ ŸÅŸä q.answer ŸàŸáŸà ÿ±ŸÇŸÖ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ© ŸÅŸÇÿ∑
      // ŸÑŸÉŸÜ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ™ÿπÿØÿØ: ŸÅŸä ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿ£ÿπÿ∑Ÿäÿ™ answer ÿ±ŸÇŸÖ Ÿàÿßÿ≠ÿØ ŸÅŸÇÿ∑ => ŸäŸÖŸÉŸÜ ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸÑÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ™ÿπÿØÿØ ŸÖÿ™ÿπÿØÿØ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿßÿ™
      // ŸÑÿ∞ŸÑŸÉ ŸÅŸä Ÿáÿ∞ÿß ŸÉŸàŸäÿ≤ ŸÉŸÑ QCM Ÿäÿ≠ÿ™ŸàŸä ÿ¨Ÿàÿßÿ® ÿµÿ≠Ÿäÿ≠ Ÿàÿßÿ≠ÿØ ŸÅŸÇÿ∑ (ŸÑŸÑÿ™ÿ®ÿ≥Ÿäÿ∑)
      return Array.isArray(userAns) && userAns.length === 1 && userAns[0] === q.answer;
    } else if(q.type === 'qcs') {
      return userAns === q.answer;
    } else if(q.type === 'vf') {
      return (userAns === 0 && q.answer === true) || (userAns === 1 && q.answer === false);
    }
    return false;
  }

  // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©
  function showResult() {
    clearInterval(timerInterval);
    saveAnswer();

    score = 0;
    let correctCount = 0;
    let total = questions.length;
    let resultHTML = `<h2>R√©sultats du quiz üèÜ</h2>`;
    resultHTML += `<p>Nombre total de questions : <strong>${total}</strong></p>`;

    for(let i=0; i < total; i++) {
      if(checkAnswer(i)) {
        correctCount++;
      }
    }
    score = correctCount;

    resultHTML += `<p>Votre score est : <strong>${score} / ${total}</strong> (${((score/total)*100).toFixed(1)}%)</p>`;

    resultHTML += `<details style="margin-top: 15px; background: rgba(255 255 255 / 0.1); border-radius: 8px; padding: 10px; color: #ffd633;">
      <summary>Voir les d√©tails par question</summary>`;
    for(let i=0; i < total; i++) {
      const q = questions[i];
      const userCorrect = checkAnswer(i);
      let userAnswerText = '';
      if(answers[i] === null) userAnswerText = `<em>Pas r√©pondu</em>`;
      else {
        if(q.type === 'vf') {
          userAnswerText = answers[i] === 0 ? 'Vrai' : 'Faux';
        } else if(q.type === 'qcs') {
          userAnswerText = q.choices[answers[i]] ?? 'R√©ponse invalide';
        } else if(q.type === 'qcm') {
          userAnswerText = answers[i].map(a => q.choices[a]).join(', ');
        }
      }
      let correctAnswerText = '';
      if(q.type === 'vf') {
        correctAnswerText = q.answer ? 'Vrai' : 'Faux';
      } else {
        correctAnswerText = q.choices[q.answer];
      }

      resultHTML += `<p style="margin:8px 0;">
        <strong>Q${i+1}:</strong> ${q.q}<br>
        Votre r√©ponse: <span style="color:${userCorrect ? '#a3ff7a' : '#ff6b6b'}">${userAnswerText}</span><br>
        R√©ponse correcte: <strong>${correctAnswerText}</strong>
      </p>`;
    }
    resultHTML += `</details>`;

    document.getElementById('result').innerHTML = resultHTML;
    document.getElementById('result').style.display = 'block';

    // ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ
    quizContainer.style.display = 'none';
    prevBtn.style.display = 'none';
    nextBtn.style.display = 'none';
    submitBtn.style.display = 'none';
    timerText.style.display = 'none';
    circle.style.display = 'none';
  }

  // ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
  function disableButtons() {
    prevBtn.disabled = true;
    nextBtn.disabled = true;
    submitBtn.disabled = true;
  }

  // ÿßŸÑÿ£ÿ≠ÿØÿßÿ´
  prevBtn.addEventListener('click', () => {
    saveAnswer();
    if(currentIndex > 0) {
      currentIndex--;
      showQuestion();
    }
  });
  nextBtn.addEventListener('click', () => {
    saveAnswer();
    if(currentIndex < questions.length -1) {
      currentIndex++;
      showQuestion();
    }
  });
  submitBtn.addEventListener('click', () => {
    saveAnswer();
    showResult();
  });

  // ÿßŸÑÿ®ÿØÿßŸäÿ©
  showQuestion();
  startTimer();

</script>

</body>
</html>

